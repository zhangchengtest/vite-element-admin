import{a as Xc}from"../@amap/@amap.99378080.js";import{r as Zc}from"../tui-color-picker/tui-color-picker.5d295346.js";var Sr={exports:{}};/*!
 * TOAST UI ImageEditor
 * @version 3.15.3
 * @license MIT
 */(function(br,Vc){(function(qi,ii){br.exports=ii(Zc())})(self,function($i){return function(){var qi={2777:function(M,O,m){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var g=g||{version:"4.6.0"};if(O.fabric=g,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?g.document=document:g.document=document.implementation.createHTMLDocument(""),g.window=window;else{var A=m(4960),k=new A.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;g.document=k.document,g.jsdomImplForWrapper=m(6759).implForWrapper,g.nodeCanvas=m(6272).Canvas,g.window=k,DOMParser=g.window.DOMParser}g.isTouchSupported="ontouchstart"in g.window||"ontouchstart"in g.document||g.window&&g.window.navigator&&g.window.navigator.maxTouchPoints>0,g.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",g.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],g.DPI=96,g.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",g.commaWsp="(?:\\s+,?\\s*|,\\s*)",g.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,g.reNonWord=/[ \n\.,;!\?\-]/,g.fontPaths={},g.iMatrix=[1,0,0,1,0,0],g.svgNS="http://www.w3.org/2000/svg",g.perfLimitSizeTotal=2097152,g.maxCacheSideLimit=4096,g.minCacheSideLimit=256,g.charWidthsCache={},g.textureSize=2048,g.disableStyleCopyPaste=!1,g.enableGLFiltering=!0,g.devicePixelRatio=g.window.devicePixelRatio||g.window.webkitDevicePixelRatio||g.window.mozDevicePixelRatio||1,g.browserShadowBlurConstant=1,g.arcToSegmentsCache={},g.boundsOfCurveCache={},g.cachesBoundsOfCurve=!0,g.forceGLPutImageData=!1,g.initFilterBackend=function(){if(g.enableGLFiltering&&g.isWebglSupported&&g.isWebglSupported(g.textureSize))return console.log("max texture size: "+g.maxTextureSize),new g.WebglFilterBackend({tileSize:g.textureSize});if(g.Canvas2dFilterBackend)return new g.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=g),function(){function v(n,c){if(!!this.__eventListeners[n]){var d=this.__eventListeners[n];c?d[d.indexOf(c)]=!1:g.util.array.fill(d,!1)}}function a(n,c){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var d in n)this.on(d,n[d]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(c);return this}function h(n,c){var d=function(){c.apply(this,arguments),this.off(n,d)}.bind(this);this.on(n,d)}function u(n,c){if(arguments.length===1)for(var d in n)h.call(this,d,n[d]);else h.call(this,n,c);return this}function i(n,c){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)v.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var d in n)v.call(this,d,n[d]);else v.call(this,n,c);return this}function r(n,c){if(!this.__eventListeners)return this;var d=this.__eventListeners[n];if(!d)return this;for(var s=0,p=d.length;s<p;s++)d[s]&&d[s].call(this,c||{});return this.__eventListeners[n]=d.filter(function(y){return y!==!1}),this}g.Observable={fire:r,on:a,once:u,off:i}}(),g.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var v=0,a=arguments.length;v<a;v++)this._onObjectAdded(arguments[v]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(v,a,h){var u=this._objects;return h?u[a]=v:u.splice(a,0,v),this._onObjectAdded&&this._onObjectAdded(v),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var v=this._objects,a,h=!1,u=0,i=arguments.length;u<i;u++)a=v.indexOf(arguments[u]),a!==-1&&(h=!0,v.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(v,a){for(var h=this.getObjects(),u=0,i=h.length;u<i;u++)v.call(a,h[u],u,h);return this},getObjects:function(v){return typeof v>"u"?this._objects.concat():this._objects.filter(function(a){return a.type===v})},item:function(v){return this._objects[v]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(v,a){return this._objects.indexOf(v)>-1?!0:a?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(v,!0)}):!1},complexity:function(){return this._objects.reduce(function(v,a){return v+=a.complexity?a.complexity():0,v},0)}},g.CommonMethods={_setOptions:function(v){for(var a in v)this.set(a,v[a])},_initGradient:function(v,a){v&&v.colorStops&&!(v instanceof g.Gradient)&&this.set(a,new g.Gradient(v))},_initPattern:function(v,a,h){v&&v.source&&!(v instanceof g.Pattern)?this.set(a,new g.Pattern(v,h)):h&&h()},_setObject:function(v){for(var a in v)this._set(a,v[a])},set:function(v,a){return typeof v=="object"?this._setObject(v):this._set(v,a),this},_set:function(v,a){this[v]=a},toggle:function(v){var a=this.get(v);return typeof a=="boolean"&&this.set(v,!a),this},get:function(v){return this[v]}},function(v){var a=Math.sqrt,h=Math.atan2,u=Math.pow,i=Math.PI/180,r=Math.PI/2;g.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var c=n/r;switch(c){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var c=n/r,d=1;switch(n<0&&(d=-1),c){case 1:return d;case 2:return 0;case 3:return-d}return Math.sin(n)},removeFromArray:function(n,c){var d=n.indexOf(c);return d!==-1&&n.splice(d,1),n},getRandomInt:function(n,c){return Math.floor(Math.random()*(c-n+1))+n},degreesToRadians:function(n){return n*i},radiansToDegrees:function(n){return n/i},rotatePoint:function(n,c,d){var s=new g.Point(n.x-c.x,n.y-c.y),p=g.util.rotateVector(s,d);return new g.Point(p.x,p.y).addEquals(c)},rotateVector:function(n,c){var d=g.util.sin(c),s=g.util.cos(c),p=n.x*s-n.y*d,y=n.x*d+n.y*s;return{x:p,y}},transformPoint:function(n,c,d){return d?new g.Point(c[0]*n.x+c[2]*n.y,c[1]*n.x+c[3]*n.y):new g.Point(c[0]*n.x+c[2]*n.y+c[4],c[1]*n.x+c[3]*n.y+c[5])},makeBoundingBoxFromPoints:function(n,c){if(c)for(var d=0;d<n.length;d++)n[d]=g.util.transformPoint(n[d],c);var s=[n[0].x,n[1].x,n[2].x,n[3].x],p=g.util.array.min(s),y=g.util.array.max(s),I=y-p,_=[n[0].y,n[1].y,n[2].y,n[3].y],E=g.util.array.min(_),D=g.util.array.max(_),L=D-E;return{left:p,top:E,width:I,height:L}},invertTransform:function(n){var c=1/(n[0]*n[3]-n[1]*n[2]),d=[c*n[3],-c*n[1],-c*n[2],c*n[0]],s=g.util.transformPoint({x:n[4],y:n[5]},d,!0);return d[4]=-s.x,d[5]=-s.y,d},toFixed:function(n,c){return parseFloat(Number(n).toFixed(c))},parseUnit:function(n,c){var d=/\D{0,2}$/.exec(n),s=parseFloat(n);switch(c||(c=g.Text.DEFAULT_SVG_FONT_SIZE),d[0]){case"mm":return s*g.DPI/25.4;case"cm":return s*g.DPI/2.54;case"in":return s*g.DPI;case"pt":return s*g.DPI/72;case"pc":return s*g.DPI/72*12;case"em":return s*c;default:return s}},falseFunction:function(){return!1},getKlass:function(n,c){return n=g.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),g.util.resolveNamespace(c)[n]},getSvgAttributes:function(n){var c=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"]);break}return c},resolveNamespace:function(n){if(!n)return g;var c=n.split("."),d=c.length,s,p=v||g.window;for(s=0;s<d;++s)p=p[c[s]];return p},loadImage:function(n,c,d,s){if(!n){c&&c.call(d,n);return}var p=g.util.createImage(),y=function(){c&&c.call(d,p,!1),p=p.onload=p.onerror=null};p.onload=y,p.onerror=function(){g.log("Error loading "+p.src),c&&c.call(d,null,!0),p=p.onload=p.onerror=null},n.indexOf("data")!==0&&s!==void 0&&s!==null&&(p.crossOrigin=s),n.substring(0,14)==="data:image/svg"&&(p.onload=null,g.util.loadImageInDom(p,y)),p.src=n},loadImageInDom:function(n,c){var d=g.document.createElement("div");d.style.width=d.style.height="1px",d.style.left=d.style.top="-100%",d.style.position="absolute",d.appendChild(n),g.document.querySelector("body").appendChild(d),n.onload=function(){c(),d.parentNode.removeChild(d),d=null}},enlivenObjects:function(n,c,d,s){n=n||[];var p=[],y=0,I=n.length;function _(){++y===I&&c&&c(p.filter(function(E){return E}))}if(!I){c&&c(p);return}n.forEach(function(E,D){if(!E||!E.type){_();return}var L=g.util.getKlass(E.type,d);L.fromObject(E,function(z,X){X||(p[D]=z),s&&s(E,z,X),_()})})},enlivenPatterns:function(n,c){n=n||[];function d(){++p===y&&c&&c(s)}var s=[],p=0,y=n.length;if(!y){c&&c(s);return}n.forEach(function(I,_){I&&I.source?new g.Pattern(I,function(E){s[_]=E,d()}):(s[_]=I,d())})},groupSVGElements:function(n,c,d){var s;return n&&n.length===1?n[0]:(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),s=new g.Group(n,c),typeof d<"u"&&(s.sourcePath=d),s)},populateWithProperties:function(n,c,d){if(d&&Object.prototype.toString.call(d)==="[object Array]")for(var s=0,p=d.length;s<p;s++)d[s]in n&&(c[d[s]]=n[d[s]])},drawDashedLine:function(n,c,d,s,p,y){var I=s-c,_=p-d,E=a(I*I+_*_),D=h(_,I),L=y.length,z=0,X=!0;for(n.save(),n.translate(c,d),n.moveTo(0,0),n.rotate(D),c=0;E>c;)c+=y[z++%L],c>E&&(c=E),n[X?"lineTo":"moveTo"](c,0),X=!X;n.restore()},createCanvasElement:function(){return g.document.createElement("canvas")},copyCanvasElement:function(n){var c=g.util.createCanvasElement();return c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(n,0,0),c},toDataURL:function(n,c,d){return n.toDataURL("image/"+c,d)},createImage:function(){return g.document.createElement("img")},multiplyTransformMatrices:function(n,c,d){return[n[0]*c[0]+n[2]*c[1],n[1]*c[0]+n[3]*c[1],n[0]*c[2]+n[2]*c[3],n[1]*c[2]+n[3]*c[3],d?0:n[0]*c[4]+n[2]*c[5]+n[4],d?0:n[1]*c[4]+n[3]*c[5]+n[5]]},qrDecompose:function(n){var c=h(n[1],n[0]),d=u(n[0],2)+u(n[1],2),s=a(d),p=(n[0]*n[3]-n[2]*n[1])/s,y=h(n[0]*n[2]+n[1]*n[3],d);return{angle:c/i,scaleX:s,scaleY:p,skewX:y/i,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return g.iMatrix.concat();var c=g.util.degreesToRadians(n.angle),d=g.util.cos(c),s=g.util.sin(c);return[d,s,-s,d,0,0]},calcDimensionsMatrix:function(n){var c=typeof n.scaleX>"u"?1:n.scaleX,d=typeof n.scaleY>"u"?1:n.scaleY,s=[n.flipX?-c:c,0,0,n.flipY?-d:d,0,0],p=g.util.multiplyTransformMatrices,y=g.util.degreesToRadians;return n.skewX&&(s=p(s,[1,0,Math.tan(y(n.skewX)),1],!0)),n.skewY&&(s=p(s,[1,Math.tan(y(n.skewY)),0,1],!0)),s},composeMatrix:function(n){var c=[1,0,0,1,n.translateX||0,n.translateY||0],d=g.util.multiplyTransformMatrices;return n.angle&&(c=d(c,g.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(c=d(c,g.util.calcDimensionsMatrix(n))),c},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,c,d,s){s>0&&(c>s?c-=s:c=0,d>s?d-=s:d=0);var p=!0,y,I,_=n.getImageData(c,d,s*2||1,s*2||1),E=_.data.length;for(y=3;y<E&&(I=_.data[y],p=I<=0,p!==!1);y+=4);return _=null,p},parsePreserveAspectRatioAttribute:function(n){var c="meet",d="Mid",s="Mid",p=n.split(" "),y;return p&&p.length&&(c=p.pop(),c!=="meet"&&c!=="slice"?(y=c,c="meet"):p.length&&(y=p.pop())),d=y!=="none"?y.slice(1,4):"none",s=y!=="none"?y.slice(5,8):"none",{meetOrSlice:c,alignX:d,alignY:s}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?g.charWidthsCache[n]&&delete g.charWidthsCache[n]:g.charWidthsCache={}},limitDimsByArea:function(n,c){var d=Math.sqrt(c*n),s=Math.floor(c/d);return{x:Math.floor(d),y:s}},capValue:function(n,c,d){return Math.max(n,Math.min(c,d))},findScaleToFit:function(n,c){return Math.min(c.width/n.width,c.height/n.height)},findScaleToCover:function(n,c){return Math.max(c.width/n.width,c.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(c){return g.util.toFixed(c,g.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,c){var d=g.util.invertTransform(c),s=g.util.multiplyTransformMatrices(d,n.calcOwnMatrix());g.util.applyTransformToObject(n,s)},addTransformToObject:function(n,c){g.util.applyTransformToObject(n,g.util.multiplyTransformMatrices(c,n.calcOwnMatrix()))},applyTransformToObject:function(n,c){var d=g.util.qrDecompose(c),s=new g.Point(d.translateX,d.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",d.scaleX),n.set("scaleY",d.scaleY),n.skewX=d.skewX,n.skewY=d.skewY,n.angle=d.angle,n.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(n,c,d){var s=n/2,p=c/2,y=[{x:-s,y:-p},{x:s,y:-p},{x:-s,y:p},{x:s,y:p}],I=g.util.calcDimensionsMatrix(d),_=g.util.makeBoundingBoxFromPoints(y,I);return{x:_.width,y:_.height}}}}(O),function(){var v=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function u(Z,H,at,N,B,U,G,ht,lt,vt,pt){var mt=g.util.cos(Z),tt=g.util.sin(Z),V=g.util.cos(H),K=g.util.sin(H),it=at*B*V-N*U*K+G,ot=N*B*V+at*U*K+ht,ft=vt+lt*(-at*B*tt-N*U*mt),Tt=pt+lt*(-N*B*tt+at*U*mt),Ft=it+lt*(at*B*K+N*U*V),Rt=ot+lt*(N*B*K-at*U*V);return["C",ft,Tt,Ft,Rt,it,ot]}function i(Z,H,at,N,B,U,G){var ht=Math.PI,lt=G*ht/180,vt=g.util.sin(lt),pt=g.util.cos(lt),mt=0,tt=0;at=Math.abs(at),N=Math.abs(N);var V=-pt*Z*.5-vt*H*.5,K=-pt*H*.5+vt*Z*.5,it=at*at,ot=N*N,ft=K*K,Tt=V*V,Ft=it*ot-it*ft-ot*Tt,Rt=0;if(Ft<0){var dt=Math.sqrt(1-Ft/(it*ot));at*=dt,N*=dt}else Rt=(B===U?-1:1)*Math.sqrt(Ft/(it*ft+ot*Tt));var Bt=Rt*at*K/N,Ut=-Rt*N*V/at,Qt=pt*Bt-vt*Ut+Z*.5,he=vt*Bt+pt*Ut+H*.5,ee=r(1,0,(V-Bt)/at,(K-Ut)/N),re=r((V-Bt)/at,(K-Ut)/N,(-V-Bt)/at,(-K-Ut)/N);U===0&&re>0?re-=2*ht:U===1&&re<0&&(re+=2*ht);for(var Kt=Math.ceil(Math.abs(re/ht*2)),ae=[],ge=re/Kt,Ce=8/3*Math.sin(ge/4)*Math.sin(ge/4)/Math.sin(ge/2),bt=ee+ge,xt=0;xt<Kt;xt++)ae[xt]=u(ee,bt,pt,vt,at,N,Qt,he,Ce,mt,tt),mt=ae[xt][5],tt=ae[xt][6],ee=bt,bt+=ge;return ae}function r(Z,H,at,N){var B=Math.atan2(H,Z),U=Math.atan2(N,at);return U>=B?U-B:2*Math.PI-(B-U)}function n(Z,H,at,N,B,U,G,ht){var lt;if(g.cachesBoundsOfCurve&&(lt=v.call(arguments),g.boundsOfCurveCache[lt]))return g.boundsOfCurveCache[lt];var vt=Math.sqrt,pt=Math.min,mt=Math.max,tt=Math.abs,V=[],K=[[],[]],it,ot,ft,Tt,Ft,Rt,dt,Bt;ot=6*Z-12*at+6*B,it=-3*Z+9*at-9*B+3*G,ft=3*at-3*Z;for(var Ut=0;Ut<2;++Ut){if(Ut>0&&(ot=6*H-12*N+6*U,it=-3*H+9*N-9*U+3*ht,ft=3*N-3*H),tt(it)<1e-12){if(tt(ot)<1e-12)continue;Tt=-ft/ot,0<Tt&&Tt<1&&V.push(Tt);continue}dt=ot*ot-4*ft*it,!(dt<0)&&(Bt=vt(dt),Ft=(-ot+Bt)/(2*it),0<Ft&&Ft<1&&V.push(Ft),Rt=(-ot-Bt)/(2*it),0<Rt&&Rt<1&&V.push(Rt))}for(var Qt,he,ee=V.length,re=ee,Kt;ee--;)Tt=V[ee],Kt=1-Tt,Qt=Kt*Kt*Kt*Z+3*Kt*Kt*Tt*at+3*Kt*Tt*Tt*B+Tt*Tt*Tt*G,K[0][ee]=Qt,he=Kt*Kt*Kt*H+3*Kt*Kt*Tt*N+3*Kt*Tt*Tt*U+Tt*Tt*Tt*ht,K[1][ee]=he;K[0][re]=Z,K[1][re]=H,K[0][re+1]=G,K[1][re+1]=ht;var ae=[{x:pt.apply(null,K[0]),y:pt.apply(null,K[1])},{x:mt.apply(null,K[0]),y:mt.apply(null,K[1])}];return g.cachesBoundsOfCurve&&(g.boundsOfCurveCache[lt]=ae),ae}function c(Z,H,at){for(var N=at[1],B=at[2],U=at[3],G=at[4],ht=at[5],lt=at[6],vt=at[7],pt=i(lt-Z,vt-H,N,B,G,ht,U),mt=0,tt=pt.length;mt<tt;mt++)pt[mt][1]+=Z,pt[mt][2]+=H,pt[mt][3]+=Z,pt[mt][4]+=H,pt[mt][5]+=Z,pt[mt][6]+=H;return pt}function d(Z){var H=0,at=0,N=Z.length,B=0,U=0,G,ht,lt,vt=[],pt,mt,tt;for(ht=0;ht<N;++ht){switch(lt=!1,G=Z[ht].slice(0),G[0]){case"l":G[0]="L",G[1]+=H,G[2]+=at;case"L":H=G[1],at=G[2];break;case"h":G[1]+=H;case"H":G[0]="L",G[2]=at,H=G[1];break;case"v":G[1]+=at;case"V":G[0]="L",at=G[1],G[1]=H,G[2]=at;break;case"m":G[0]="M",G[1]+=H,G[2]+=at;case"M":H=G[1],at=G[2],B=G[1],U=G[2];break;case"c":G[0]="C",G[1]+=H,G[2]+=at,G[3]+=H,G[4]+=at,G[5]+=H,G[6]+=at;case"C":mt=G[3],tt=G[4],H=G[5],at=G[6];break;case"s":G[0]="S",G[1]+=H,G[2]+=at,G[3]+=H,G[4]+=at;case"S":pt==="C"?(mt=2*H-mt,tt=2*at-tt):(mt=H,tt=at),H=G[3],at=G[4],G[0]="C",G[5]=G[3],G[6]=G[4],G[3]=G[1],G[4]=G[2],G[1]=mt,G[2]=tt,mt=G[3],tt=G[4];break;case"q":G[0]="Q",G[1]+=H,G[2]+=at,G[3]+=H,G[4]+=at;case"Q":mt=G[1],tt=G[2],H=G[3],at=G[4];break;case"t":G[0]="T",G[1]+=H,G[2]+=at;case"T":pt==="Q"?(mt=2*H-mt,tt=2*at-tt):(mt=H,tt=at),G[0]="Q",H=G[1],at=G[2],G[1]=mt,G[2]=tt,G[3]=H,G[4]=at;break;case"a":G[0]="A",G[6]+=H,G[7]+=at;case"A":lt=!0,vt=vt.concat(c(H,at,G)),H=G[6],at=G[7];break;case"z":case"Z":H=B,at=U;break}lt||vt.push(G),pt=G[0]}return vt}function s(Z,H,at,N){return Math.sqrt((at-Z)*(at-Z)+(N-H)*(N-H))}function p(Z){return Z*Z*Z}function y(Z){return 3*Z*Z*(1-Z)}function I(Z){return 3*Z*(1-Z)*(1-Z)}function _(Z){return(1-Z)*(1-Z)*(1-Z)}function E(Z,H,at,N,B,U,G,ht){return function(lt){var vt=p(lt),pt=y(lt),mt=I(lt),tt=_(lt);return{x:G*vt+B*pt+at*mt+Z*tt,y:ht*vt+U*pt+N*mt+H*tt}}}function D(Z,H,at,N,B,U,G,ht){return function(lt){var vt=1-lt,pt=3*vt*vt*(at-Z)+6*vt*lt*(B-at)+3*lt*lt*(G-B),mt=3*vt*vt*(N-H)+6*vt*lt*(U-N)+3*lt*lt*(ht-U);return Math.atan2(mt,pt)}}function L(Z){return Z*Z}function z(Z){return 2*Z*(1-Z)}function X(Z){return(1-Z)*(1-Z)}function ut(Z,H,at,N,B,U){return function(G){var ht=L(G),lt=z(G),vt=X(G);return{x:B*ht+at*lt+Z*vt,y:U*ht+N*lt+H*vt}}}function rt(Z,H,at,N,B,U){return function(G){var ht=1-G,lt=2*ht*(at-Z)+2*G*(B-at),vt=2*ht*(N-H)+2*G*(U-N);return Math.atan2(vt,lt)}}function Et(Z,H,at){var N={x:H,y:at},B,U=0,G;for(G=1;G<=100;G+=1)B=Z(G/100),U+=s(N.x,N.y,B.x,B.y),N=B;return U}function Q(Z,H){for(var at=0,N=0,B=Z.iterator,U={x:Z.x,y:Z.y},G,ht,lt=.01,vt=Z.angleFinder,pt;N<H&&at<=1&&lt>1e-4;)G=B(at),pt=at,ht=s(U.x,U.y,G.x,G.y),ht+N>H?(lt/=2,at-=lt):(U=G,at+=lt,N+=ht);return G.angle=vt(pt),G}function St(Z){for(var H=0,at=Z.length,N,B=0,U=0,G=0,ht=0,lt=[],vt,pt,mt,tt=0;tt<at;tt++){switch(N=Z[tt],pt={x:B,y:U,command:N[0]},N[0]){case"M":pt.length=0,G=B=N[1],ht=U=N[2];break;case"L":pt.length=s(B,U,N[1],N[2]),B=N[1],U=N[2];break;case"C":vt=E(B,U,N[1],N[2],N[3],N[4],N[5],N[6]),mt=D(B,U,N[1],N[2],N[3],N[4],N[5],N[6]),pt.iterator=vt,pt.angleFinder=mt,pt.length=Et(vt,B,U),B=N[5],U=N[6];break;case"Q":vt=ut(B,U,N[1],N[2],N[3],N[4]),mt=rt(B,U,N[1],N[2],N[3],N[4]),pt.iterator=vt,pt.angleFinder=mt,pt.length=Et(vt,B,U),B=N[3],U=N[4];break;case"Z":case"z":pt.destX=G,pt.destY=ht,pt.length=s(B,U,G,ht),B=G,U=ht;break}H+=pt.length,lt.push(pt)}return lt.push({length:H,x:B,y:U}),lt}function j(Z,H,at){at||(at=St(Z));for(var N=0;H-at[N].length>0&&N<at.length-2;)H-=at[N].length,N++;var B=at[N],U=H/B.length,G=B.command,ht=Z[N],lt;switch(G){case"M":return{x:B.x,y:B.y,angle:0};case"Z":case"z":return lt=new g.Point(B.x,B.y).lerp(new g.Point(B.destX,B.destY),U),lt.angle=Math.atan2(B.destY-B.y,B.destX-B.x),lt;case"L":return lt=new g.Point(B.x,B.y).lerp(new g.Point(ht[1],ht[2]),U),lt.angle=Math.atan2(ht[2]-B.y,ht[1]-B.x),lt;case"C":return Q(B,H);case"Q":return Q(B,H)}}function jt(Z){var H=[],at=[],N,B,U=g.rePathCommand,G="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ht="("+G+")"+g.commaWsp,lt="([01])"+g.commaWsp+"?",vt=ht+"?"+ht+"?"+ht+lt+lt+ht+"?("+G+")",pt=new RegExp(vt,"g"),mt,tt,V;if(!Z||!Z.match)return H;V=Z.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var K=0,it,ot=V.length;K<ot;K++){N=V[K],tt=N.slice(1).trim(),at.length=0;var ft=N.charAt(0);if(it=[ft],ft.toLowerCase()==="a")for(var Tt;Tt=pt.exec(tt);)for(var Ft=1;Ft<Tt.length;Ft++)at.push(Tt[Ft]);else for(;mt=U.exec(tt);)at.push(mt[0]);for(var Ft=0,Rt=at.length;Ft<Rt;Ft++)B=parseFloat(at[Ft]),isNaN(B)||it.push(B);var dt=a[ft.toLowerCase()],Bt=h[ft]||ft;if(it.length-1>dt)for(var Ut=1,Qt=it.length;Ut<Qt;Ut+=dt)H.push([ft].concat(it.slice(Ut,Ut+dt))),ft=Bt;else H.push(it)}return H}function gt(Z,H){var at=[],N,B=new g.Point(Z[0].x,Z[0].y),U=new g.Point(Z[1].x,Z[1].y),G=Z.length,ht=1,lt=0,vt=G>2;for(H=H||0,vt&&(ht=Z[2].x<U.x?-1:Z[2].x===U.x?0:1,lt=Z[2].y<U.y?-1:Z[2].y===U.y?0:1),at.push(["M",B.x-ht*H,B.y-lt*H]),N=1;N<G;N++){if(!B.eq(U)){var pt=B.midPointFrom(U);at.push(["Q",B.x,B.y,pt.x,pt.y])}B=Z[N],N+1<Z.length&&(U=Z[N+1])}return vt&&(ht=B.x>Z[N-2].x?1:B.x===Z[N-2].x?0:-1,lt=B.y>Z[N-2].y?1:B.y===Z[N-2].y?0:-1),at.push(["L",B.x+ht*H,B.y+lt*H]),at}function Nt(Z,H,at){return at&&(H=g.util.multiplyTransformMatrices(H,[1,0,0,1,-at.x,-at.y])),Z.map(function(N){for(var B=N.slice(0),U={},G=1;G<N.length-1;G+=2)U.x=N[G],U.y=N[G+1],U=g.util.transformPoint(U,H),B[G]=U.x,B[G+1]=U.y;return B})}function J(Z,H,at,N,B,U,G,ht,lt){for(var vt=0,pt=0,mt,tt=[],V=i(ht-Z,lt-H,at,N,U,G,B),K=0,it=V.length;K<it;K++)mt=n(vt,pt,V[K][1],V[K][2],V[K][3],V[K][4],V[K][5],V[K][6]),tt.push({x:mt[0].x+Z,y:mt[0].y+H}),tt.push({x:mt[1].x+Z,y:mt[1].y+H}),vt=V[K][5],pt=V[K][6];return tt}function et(Z,H,at,N){N=N.slice(0).unshift("X");var B=c(H,at,N);B.forEach(function(U){Z.bezierCurveTo.apply(Z,U.slice(1))})}g.util.joinPath=function(Z){return Z.map(function(H){return H.join(" ")}).join(" ")},g.util.parsePath=jt,g.util.makePathSimpler=d,g.util.getSmoothPathFromPoints=gt,g.util.getPathSegmentsInfo=St,g.util.getBoundsOfCurve=n,g.util.getPointOnPath=j,g.util.transformPath=Nt,g.util.fromArcToBeizers=c,g.util.getBoundsOfArc=J,g.util.drawArc=et}(),function(){var v=Array.prototype.slice;function a(n,c){for(var d=v.call(arguments,2),s=[],p=0,y=n.length;p<y;p++)s[p]=d.length?n[p][c].apply(n[p],d):n[p][c].call(n[p]);return s}function h(n,c){return r(n,c,function(d,s){return d>=s})}function u(n,c){return r(n,c,function(d,s){return d<s})}function i(n,c){for(var d=n.length;d--;)n[d]=c;return n}function r(n,c,d){if(!(!n||n.length===0)){var s=n.length-1,p=c?n[s][c]:n[s];if(c)for(;s--;)d(n[s][c],p)&&(p=n[s][c]);else for(;s--;)d(n[s],p)&&(p=n[s]);return p}}g.util.array={fill:i,invoke:a,min:u,max:h}}(),function(){function v(h,u,i){if(i)if(!g.isLikelyNode&&u instanceof Element)h=u;else if(u instanceof Array){h=[];for(var r=0,n=u.length;r<n;r++)h[r]=v({},u[r],i)}else if(u&&typeof u=="object")for(var c in u)c==="canvas"||c==="group"?h[c]=null:u.hasOwnProperty(c)&&(h[c]=v({},u[c],i));else h=u;else for(var c in u)h[c]=u[c];return h}function a(h,u){return v({},h,u)}g.util.object={extend:v,clone:a},g.util.object.extend(g.util,g.Observable)}(),function(){function v(r){return r.replace(/-+(.)?/g,function(n,c){return c?c.toUpperCase():""})}function a(r,n){return r.charAt(0).toUpperCase()+(n?r.slice(1):r.slice(1).toLowerCase())}function h(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(r){var n=0,c,d=[];for(n=0,c;n<r.length;n++)(c=i(r,n))!==!1&&d.push(c);return d}function i(r,n){var c=r.charCodeAt(n);if(isNaN(c))return"";if(c<55296||c>57343)return r.charAt(n);if(55296<=c&&c<=56319){if(r.length<=n+1)throw"High surrogate without following low surrogate";var d=r.charCodeAt(n+1);if(56320>d||d>57343)throw"High surrogate without following low surrogate";return r.charAt(n)+r.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var s=r.charCodeAt(n-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}g.util.string={camelize:v,capitalize:a,escapeXml:h,graphemeSplit:u}}(),function(){var v=Array.prototype.slice,a=function(){},h=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),u=function(c,d,s){for(var p in d)p in c.prototype&&typeof c.prototype[p]=="function"&&(d[p]+"").indexOf("callSuper")>-1?c.prototype[p]=function(y){return function(){var I=this.constructor.superclass;this.constructor.superclass=s;var _=d[y].apply(this,arguments);if(this.constructor.superclass=I,y!=="initialize")return _}}(p):c.prototype[p]=d[p],h&&(d.toString!==Object.prototype.toString&&(c.prototype.toString=d.toString),d.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=d.valueOf))};function i(){}function r(c){for(var d=null,s=this;s.constructor.superclass;){var p=s.constructor.superclass.prototype[c];if(s[c]!==p){d=p;break}s=s.constructor.superclass.prototype}return d?arguments.length>1?d.apply(this,v.call(arguments,1)):d.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}function n(){var c=null,d=v.call(arguments,0);typeof d[0]=="function"&&(c=d.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=c,s.subclasses=[],c&&(i.prototype=c.prototype,s.prototype=new i,c.subclasses.push(s));for(var p=0,y=d.length;p<y;p++)u(s,d[p],c);return s.prototype.initialize||(s.prototype.initialize=a),s.prototype.constructor=s,s.prototype.callSuper=r,s}g.util.createClass=n}(),function(){var v=!!g.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];g.util.addListener=function(u,i,r,n){u&&u.addEventListener(i,r,v?!1:n)},g.util.removeListener=function(u,i,r,n){u&&u.removeEventListener(i,r,v?!1:n)};function h(u){var i=u.changedTouches;return i&&i[0]?i[0]:u}g.util.getPointer=function(u){var i=u.target,r=g.util.getScrollLeftTop(i),n=h(u);return{x:n.clientX+r.left,y:n.clientY+r.top}},g.util.isTouchEvent=function(u){return a.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function v(n,c){var d=n.style;if(!d)return n;if(typeof c=="string")return n.style.cssText+=";"+c,c.indexOf("opacity")>-1?r(n,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var s in c)if(s==="opacity")r(n,c[s]);else{var p=s==="float"||s==="cssFloat"?typeof d.styleFloat>"u"?"cssFloat":"styleFloat":s;d[p]=c[s]}return n}var a=g.document.createElement("div"),h=typeof a.style.opacity=="string",u=typeof a.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,r=function(n){return n};h?r=function(n,c){return n.style.opacity=c,n}:u&&(r=function(n,c){var d=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(d.zoom=1),i.test(d.filter)?(c=c>=.9999?"":"alpha(opacity="+c*100+")",d.filter=d.filter.replace(i,c)):d.filter+=" alpha(opacity="+c*100+")",n}),g.util.setStyle=v}(),function(){var v=Array.prototype.slice;function a(_){return typeof _=="string"?g.document.getElementById(_):_}var h,u=function(_){return v.call(_,0)};try{h=u(g.document.childNodes)instanceof Array}catch{}h||(u=function(_){for(var E=new Array(_.length),D=_.length;D--;)E[D]=_[D];return E});function i(_,E){var D=g.document.createElement(_);for(var L in E)L==="class"?D.className=E[L]:L==="for"?D.htmlFor=E[L]:D.setAttribute(L,E[L]);return D}function r(_,E){_&&(" "+_.className+" ").indexOf(" "+E+" ")===-1&&(_.className+=(_.className?" ":"")+E)}function n(_,E,D){return typeof E=="string"&&(E=i(E,D)),_.parentNode&&_.parentNode.replaceChild(E,_),E.appendChild(_),E}function c(_){for(var E=0,D=0,L=g.document.documentElement,z=g.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===g.document?(E=z.scrollLeft||L.scrollLeft||0,D=z.scrollTop||L.scrollTop||0):(E+=_.scrollLeft||0,D+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:E,top:D}}function d(_){var E,D=_&&_.ownerDocument,L={left:0,top:0},z={left:0,top:0},X,ut={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!D)return z;for(var rt in ut)z[ut[rt]]+=parseInt(s(_,rt),10)||0;return E=D.documentElement,typeof _.getBoundingClientRect<"u"&&(L=_.getBoundingClientRect()),X=c(_),{left:L.left+X.left-(E.clientLeft||0)+z.left,top:L.top+X.top-(E.clientTop||0)+z.top}}var s;g.document.defaultView&&g.document.defaultView.getComputedStyle?s=function(_,E){var D=g.document.defaultView.getComputedStyle(_,null);return D?D[E]:void 0}:s=function(_,E){var D=_.style[E];return!D&&_.currentStyle&&(D=_.currentStyle[E]),D},function(){var _=g.document.documentElement.style,E="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function D(z){return typeof z.onselectstart<"u"&&(z.onselectstart=g.util.falseFunction),E?z.style[E]="none":typeof z.unselectable=="string"&&(z.unselectable="on"),z}function L(z){return typeof z.onselectstart<"u"&&(z.onselectstart=null),E?z.style[E]="":typeof z.unselectable=="string"&&(z.unselectable=""),z}g.util.makeElementUnselectable=D,g.util.makeElementSelectable=L}();function p(_){var E=g.jsdomImplForWrapper(_);return E._canvas||E._image}function y(_){if(!!g.isLikelyNode){var E=g.jsdomImplForWrapper(_);E&&(E._image=null,E._canvas=null,E._currentSrc=null,E._attributes=null,E._classList=null)}}function I(_,E){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=E}g.util.setImageSmoothing=I,g.util.getById=a,g.util.toArray=u,g.util.addClass=r,g.util.makeElement=i,g.util.wrapElement=n,g.util.getScrollLeftTop=c,g.util.getElementOffset=d,g.util.getNodeCanvas=p,g.util.cleanUpJsdomNode=y}(),function(){function v(u,i){return u+(/\?/.test(u)?"&":"?")+i}function a(){}function h(u,i){i||(i={});var r=i.method?i.method.toUpperCase():"GET",n=i.onComplete||function(){},c=new g.window.XMLHttpRequest,d=i.body||i.parameters;return c.onreadystatechange=function(){c.readyState===4&&(n(c),c.onreadystatechange=a)},r==="GET"&&(d=null,typeof i.parameters=="string"&&(u=v(u,i.parameters))),c.open(r,u,!0),(r==="POST"||r==="PUT")&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(d),c}g.util.request=h}(),g.log=console.log,g.warn=console.warn,function(){function v(){return!1}function a(c,d,s,p){return-s*Math.cos(c/p*(Math.PI/2))+s+d}function h(c){var d=!1;return r(function(s){c||(c={});var p=s||+new Date,y=c.duration||500,I=p+y,_,E=c.onChange||v,D=c.abort||v,L=c.onComplete||v,z=c.easing||a,X="startValue"in c?c.startValue:0,ut="endValue"in c?c.endValue:100,rt=c.byValue||ut-X;c.onStart&&c.onStart(),function Et(Q){_=Q||+new Date;var St=_>I?y:_-p,j=St/y,jt=z(St,X,rt,y),gt=Math.abs((jt-X)/rt);if(!d){if(D(jt,gt,j)){L(ut,1,1);return}if(_>I){E(ut,1,1),L(ut,1,1);return}else E(jt,gt,j),r(Et)}}(p)}),function(){d=!0}}var u=g.window.requestAnimationFrame||g.window.webkitRequestAnimationFrame||g.window.mozRequestAnimationFrame||g.window.oRequestAnimationFrame||g.window.msRequestAnimationFrame||function(c){return g.window.setTimeout(c,1e3/60)},i=g.window.cancelAnimationFrame||g.window.clearTimeout;function r(){return u.apply(g.window,arguments)}function n(){return i.apply(g.window,arguments)}g.util.animate=h,g.util.requestAnimFrame=r,g.util.cancelAnimFrame=n}(),function(){function v(h,u,i){var r="rgba("+parseInt(h[0]+i*(u[0]-h[0]),10)+","+parseInt(h[1]+i*(u[1]-h[1]),10)+","+parseInt(h[2]+i*(u[2]-h[2]),10);return r+=","+(h&&u?parseFloat(h[3]+i*(u[3]-h[3])):1),r+=")",r}function a(h,u,i,r){var n=new g.Color(h).getSource(),c=new g.Color(u).getSource(),d=r.onComplete,s=r.onChange;return r=r||{},g.util.animate(g.util.object.extend(r,{duration:i||500,startValue:n,endValue:c,byValue:c,easing:function(p,y,I,_){var E=r.colorEasing?r.colorEasing(p,_):1-Math.cos(p/_*(Math.PI/2));return v(y,I,E)},onComplete:function(p,y,I){if(d)return d(v(c,c,0),y,I)},onChange:function(p,y,I){if(s){if(Array.isArray(p))return s(v(p,p,0),y,I);s(p,y,I)}}}))}g.util.animateColor=a}(),function(){function v(J,et,Z,H){return J<Math.abs(et)?(J=et,H=Z/4):et===0&&J===0?H=Z/(2*Math.PI)*Math.asin(1):H=Z/(2*Math.PI)*Math.asin(et/J),{a:J,c:et,p:Z,s:H}}function a(J,et,Z){return J.a*Math.pow(2,10*(et-=1))*Math.sin((et*Z-J.s)*(2*Math.PI)/J.p)}function h(J,et,Z,H){return Z*((J=J/H-1)*J*J+1)+et}function u(J,et,Z,H){return J/=H/2,J<1?Z/2*J*J*J+et:Z/2*((J-=2)*J*J+2)+et}function i(J,et,Z,H){return Z*(J/=H)*J*J*J+et}function r(J,et,Z,H){return-Z*((J=J/H-1)*J*J*J-1)+et}function n(J,et,Z,H){return J/=H/2,J<1?Z/2*J*J*J*J+et:-Z/2*((J-=2)*J*J*J-2)+et}function c(J,et,Z,H){return Z*(J/=H)*J*J*J*J+et}function d(J,et,Z,H){return Z*((J=J/H-1)*J*J*J*J+1)+et}function s(J,et,Z,H){return J/=H/2,J<1?Z/2*J*J*J*J*J+et:Z/2*((J-=2)*J*J*J*J+2)+et}function p(J,et,Z,H){return-Z*Math.cos(J/H*(Math.PI/2))+Z+et}function y(J,et,Z,H){return Z*Math.sin(J/H*(Math.PI/2))+et}function I(J,et,Z,H){return-Z/2*(Math.cos(Math.PI*J/H)-1)+et}function _(J,et,Z,H){return J===0?et:Z*Math.pow(2,10*(J/H-1))+et}function E(J,et,Z,H){return J===H?et+Z:Z*(-Math.pow(2,-10*J/H)+1)+et}function D(J,et,Z,H){return J===0?et:J===H?et+Z:(J/=H/2,J<1?Z/2*Math.pow(2,10*(J-1))+et:Z/2*(-Math.pow(2,-10*--J)+2)+et)}function L(J,et,Z,H){return-Z*(Math.sqrt(1-(J/=H)*J)-1)+et}function z(J,et,Z,H){return Z*Math.sqrt(1-(J=J/H-1)*J)+et}function X(J,et,Z,H){return J/=H/2,J<1?-Z/2*(Math.sqrt(1-J*J)-1)+et:Z/2*(Math.sqrt(1-(J-=2)*J)+1)+et}function ut(J,et,Z,H){var at=1.70158,N=0,B=Z;if(J===0)return et;if(J/=H,J===1)return et+Z;N||(N=H*.3);var U=v(B,Z,N,at);return-a(U,J,H)+et}function rt(J,et,Z,H){var at=1.70158,N=0,B=Z;if(J===0)return et;if(J/=H,J===1)return et+Z;N||(N=H*.3);var U=v(B,Z,N,at);return U.a*Math.pow(2,-10*J)*Math.sin((J*H-U.s)*(2*Math.PI)/U.p)+U.c+et}function Et(J,et,Z,H){var at=1.70158,N=0,B=Z;if(J===0)return et;if(J/=H/2,J===2)return et+Z;N||(N=H*.44999999999999996);var U=v(B,Z,N,at);return J<1?-.5*a(U,J,H)+et:U.a*Math.pow(2,-10*(J-=1))*Math.sin((J*H-U.s)*(2*Math.PI)/U.p)*.5+U.c+et}function Q(J,et,Z,H,at){return at===void 0&&(at=1.70158),Z*(J/=H)*J*((at+1)*J-at)+et}function St(J,et,Z,H,at){return at===void 0&&(at=1.70158),Z*((J=J/H-1)*J*((at+1)*J+at)+1)+et}function j(J,et,Z,H,at){return at===void 0&&(at=1.70158),J/=H/2,J<1?Z/2*(J*J*(((at*=1.525)+1)*J-at))+et:Z/2*((J-=2)*J*(((at*=1.525)+1)*J+at)+2)+et}function jt(J,et,Z,H){return Z-gt(H-J,0,Z,H)+et}function gt(J,et,Z,H){return(J/=H)<.36363636363636365?Z*(7.5625*J*J)+et:J<.7272727272727273?Z*(7.5625*(J-=.5454545454545454)*J+.75)+et:J<.9090909090909091?Z*(7.5625*(J-=.8181818181818182)*J+.9375)+et:Z*(7.5625*(J-=.9545454545454546)*J+.984375)+et}function Nt(J,et,Z,H){return J<H/2?jt(J*2,0,Z,H)*.5+et:gt(J*2-H,0,Z,H)*.5+Z*.5+et}g.util.ease={easeInQuad:function(J,et,Z,H){return Z*(J/=H)*J+et},easeOutQuad:function(J,et,Z,H){return-Z*(J/=H)*(J-2)+et},easeInOutQuad:function(J,et,Z,H){return J/=H/2,J<1?Z/2*J*J+et:-Z/2*(--J*(J-2)-1)+et},easeInCubic:function(J,et,Z,H){return Z*(J/=H)*J*J+et},easeOutCubic:h,easeInOutCubic:u,easeInQuart:i,easeOutQuart:r,easeInOutQuart:n,easeInQuint:c,easeOutQuint:d,easeInOutQuint:s,easeInSine:p,easeOutSine:y,easeInOutSine:I,easeInExpo:_,easeOutExpo:E,easeInOutExpo:D,easeInCirc:L,easeOutCirc:z,easeInOutCirc:X,easeInElastic:ut,easeOutElastic:rt,easeInOutElastic:Et,easeInBack:Q,easeOutBack:St,easeInOutBack:j,easeInBounce:jt,easeOutBounce:gt,easeInOutBounce:Nt}}(),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.util.object.clone,i=a.util.toFixed,r=a.util.parseUnit,n=a.util.multiplyTransformMatrices,c=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],d=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},I={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",E="clip-path";a.svgValidTagNamesRegEx=z(c),a.svgViewBoxElementsRegEx=z(d),a.svgInvalidAncestorsRegEx=z(s),a.svgValidParentsRegEx=z(p),a.cssRules={},a.gradientDefs={},a.clipPaths={};function D(N){return N in y?y[N]:N}function L(N,B,U,G){var ht=Object.prototype.toString.call(B)==="[object Array]",lt;if((N==="fill"||N==="stroke")&&B==="none")B="";else{if(N==="strokeUniform")return B==="non-scaling-stroke";if(N==="strokeDashArray")B==="none"?B=null:B=B.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(N==="transformMatrix")U&&U.transformMatrix?B=n(U.transformMatrix,a.parseTransformAttribute(B)):B=a.parseTransformAttribute(B);else if(N==="visible")B=B!=="none"&&B!=="hidden",U&&U.visible===!1&&(B=!1);else if(N==="opacity")B=parseFloat(B),U&&typeof U.opacity<"u"&&(B*=U.opacity);else if(N==="textAnchor")B=B==="start"?"left":B==="end"?"right":"center";else if(N==="charSpacing")lt=r(B,G)/G*1e3;else if(N==="paintFirst"){var vt=B.indexOf("fill"),pt=B.indexOf("stroke"),B="fill";(vt>-1&&pt>-1&&pt<vt||vt===-1&&pt>-1)&&(B="stroke")}else{if(N==="href"||N==="xlink:href"||N==="font")return B;if(N==="imageSmoothing")return B==="optimizeQuality";lt=ht?B.map(r):r(B,G)}}return!ht&&isNaN(lt)?B:lt}function z(N){return new RegExp("^("+N.join("|")+")\\b","i")}function X(N){for(var B in I)if(!(typeof N[I[B]]>"u"||N[B]==="")){if(typeof N[B]>"u"){if(!a.Object.prototype[B])continue;N[B]=a.Object.prototype[B]}if(N[B].indexOf("url(")!==0){var U=new a.Color(N[B]);N[B]=U.setAlpha(i(U.getAlpha()*N[I[B]],2)).toRgba()}}return N}function ut(N,B){var U,G=[],ht,lt,vt;for(lt=0,vt=B.length;lt<vt;lt++)U=B[lt],ht=N.getElementsByTagName(U),G=G.concat(Array.prototype.slice.call(ht));return G}a.parseTransformAttribute=function(){function N(dt,Bt){var Ut=a.util.cos(Bt[0]),Qt=a.util.sin(Bt[0]),he=0,ee=0;Bt.length===3&&(he=Bt[1],ee=Bt[2]),dt[0]=Ut,dt[1]=Qt,dt[2]=-Qt,dt[3]=Ut,dt[4]=he-(Ut*he-Qt*ee),dt[5]=ee-(Qt*he+Ut*ee)}function B(dt,Bt){var Ut=Bt[0],Qt=Bt.length===2?Bt[1]:Bt[0];dt[0]=Ut,dt[3]=Qt}function U(dt,Bt,Ut){dt[Ut]=Math.tan(a.util.degreesToRadians(Bt[0]))}function G(dt,Bt){dt[4]=Bt[0],Bt.length===2&&(dt[5]=Bt[1])}var ht=a.iMatrix,lt=a.reNum,vt=a.commaWsp,pt="(?:(skewX)\\s*\\(\\s*("+lt+")\\s*\\))",mt="(?:(skewY)\\s*\\(\\s*("+lt+")\\s*\\))",tt="(?:(rotate)\\s*\\(\\s*("+lt+")(?:"+vt+"("+lt+")"+vt+"("+lt+"))?\\s*\\))",V="(?:(scale)\\s*\\(\\s*("+lt+")(?:"+vt+"("+lt+"))?\\s*\\))",K="(?:(translate)\\s*\\(\\s*("+lt+")(?:"+vt+"("+lt+"))?\\s*\\))",it="(?:(matrix)\\s*\\(\\s*("+lt+")"+vt+"("+lt+")"+vt+"("+lt+")"+vt+"("+lt+")"+vt+"("+lt+")"+vt+"("+lt+")\\s*\\))",ot="(?:"+it+"|"+K+"|"+V+"|"+tt+"|"+pt+"|"+mt+")",ft="(?:"+ot+"(?:"+vt+"*"+ot+")*)",Tt="^\\s*(?:"+ft+"?)\\s*$",Ft=new RegExp(Tt),Rt=new RegExp(ot,"g");return function(dt){var Bt=ht.concat(),Ut=[];if(!dt||dt&&!Ft.test(dt))return Bt;dt.replace(Rt,function(he){var ee=new RegExp(ot).exec(he).filter(function(ae){return!!ae}),re=ee[1],Kt=ee.slice(2).map(parseFloat);switch(re){case"translate":G(Bt,Kt);break;case"rotate":Kt[0]=a.util.degreesToRadians(Kt[0]),N(Bt,Kt);break;case"scale":B(Bt,Kt);break;case"skewX":U(Bt,Kt,2);break;case"skewY":U(Bt,Kt,1);break;case"matrix":Bt=Kt;break}Ut.push(Bt.concat()),Bt=ht.concat()});for(var Qt=Ut[0];Ut.length>1;)Ut.shift(),Qt=a.util.multiplyTransformMatrices(Qt,Ut[0]);return Qt}}();function rt(N,B){var U,G;N.replace(/;\s*$/,"").split(";").forEach(function(ht){var lt=ht.split(":");U=lt[0].trim().toLowerCase(),G=lt[1].trim(),B[U]=G})}function Et(N,B){var U,G;for(var ht in N)typeof N[ht]>"u"||(U=ht.toLowerCase(),G=N[ht],B[U]=G)}function Q(N,B){var U={};for(var G in a.cssRules[B])if(St(N,G.split(" ")))for(var ht in a.cssRules[B][G])U[ht]=a.cssRules[B][G][ht];return U}function St(N,B){var U,G=!0;return U=jt(N,B.pop()),U&&B.length&&(G=j(N,B)),U&&G&&B.length===0}function j(N,B){for(var U,G=!0;N.parentNode&&N.parentNode.nodeType===1&&B.length;)G&&(U=B.pop()),N=N.parentNode,G=jt(N,U);return B.length===0}function jt(N,B){var U=N.nodeName,G=N.getAttribute("class"),ht=N.getAttribute("id"),lt,vt;if(lt=new RegExp("^"+U,"i"),B=B.replace(lt,""),ht&&B.length&&(lt=new RegExp("#"+ht+"(?![a-zA-Z\\-]+)","i"),B=B.replace(lt,"")),G&&B.length)for(G=G.split(" "),vt=G.length;vt--;)lt=new RegExp("\\."+G[vt]+"(?![a-zA-Z\\-]+)","i"),B=B.replace(lt,"");return B.length===0}function gt(N,B){var U;if(N.getElementById&&(U=N.getElementById(B)),U)return U;var G,ht,lt,vt=N.getElementsByTagName("*");for(ht=0,lt=vt.length;ht<lt;ht++)if(G=vt[ht],B===G.getAttribute("id"))return G}function Nt(N){for(var B=ut(N,["use","svg:use"]),U=0;B.length&&U<B.length;){var G=B[U],ht=G.getAttribute("xlink:href")||G.getAttribute("href");if(ht===null)return;var lt=ht.substr(1),vt=G.getAttribute("x")||0,pt=G.getAttribute("y")||0,mt=gt(N,lt).cloneNode(!0),tt=(mt.getAttribute("transform")||"")+" translate("+vt+", "+pt+")",V,K=B.length,it,ot,ft,Tt,Ft=a.svgNS;if(et(mt),/^svg$/i.test(mt.nodeName)){var Rt=mt.ownerDocument.createElementNS(Ft,"g");for(ot=0,ft=mt.attributes,Tt=ft.length;ot<Tt;ot++)it=ft.item(ot),Rt.setAttributeNS(Ft,it.nodeName,it.nodeValue);for(;mt.firstChild;)Rt.appendChild(mt.firstChild);mt=Rt}for(ot=0,ft=G.attributes,Tt=ft.length;ot<Tt;ot++)it=ft.item(ot),!(it.nodeName==="x"||it.nodeName==="y"||it.nodeName==="xlink:href"||it.nodeName==="href")&&(it.nodeName==="transform"?tt=it.nodeValue+" "+tt:mt.setAttribute(it.nodeName,it.nodeValue));mt.setAttribute("transform",tt),mt.setAttribute("instantiated_by_use","1"),mt.removeAttribute("id"),V=G.parentNode,V.replaceChild(mt,G),B.length===K&&U++}}var J=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function et(N){if(!a.svgViewBoxElementsRegEx.test(N.nodeName))return{};var B=N.getAttribute("viewBox"),U=1,G=1,ht=0,lt=0,vt,pt,mt,tt,V=N.getAttribute("width"),K=N.getAttribute("height"),it=N.getAttribute("x")||0,ot=N.getAttribute("y")||0,ft=N.getAttribute("preserveAspectRatio")||"",Tt=!B||!(B=B.match(J)),Ft=!V||!K||V==="100%"||K==="100%",Rt=Tt&&Ft,dt={},Bt="",Ut=0,Qt=0;if(dt.width=0,dt.height=0,dt.toBeParsed=Rt,Tt&&(it||ot)&&N.parentNode&&N.parentNode.nodeName!=="#document"&&(Bt=" translate("+r(it)+" "+r(ot)+") ",mt=(N.getAttribute("transform")||"")+Bt,N.setAttribute("transform",mt),N.removeAttribute("x"),N.removeAttribute("y")),Rt)return dt;if(Tt)return dt.width=r(V),dt.height=r(K),dt;if(ht=-parseFloat(B[1]),lt=-parseFloat(B[2]),vt=parseFloat(B[3]),pt=parseFloat(B[4]),dt.minX=ht,dt.minY=lt,dt.viewBoxWidth=vt,dt.viewBoxHeight=pt,Ft?(dt.width=vt,dt.height=pt):(dt.width=r(V),dt.height=r(K),U=dt.width/vt,G=dt.height/pt),ft=a.util.parsePreserveAspectRatioAttribute(ft),ft.alignX!=="none"&&(ft.meetOrSlice==="meet"&&(G=U=U>G?G:U),ft.meetOrSlice==="slice"&&(G=U=U>G?U:G),Ut=dt.width-vt*U,Qt=dt.height-pt*U,ft.alignX==="Mid"&&(Ut/=2),ft.alignY==="Mid"&&(Qt/=2),ft.alignX==="Min"&&(Ut=0),ft.alignY==="Min"&&(Qt=0)),U===1&&G===1&&ht===0&&lt===0&&it===0&&ot===0)return dt;if((it||ot)&&N.parentNode.nodeName!=="#document"&&(Bt=" translate("+r(it)+" "+r(ot)+") "),mt=Bt+" matrix("+U+" 0 0 "+G+" "+(ht*U+Ut)+" "+(lt*G+Qt)+") ",N.nodeName==="svg"){for(tt=N.ownerDocument.createElementNS(a.svgNS,"g");N.firstChild;)tt.appendChild(N.firstChild);N.appendChild(tt)}else tt=N,tt.removeAttribute("x"),tt.removeAttribute("y"),mt=tt.getAttribute("transform")+mt;return tt.setAttribute("transform",mt),dt}function Z(N,B){for(;N&&(N=N.parentNode);)if(N.nodeName&&B.test(N.nodeName.replace("svg:",""))&&!N.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(N,B,U,G){if(!!N){Nt(N);var ht=a.Object.__uid++,lt,vt,pt=et(N),mt=a.util.toArray(N.getElementsByTagName("*"));if(pt.crossOrigin=G&&G.crossOrigin,pt.svgUid=ht,mt.length===0&&a.isLikelyNode){mt=N.selectNodes('//*[name(.)!="svg"]');var tt=[];for(lt=0,vt=mt.length;lt<vt;lt++)tt[lt]=mt[lt];mt=tt}var V=mt.filter(function(it){return et(it),a.svgValidTagNamesRegEx.test(it.nodeName.replace("svg:",""))&&!Z(it,a.svgInvalidAncestorsRegEx)});if(!V||V&&!V.length){B&&B([],{});return}var K={};mt.filter(function(it){return it.nodeName.replace("svg:","")==="clipPath"}).forEach(function(it){var ot=it.getAttribute("id");K[ot]=a.util.toArray(it.getElementsByTagName("*")).filter(function(ft){return a.svgValidTagNamesRegEx.test(ft.nodeName.replace("svg:",""))})}),a.gradientDefs[ht]=a.getGradientDefs(N),a.cssRules[ht]=a.getCSSRules(N),a.clipPaths[ht]=K,a.parseElements(V,function(it,ot){B&&(B(it,pt,ot,mt),delete a.gradientDefs[ht],delete a.cssRules[ht],delete a.clipPaths[ht])},u(pt),U,G)}};function H(N,B){var U=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],G="xlink:href",ht=B.getAttribute(G).substr(1),lt=gt(N,ht);if(lt&&lt.getAttribute(G)&&H(N,lt),U.forEach(function(pt){lt&&!B.hasAttribute(pt)&&lt.hasAttribute(pt)&&B.setAttribute(pt,lt.getAttribute(pt))}),!B.children.length)for(var vt=lt.cloneNode(!0);vt.firstChild;)B.appendChild(vt.firstChild);B.removeAttribute(G)}var at=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");h(a,{parseFontDeclaration:function(N,B){var U=N.match(at);if(!!U){var G=U[1],ht=U[3],lt=U[4],vt=U[5],pt=U[6];G&&(B.fontStyle=G),ht&&(B.fontWeight=isNaN(parseFloat(ht))?ht:parseFloat(ht)),lt&&(B.fontSize=r(lt)),pt&&(B.fontFamily=pt),vt&&(B.lineHeight=vt==="normal"?1:vt)}},getGradientDefs:function(N){var B=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],U=ut(N,B),G,ht=0,lt={};for(ht=U.length;ht--;)G=U[ht],G.getAttribute("xlink:href")&&H(N,G),lt[G.getAttribute("id")]=G;return lt},parseAttributes:function(N,B,U){if(!!N){var G,ht={},lt,vt;typeof U>"u"&&(U=N.getAttribute("svgUid")),N.parentNode&&a.svgValidParentsRegEx.test(N.parentNode.nodeName)&&(ht=a.parseAttributes(N.parentNode,B,U));var pt=B.reduce(function(ft,Tt){return G=N.getAttribute(Tt),G&&(ft[Tt]=G),ft},{}),mt=h(Q(N,U),a.parseStyleAttribute(N));pt=h(pt,mt),mt[E]&&N.setAttribute(E,mt[E]),lt=vt=ht.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,pt[_]&&(pt[_]=lt=r(pt[_],vt));var tt,V,K={};for(var it in pt)tt=D(it),V=L(tt,pt[it],ht,lt),K[tt]=V;K&&K.font&&a.parseFontDeclaration(K.font,K);var ot=h(ht,K);return a.svgValidParentsRegEx.test(N.nodeName)?ot:X(ot)}},parseElements:function(N,B,U,G,ht){new a.ElementsParser(N,B,U,G,ht).parse()},parseStyleAttribute:function(N){var B={},U=N.getAttribute("style");return U&&(typeof U=="string"?rt(U,B):Et(U,B)),B},parsePointsAttribute:function(N){if(!N)return null;N=N.replace(/,/g," ").trim(),N=N.split(/\s+/);var B=[],U,G;for(U=0,G=N.length;U<G;U+=2)B.push({x:parseFloat(N[U]),y:parseFloat(N[U+1])});return B},getCSSRules:function(N){var B=N.getElementsByTagName("style"),U,G,ht={},lt;for(U=0,G=B.length;U<G;U++){var vt=B[U].textContent;vt=vt.replace(/\/\*[\s\S]*?\*\//g,""),vt.trim()!==""&&(lt=vt.match(/[^{]*\{[\s\S]*?\}/g),lt=lt.map(function(pt){return pt.trim()}),lt.forEach(function(pt){var mt=pt.match(/([\s\S]*?)\s*\{([^}]*)\}/),tt={},V=mt[2].trim(),K=V.replace(/;$/,"").split(/\s*;\s*/);for(U=0,G=K.length;U<G;U++){var it=K[U].split(/\s*:\s*/),ot=it[0],ft=it[1];tt[ot]=ft}pt=mt[1],pt.split(",").forEach(function(Tt){Tt=Tt.replace(/^svg/i,"").trim(),Tt!==""&&(ht[Tt]?a.util.object.extend(ht[Tt],tt):ht[Tt]=a.util.object.clone(tt))})}))}return ht},loadSVGFromURL:function(N,B,U,G){N=N.replace(/^\n\s*/,"").trim(),new a.util.request(N,{method:"get",onComplete:ht});function ht(lt){var vt=lt.responseXML;if(!vt||!vt.documentElement)return B&&B(null),!1;a.parseSVGDocument(vt.documentElement,function(pt,mt,tt,V){B&&B(pt,mt,tt,V)},U,G)}},loadSVGFromString:function(N,B,U,G){var ht=new a.window.DOMParser,lt=ht.parseFromString(N.trim(),"text/xml");a.parseSVGDocument(lt.documentElement,function(vt,pt,mt,tt){B(vt,pt,mt,tt)},U,G)}})}(O),g.ElementsParser=function(v,a,h,u,i,r){this.elements=v,this.callback=a,this.options=h,this.reviver=u,this.svgUid=h&&h.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},function(v){v.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},v.createObjects=function(){var a=this;this.elements.forEach(function(h,u){h.setAttribute("svgUid",a.svgUid),a.createObject(h,u)})},v.findTag=function(a){return g[g.util.string.capitalize(a.tagName.replace("svg:",""))]},v.createObject=function(a,h){var u=this.findTag(a);if(u&&u.fromElement)try{u.fromElement(a,this.createCallback(h,a),this.options)}catch(i){g.log(i)}else this.checkIfDone()},v.createCallback=function(a,h){var u=this;return function(i){var r;u.resolveGradient(i,h,"fill"),u.resolveGradient(i,h,"stroke"),i instanceof g.Image&&i._originalElement&&(r=i.parsePreserveAspectRatioAttribute(h)),i._removeTransformMatrix(r),u.resolveClipPath(i,h),u.reviver&&u.reviver(h,i),u.instances[a]=i,u.checkIfDone()}},v.extractPropertyDefinition=function(a,h,u){var i=a[h],r=this.regexUrl;if(!!r.test(i)){r.lastIndex=0;var n=r.exec(i)[1];return r.lastIndex=0,g[u][this.svgUid][n]}},v.resolveGradient=function(a,h,u){var i=this.extractPropertyDefinition(a,u,"gradientDefs");if(i){var r=h.getAttribute(u+"-opacity"),n=g.Gradient.fromElement(i,a,r,this.options);a.set(u,n)}},v.createClipPathCallback=function(a,h){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,h.push(u)}},v.resolveClipPath=function(a,h){var u=this.extractPropertyDefinition(a,"clipPath","clipPaths"),i,r,n,c,d,s;if(u){c=[],n=g.util.invertTransform(a.calcTransformMatrix());for(var p=u[0].parentNode,y=h;y.parentNode&&y.getAttribute("clip-path")!==a.clipPath;)y=y.parentNode;y.parentNode.appendChild(p);for(var I=0;I<u.length;I++)i=u[I],r=this.findTag(i),r.fromElement(i,this.createClipPathCallback(a,c),this.options);c.length===1?u=c[0]:u=new g.Group(c),d=g.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,y);var s=g.util.qrDecompose(d);u.flipX=!1,u.flipY=!1,u.set("scaleX",s.scaleX),u.set("scaleY",s.scaleY),u.angle=s.angle,u.skewX=s.skewX,u.skewY=0,u.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),a.clipPath=u}else delete a.clipPath},v.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(g.ElementsParser.prototype),function(v){var a=v.fabric||(v.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=h;function h(u,i){this.x=u,this.y=i}h.prototype={type:"point",constructor:h,add:function(u){return new h(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new h(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new h(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new h(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new h(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new h(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,i){return typeof i>"u"&&(i=.5),i=Math.max(Math.min(1,i),0),new h(this.x+(u.x-this.x)*i,this.y+(u.y-this.y)*i)},distanceFrom:function(u){var i=this.x-u.x,r=this.y-u.y;return Math.sqrt(i*i+r*r)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new h(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new h(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,i){return this.x=u,this.y=i,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var i=this.x,r=this.y;this.x=u.x,this.y=u.y,u.x=i,u.y=r},clone:function(){return new h(this.x,this.y)}}}(O),function(v){var a=v.fabric||(v.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function h(u){this.status=u,this.points=[]}a.Intersection=h,a.Intersection.prototype={constructor:h,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},a.Intersection.intersectLineLine=function(u,i,r,n){var c,d=(n.x-r.x)*(u.y-r.y)-(n.y-r.y)*(u.x-r.x),s=(i.x-u.x)*(u.y-r.y)-(i.y-u.y)*(u.x-r.x),p=(n.y-r.y)*(i.x-u.x)-(n.x-r.x)*(i.y-u.y);if(p!==0){var y=d/p,I=s/p;0<=y&&y<=1&&0<=I&&I<=1?(c=new h("Intersection"),c.appendPoint(new a.Point(u.x+y*(i.x-u.x),u.y+y*(i.y-u.y)))):c=new h}else d===0||s===0?c=new h("Coincident"):c=new h("Parallel");return c},a.Intersection.intersectLinePolygon=function(u,i,r){var n=new h,c=r.length,d,s,p,y;for(y=0;y<c;y++)d=r[y],s=r[(y+1)%c],p=h.intersectLineLine(u,i,d,s),n.appendPoints(p.points);return n.points.length>0&&(n.status="Intersection"),n},a.Intersection.intersectPolygonPolygon=function(u,i){var r=new h,n=u.length,c;for(c=0;c<n;c++){var d=u[c],s=u[(c+1)%n],p=h.intersectLinePolygon(d,s,i);r.appendPoints(p.points)}return r.points.length>0&&(r.status="Intersection"),r},a.Intersection.intersectPolygonRectangle=function(u,i,r){var n=i.min(r),c=i.max(r),d=new a.Point(c.x,n.y),s=new a.Point(n.x,c.y),p=h.intersectLinePolygon(n,d,u),y=h.intersectLinePolygon(d,c,u),I=h.intersectLinePolygon(c,s,u),_=h.intersectLinePolygon(s,n,u),E=new h;return E.appendPoints(p.points),E.appendPoints(y.points),E.appendPoints(I.points),E.appendPoints(_.points),E.points.length>0&&(E.status="Intersection"),E}}(O),function(v){var a=v.fabric||(v.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function h(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}a.Color=h,a.Color.prototype={_tryParsingColor:function(i){var r;i in h.colorNameMap&&(i=h.colorNameMap[i]),i==="transparent"&&(r=[255,255,255,0]),r||(r=h.sourceFromHex(i)),r||(r=h.sourceFromRgb(i)),r||(r=h.sourceFromHsl(i)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(i,r,n){i/=255,r/=255,n/=255;var c,d,s,p=a.util.array.max([i,r,n]),y=a.util.array.min([i,r,n]);if(s=(p+y)/2,p===y)c=d=0;else{var I=p-y;switch(d=s>.5?I/(2-p-y):I/(p+y),p){case i:c=(r-n)/I+(r<n?6:0);break;case r:c=(n-i)/I+2;break;case n:c=(i-r)/I+4;break}c/=6}return[Math.round(c*360),Math.round(d*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),r=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+r[0]+","+r[1]+"%,"+r[2]+"%)"},toHsla:function(){var i=this.getSource(),r=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),r,n,c;return r=i[0].toString(16),r=r.length===1?"0"+r:r,n=i[1].toString(16),n=n.length===1?"0"+n:n,c=i[2].toString(16),c=c.length===1?"0"+c:c,r.toUpperCase()+n.toUpperCase()+c.toUpperCase()},toHexa:function(){var i=this.getSource(),r;return r=Math.round(i[3]*255),r=r.toString(16),r=r.length===1?"0"+r:r,this.toHex()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var r=this.getSource();return r[3]=i,this.setSource(r),this},toGrayscale:function(){var i=this.getSource(),r=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),n=i[3];return this.setSource([r,r,r,n]),this},toBlackWhite:function(i){var r=this.getSource(),n=(r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),c=r[3];return i=i||127,n=Number(n)<Number(i)?0:255,this.setSource([n,n,n,c]),this},overlayWith:function(i){i instanceof h||(i=new h(i));var r=[],n=this.getAlpha(),c=.5,d=this.getSource(),s=i.getSource(),p;for(p=0;p<3;p++)r.push(Math.round(d[p]*(1-c)+s[p]*c));return r[3]=n,this.setSource(r),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(i,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?i+(r-i)*6*n:n<.5?r:n<.6666666666666666?i+(r-i)*(.6666666666666666-n)*6:i}a.Color.fromRgb=function(i){return h.fromSource(h.sourceFromRgb(i))},a.Color.sourceFromRgb=function(i){var r=i.match(h.reRGBa);if(r){var n=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),c=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),d=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(n,10),parseInt(c,10),parseInt(d,10),r[4]?parseFloat(r[4]):1]}},a.Color.fromRgba=h.fromRgb,a.Color.fromHsl=function(i){return h.fromSource(h.sourceFromHsl(i))},a.Color.sourceFromHsl=function(i){var r=i.match(h.reHSLa);if(!!r){var n=(parseFloat(r[1])%360+360)%360/360,c=parseFloat(r[2])/(/%$/.test(r[2])?100:1),d=parseFloat(r[3])/(/%$/.test(r[3])?100:1),s,p,y;if(c===0)s=p=y=d;else{var I=d<=.5?d*(c+1):d+c-d*c,_=d*2-I;s=u(_,I,n+.3333333333333333),p=u(_,I,n),y=u(_,I,n-.3333333333333333)}return[Math.round(s*255),Math.round(p*255),Math.round(y*255),r[4]?parseFloat(r[4]):1]}},a.Color.fromHsla=h.fromHsl,a.Color.fromHex=function(i){return h.fromSource(h.sourceFromHex(i))},a.Color.sourceFromHex=function(i){if(i.match(h.reHex)){var r=i.slice(i.indexOf("#")+1),n=r.length===3||r.length===4,c=r.length===8||r.length===4,d=n?r.charAt(0)+r.charAt(0):r.substring(0,2),s=n?r.charAt(1)+r.charAt(1):r.substring(2,4),p=n?r.charAt(2)+r.charAt(2):r.substring(4,6),y=c?n?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(d,16),parseInt(s,16),parseInt(p,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},a.Color.fromSource=function(i){var r=new h;return r.setSource(i),r}}(O),function(v){var a=v.fabric||(v.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],i={},r="left",n="top",c="right",d="bottom",s="center",p={top:d,bottom:n,left:c,right:r,center:s},y=a.util.radiansToDegrees,I=Math.sign||function(tt){return(tt>0)-(tt<0)||+tt};function _(tt,V){var K=tt.angle+y(Math.atan2(V.y,V.x))+360;return Math.round(K%360/45)}function E(tt,V){var K=V.transform.target,it=K.canvas,ot=a.util.object.clone(V);ot.target=K,it&&it.fire("object:"+tt,ot),K.fire(tt,V)}function D(tt,V){var K=V.canvas,it=K.uniScaleKey,ot=tt[it];return K.uniformScaling&&!ot||!K.uniformScaling&&ot}function L(tt){return tt.originX===s&&tt.originY===s}function z(tt,V,K){var it=tt.lockScalingX,ot=tt.lockScalingY;return!!(it&&ot||!V&&(it||ot)&&K||it&&V==="x"||ot&&V==="y")}function X(tt,V,K){var it="not-allowed",ot=D(tt,K),ft="";if(V.x!==0&&V.y===0?ft="x":V.x===0&&V.y!==0&&(ft="y"),z(K,ft,ot))return it;var Tt=_(K,V);return h[Tt]+"-resize"}function ut(tt,V,K){var it="not-allowed";if(V.x!==0&&K.lockSkewingY||V.y!==0&&K.lockSkewingX)return it;var ot=_(K,V)%4;return u[ot]+"-resize"}function rt(tt,V,K){return tt[K.canvas.altActionKey]?i.skewCursorStyleHandler(tt,V,K):i.scaleCursorStyleHandler(tt,V,K)}function Et(tt,V,K){var it=tt[K.canvas.altActionKey];if(V.x===0)return it?"skewX":"scaleY";if(V.y===0)return it?"skewY":"scaleX"}function Q(tt,V,K){return K.lockRotation?"not-allowed":V.cursorStyle}function St(tt,V,K,it){return{e:tt,transform:V,pointer:{x:K,y:it}}}function j(tt){return function(V,K,it,ot){var ft=K.target,Tt=ft.getCenterPoint(),Ft=ft.translateToOriginPoint(Tt,K.originX,K.originY),Rt=tt(V,K,it,ot);return ft.setPositionByOrigin(Ft,K.originX,K.originY),Rt}}function jt(tt,V){return function(K,it,ot,ft){var Tt=V(K,it,ot,ft);return Tt&&E(tt,St(K,it,ot,ft)),Tt}}function gt(tt,V,K,it,ot){var ft=tt.target,Tt=ft.controls[tt.corner],Ft=ft.canvas.getZoom(),Rt=ft.padding/Ft,dt=ft.toLocalPoint(new a.Point(it,ot),V,K);return dt.x>=Rt&&(dt.x-=Rt),dt.x<=-Rt&&(dt.x+=Rt),dt.y>=Rt&&(dt.y-=Rt),dt.y<=Rt&&(dt.y+=Rt),dt.x-=Tt.offsetX,dt.y-=Tt.offsetY,dt}function Nt(tt){return tt.flipX!==tt.flipY}function J(tt,V,K,it,ot){if(tt[V]!==0){var ft=tt._getTransformedDimensions()[it],Tt=ot/ft*tt[K];tt.set(K,Tt)}}function et(tt,V,K,it){var ot=V.target,ft=ot._getTransformedDimensions(0,ot.skewY),Tt=gt(V,V.originX,V.originY,K,it),Ft=Math.abs(Tt.x*2)-ft.x,Rt=ot.skewX,dt;Ft<2?dt=0:(dt=y(Math.atan2(Ft/ot.scaleX,ft.y/ot.scaleY)),V.originX===r&&V.originY===d&&(dt=-dt),V.originX===c&&V.originY===n&&(dt=-dt),Nt(ot)&&(dt=-dt));var Bt=Rt!==dt;if(Bt){var Ut=ot._getTransformedDimensions().y;ot.set("skewX",dt),J(ot,"skewY","scaleY","y",Ut)}return Bt}function Z(tt,V,K,it){var ot=V.target,ft=ot._getTransformedDimensions(ot.skewX,0),Tt=gt(V,V.originX,V.originY,K,it),Ft=Math.abs(Tt.y*2)-ft.y,Rt=ot.skewY,dt;Ft<2?dt=0:(dt=y(Math.atan2(Ft/ot.scaleY,ft.x/ot.scaleX)),V.originX===r&&V.originY===d&&(dt=-dt),V.originX===c&&V.originY===n&&(dt=-dt),Nt(ot)&&(dt=-dt));var Bt=Rt!==dt;if(Bt){var Ut=ot._getTransformedDimensions().x;ot.set("skewY",dt),J(ot,"skewX","scaleX","x",Ut)}return Bt}function H(tt,V,K,it){var ot=V.target,ft=ot.skewX,Tt,Ft=V.originY;if(ot.lockSkewingX)return!1;if(ft===0){var Rt=gt(V,s,s,K,it);Rt.x>0?Tt=r:Tt=c}else ft>0&&(Tt=Ft===n?r:c),ft<0&&(Tt=Ft===n?c:r),Nt(ot)&&(Tt=Tt===r?c:r);V.originX=Tt;var dt=jt("skewing",j(et));return dt(tt,V,K,it)}function at(tt,V,K,it){var ot=V.target,ft=ot.skewY,Tt,Ft=V.originX;if(ot.lockSkewingY)return!1;if(ft===0){var Rt=gt(V,s,s,K,it);Rt.y>0?Tt=n:Tt=d}else ft>0&&(Tt=Ft===r?n:d),ft<0&&(Tt=Ft===r?d:n),Nt(ot)&&(Tt=Tt===n?d:n);V.originY=Tt;var dt=jt("skewing",j(Z));return dt(tt,V,K,it)}function N(tt,V,K,it){var ot=V,ft=ot.target,Tt=ft.translateToOriginPoint(ft.getCenterPoint(),ot.originX,ot.originY);if(ft.lockRotation)return!1;var Ft=Math.atan2(ot.ey-Tt.y,ot.ex-Tt.x),Rt=Math.atan2(it-Tt.y,K-Tt.x),dt=y(Rt-Ft+ot.theta),Bt=!0;if(ft.snapAngle>0){var Ut=ft.snapAngle,Qt=ft.snapThreshold||Ut,he=Math.ceil(dt/Ut)*Ut,ee=Math.floor(dt/Ut)*Ut;Math.abs(dt-ee)<Qt?dt=ee:Math.abs(dt-he)<Qt&&(dt=he)}return dt<0&&(dt=360+dt),dt%=360,Bt=ft.angle!==dt,ft.angle=dt,Bt}function B(tt,V,K,it,ot){ot=ot||{};var ft=V.target,Tt=ft.lockScalingX,Ft=ft.lockScalingY,Rt=ot.by,dt,Bt,Ut,Qt,he=D(tt,ft),ee=z(ft,Rt,he),re,Kt,ae=V.gestureScale;if(ee)return!1;if(ae)Bt=V.scaleX*ae,Ut=V.scaleY*ae;else{if(dt=gt(V,V.originX,V.originY,K,it),re=Rt!=="y"?I(dt.x):1,Kt=Rt!=="x"?I(dt.y):1,V.signX||(V.signX=re),V.signY||(V.signY=Kt),ft.lockScalingFlip&&(V.signX!==re||V.signY!==Kt))return!1;if(Qt=ft._getTransformedDimensions(),he&&!Rt){var ge=Math.abs(dt.x)+Math.abs(dt.y),Ce=V.original,bt=Math.abs(Qt.x*Ce.scaleX/ft.scaleX)+Math.abs(Qt.y*Ce.scaleY/ft.scaleY),xt=ge/bt;Bt=Ce.scaleX*xt,Ut=Ce.scaleY*xt}else Bt=Math.abs(dt.x*ft.scaleX/Qt.x),Ut=Math.abs(dt.y*ft.scaleY/Qt.y);L(V)&&(Bt*=2,Ut*=2),V.signX!==re&&Rt!=="y"&&(V.originX=p[V.originX],Bt*=-1,V.signX=re),V.signY!==Kt&&Rt!=="x"&&(V.originY=p[V.originY],Ut*=-1,V.signY=Kt)}var kt=ft.scaleX,zt=ft.scaleY;return Rt?(Rt==="x"&&ft.set("scaleX",Bt),Rt==="y"&&ft.set("scaleY",Ut)):(!Tt&&ft.set("scaleX",Bt),!Ft&&ft.set("scaleY",Ut)),kt!==ft.scaleX||zt!==ft.scaleY}function U(tt,V,K,it){return B(tt,V,K,it)}function G(tt,V,K,it){return B(tt,V,K,it,{by:"x"})}function ht(tt,V,K,it){return B(tt,V,K,it,{by:"y"})}function lt(tt,V,K,it){return tt[V.target.canvas.altActionKey]?i.skewHandlerX(tt,V,K,it):i.scalingY(tt,V,K,it)}function vt(tt,V,K,it){return tt[V.target.canvas.altActionKey]?i.skewHandlerY(tt,V,K,it):i.scalingX(tt,V,K,it)}function pt(tt,V,K,it){var ot=V.target,ft=gt(V,V.originX,V.originY,K,it),Tt=ot.strokeWidth/(ot.strokeUniform?ot.scaleX:1),Ft=L(V)?2:1,Rt=ot.width,dt=Math.abs(ft.x*Ft/ot.scaleX)-Tt;return ot.set("width",Math.max(dt,0)),Rt!==dt}function mt(tt,V,K,it){var ot=V.target,ft=K-V.offsetX,Tt=it-V.offsetY,Ft=!ot.get("lockMovementX")&&ot.left!==ft,Rt=!ot.get("lockMovementY")&&ot.top!==Tt;return Ft&&ot.set("left",ft),Rt&&ot.set("top",Tt),(Ft||Rt)&&E("moving",St(tt,V,K,it)),Ft||Rt}i.scaleCursorStyleHandler=X,i.skewCursorStyleHandler=ut,i.scaleSkewCursorStyleHandler=rt,i.rotationWithSnapping=jt("rotating",j(N)),i.scalingEqually=jt("scaling",j(U)),i.scalingX=jt("scaling",j(G)),i.scalingY=jt("scaling",j(ht)),i.scalingYOrSkewingX=lt,i.scalingXOrSkewingY=vt,i.changeWidth=jt("resizing",j(pt)),i.skewHandlerX=H,i.skewHandlerY=at,i.dragHandler=mt,i.scaleOrSkewActionName=Et,i.rotationStyleHandler=Q,i.fireEvent=E,i.wrapWithFixedAnchor=j,i.wrapWithFireEvent=jt,i.getLocalPoint=gt,a.controlsUtils=i}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.degreesToRadians,u=a.controlsUtils;function i(n,c,d,s,p){s=s||{};var y=this.sizeX||s.cornerSize||p.cornerSize,I=this.sizeY||s.cornerSize||p.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:p.transparentCorners,E=_?"stroke":"fill",D=!_&&(s.cornerStrokeColor||p.cornerStrokeColor),L=c,z=d,X;n.save(),n.fillStyle=s.cornerColor||p.cornerColor,n.strokeStyle=s.cornerStrokeColor||p.cornerStrokeColor,y>I?(X=y,n.scale(1,I/y),z=d*y/I):I>y?(X=I,n.scale(y/I,1),L=c*I/y):X=y,n.lineWidth=1,n.beginPath(),n.arc(L,z,X/2,0,2*Math.PI,!1),n[E](),D&&n.stroke(),n.restore()}function r(n,c,d,s,p){s=s||{};var y=this.sizeX||s.cornerSize||p.cornerSize,I=this.sizeY||s.cornerSize||p.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:p.transparentCorners,E=_?"stroke":"fill",D=!_&&(s.cornerStrokeColor||p.cornerStrokeColor),L=y/2,z=I/2;n.save(),n.fillStyle=s.cornerColor||p.cornerColor,n.strokeStyle=s.cornerStrokeColor||p.cornerStrokeColor,n.lineWidth=1,n.translate(c,d),n.rotate(h(p.angle)),n[E+"Rect"](-L,-z,y,I),D&&n.strokeRect(-L,-z,y,I),n.restore()}u.renderCircleControl=i,u.renderSquareControl=r}(O),function(v){var a=v.fabric||(v.fabric={});function h(u){for(var i in u)this[i]=u[i]}a.Control=h,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,i){return i.cursorStyle},getActionName:function(u,i){return i.actionName},getVisibility:function(u,i){var r=u._controlsVisibility;return r&&typeof r[i]<"u"?r[i]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,i){var r=a.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},i);return r},calcCornerCoords:function(u,i,r,n,c){var d,s,p,y,I=c?this.touchSizeX:this.sizeX,_=c?this.touchSizeY:this.sizeY;if(I&&_&&I!==_){var E=Math.atan2(_,I),D=Math.sqrt(I*I+_*_)/2,L=E-a.util.degreesToRadians(u),z=Math.PI/2-E-a.util.degreesToRadians(u);d=D*a.util.cos(L),s=D*a.util.sin(L),p=D*a.util.cos(z),y=D*a.util.sin(z)}else{var X=I&&_?I:i;D=X*.7071067812;var L=a.util.degreesToRadians(45-u);d=p=D*a.util.cos(L),s=y=D*a.util.sin(L)}return{tl:{x:r-y,y:n-p},tr:{x:r+d,y:n-s},bl:{x:r-d,y:n+s},br:{x:r+y,y:n+p}}},render:function(u,i,r,n,c){switch(n=n||{},n.cornerStyle||c.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,u,i,r,n,c);break;default:a.controlsUtils.renderSquareControl.call(this,u,i,r,n,c)}}}}(O),function(){function v(r,n){var c=r.getAttribute("style"),d=r.getAttribute("offset")||0,s,p,y,I;if(d=parseFloat(d)/(/%$/.test(d)?100:1),d=d<0?0:d>1?1:d,c){var _=c.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),I=_.length;I--;){var E=_[I].split(/\s*:\s*/),D=E[0].trim(),L=E[1].trim();D==="stop-color"?s=L:D==="stop-opacity"&&(y=L)}}return s||(s=r.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=r.getAttribute("stop-opacity")),s=new g.Color(s),p=s.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=p*n,{offset:d,color:s.toRgb(),opacity:y}}function a(r){return{x1:r.getAttribute("x1")||0,y1:r.getAttribute("y1")||0,x2:r.getAttribute("x2")||"100%",y2:r.getAttribute("y2")||0}}function h(r){return{x1:r.getAttribute("fx")||r.getAttribute("cx")||"50%",y1:r.getAttribute("fy")||r.getAttribute("cy")||"50%",r1:0,x2:r.getAttribute("cx")||"50%",y2:r.getAttribute("cy")||"50%",r2:r.getAttribute("r")||"50%"}}var u=g.util.object.clone;g.Gradient=g.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(r){r||(r={}),r.coords||(r.coords={});var n,c=this;Object.keys(r).forEach(function(d){c[d]=r[d]}),this.id?this.id+="_"+g.Object.__uid++:this.id=g.Object.__uid++,n={x1:r.coords.x1||0,y1:r.coords.y1||0,x2:r.coords.x2||0,y2:r.coords.y2||0},this.type==="radial"&&(n.r1=r.coords.r1||0,n.r2=r.coords.r2||0),this.coords=n,this.colorStops=r.colorStops.slice()},addColorStop:function(r){for(var n in r){var c=new g.Color(r[n]);this.colorStops.push({offset:parseFloat(n),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(r){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return g.util.populateWithProperties(this,n,r),n},toSVG:function(r,p){var c=u(this.coords,!0),d,s,p=p||{},y,I,_=u(this.colorStops,!0),E=c.r1>c.r2,D=this.gradientTransform?this.gradientTransform.concat():g.iMatrix.concat(),L=-this.offsetX,z=-this.offsetY,X=!!p.additionalTransform,ut=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(j,jt){return j.offset-jt.offset}),ut==="objectBoundingBox"?(L/=r.width,z/=r.height):(L+=r.width/2,z+=r.height/2),r.type==="path"&&this.gradientUnits!=="percentage"&&(L-=r.pathOffset.x,z-=r.pathOffset.y),D[4]-=L,D[5]-=z,I='id="SVGID_'+this.id+'" gradientUnits="'+ut+'"',I+=' gradientTransform="'+(X?p.additionalTransform+" ":"")+g.util.matrixToSVG(D)+'" ',this.type==="linear"?y=["<linearGradient ",I,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",I,' cx="',E?c.x1:c.x2,'" cy="',E?c.y1:c.y2,'" r="',E?c.r1:c.r2,'" fx="',E?c.x2:c.x1,'" fy="',E?c.y2:c.y1,`">
`]),this.type==="radial"){if(E)for(_=_.concat(),_.reverse(),d=0,s=_.length;d<s;d++)_[d].offset=1-_[d].offset;var rt=Math.min(c.r1,c.r2);if(rt>0){var Et=Math.max(c.r1,c.r2),Q=rt/Et;for(d=0,s=_.length;d<s;d++)_[d].offset+=Q*(1-_[d].offset)}}for(d=0,s=_.length;d<s;d++){var St=_[d];y.push("<stop ",'offset="',St.offset*100+"%",'" style="stop-color:',St.color,typeof St.opacity<"u"?";stop-opacity: "+St.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(r){var n,c=g.util.object.clone(this.coords),d,s;if(!!this.type){for(this.type==="linear"?n=r.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(n=r.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),d=0,s=this.colorStops.length;d<s;d++){var p=this.colorStops[d].color,y=this.colorStops[d].opacity,I=this.colorStops[d].offset;typeof y<"u"&&(p=new g.Color(p).setAlpha(y).toRgba()),n.addColorStop(I,p)}return n}}}),g.util.object.extend(g.Gradient,{fromElement:function(r,n,c,d){var s=parseFloat(c)/(/%$/.test(c)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var p=r.getElementsByTagName("stop"),y,I=r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=r.getAttribute("gradientTransform")||"",E=[],D,L,z=0,X=0,ut;for(r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?(y="linear",D=a(r)):(y="radial",D=h(r)),L=p.length;L--;)E.push(v(p[L],s));ut=g.parseTransformAttribute(_),i(n,D,d,I),I==="pixels"&&(z=-n.left,X=-n.top);var rt=new g.Gradient({id:r.getAttribute("id"),type:y,coords:D,colorStops:E,gradientUnits:I,gradientTransform:ut,offsetX:z,offsetY:X});return rt}});function i(r,n,c,d){var s,p;Object.keys(n).forEach(function(y){s=n[y],s==="Infinity"?p=1:s==="-Infinity"?p=0:(p=parseFloat(n[y],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(p*=.01,d==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(p*=c.viewBoxWidth||c.width),(y==="y1"||y==="y2")&&(p*=c.viewBoxHeight||c.height)))),n[y]=p})}}(),function(){var v=g.util.toFixed;g.Pattern=g.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,h){if(a||(a={}),this.id=g.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){h&&h(this);return}else{var u=this;this.source=g.util.createImage(),g.util.loadImage(a.source,function(i,r){u.source=i,h&&h(u,r)},null,this.crossOrigin)}},toObject:function(a){var h=g.Object.NUM_FRACTION_DIGITS,u,i;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),i={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:v(this.offsetX,h),offsetY:v(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},g.util.populateWithProperties(this,i,a),i},toSVG:function(a){var h=typeof this.source=="function"?this.source():this.source,u=h.width/a.width,i=h.height/a.height,r=this.offsetX/a.width,n=this.offsetY/a.height,c="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,n&&(i+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,r&&(u+=Math.abs(r))),h.src?c=h.src:h.toDataURL&&(c=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+n+'" width="'+u+'" height="'+i+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+c+`"></image>
</pattern>
`},setOptions:function(a){for(var h in a)this[h]=a[h]},toLive:function(a){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":a.createPattern(h,this.repeat)}})}(),function(v){var a=v.fabric||(v.fabric={}),h=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var i in u)this[i]=u[i];this.id=a.Object.__uid++},_parseShadow:function(u){var i=u.trim(),r=a.Shadow.reOffsetsAndBlur.exec(i)||[],n=i.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var i=40,r=40,n=a.Object.NUM_FRACTION_DIGITS,c=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-u.angle)),d=20,s=new a.Color(this.color);return u.width&&u.height&&(i=h((Math.abs(c.x)+this.blur)/u.width,n)*100+d,r=h((Math.abs(c.y)+this.blur)/u.height,n)*100+d),u.flipX&&(c.x*=-1),u.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+h(c.x,n)+'" dy="'+h(c.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},i=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(r){this[r]!==i[r]&&(u[r]=this[r])},this),u}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(O),function(){if(g.StaticCanvas){g.warn("fabric.StaticCanvas is already defined.");return}var v=g.util.object.extend,a=g.util.getElementOffset,h=g.util.removeFromArray,u=g.util.toFixed,i=g.util.transformPoint,r=g.util.invertTransform,n=g.util.getNodeCanvas,c=g.util.createCanvasElement,d=new Error("Could not initialize `canvas` element");g.StaticCanvas=g.util.createClass(g.CommonMethods,{initialize:function(s,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:g.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,p){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,y),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,y),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,y),p.overlayColor&&this.setOverlayColor(p.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return g.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?g.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var s=g.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,p,y){p.setAttribute("width",this.width*s),p.setAttribute("height",this.height*s),y.scale(s,s)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(s,p,y){return this.__setBgOverlayImage("overlayImage",s,p,y)},setBackgroundImage:function(s,p,y){return this.__setBgOverlayImage("backgroundImage",s,p,y)},setOverlayColor:function(s,p){return this.__setBgOverlayColor("overlayColor",s,p)},setBackgroundColor:function(s,p){return this.__setBgOverlayColor("backgroundColor",s,p)},__setBgOverlayImage:function(s,p,y,I){return typeof p=="string"?g.util.loadImage(p,function(_,E){if(_){var D=new g.Image(_,I);this[s]=D,D.canvas=this}y&&y(_,E)},this,I&&I.crossOrigin):(I&&p.setOptions(I),this[s]=p,p&&(p.canvas=this),y&&y(p,!1)),this},__setBgOverlayColor:function(s,p,y){return this[s]=p,this._initGradient(p,s),this._initPattern(p,s,y),this},_createCanvasElement:function(){var s=c();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw d;return s},_initOptions:function(s){var p=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=g.util.getById(s)||this._createCanvasElement(),g.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,p){return this.setDimensions({width:s},p)},setHeight:function(s,p){return this.setDimensions({height:s},p)},setDimensions:function(s,p){var y;p=p||{};for(var I in s)y=s[I],p.cssOnly||(this._setBackstoreDimension(I,s[I]),y+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(I,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,p){return this.lowerCanvasEl[s]=p,this.upperCanvasEl&&(this.upperCanvasEl[s]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=p),this[s]=p,this},_setCssDimension:function(s,p){return this.lowerCanvasEl.style[s]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=p),this.wrapperEl&&(this.wrapperEl.style[s]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var p=this._activeObject,y=this.backgroundImage,I=this.overlayImage,_,E,D;for(this.viewportTransform=s,E=0,D=this._objects.length;E<D;E++)_=this._objects[E],_.group||_.setCoords(!0);return p&&p.setCoords(),y&&y.setCoords(!0),I&&I.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,p){var y=s,I=this.viewportTransform.slice(0);s=i(s,r(this.viewportTransform)),I[0]=p,I[3]=p;var _=i(s,I);return I[4]+=y.x-_.x,I[5]+=y.y-_.y,this.setViewportTransform(I)},setZoom:function(s){return this.zoomToPoint(new g.Point(0,0),s),this},absolutePan:function(s){var p=this.viewportTransform.slice(0);return p[4]=-s.x,p[5]=-s.y,this.setViewportTransform(p)},relativePan:function(s){return this.absolutePan(new g.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=g.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},p=this.width,y=this.height,I=r(this.viewportTransform);return s.tl=i({x:0,y:0},I),s.br=i({x:p,y},I),s.tr=new g.Point(s.br.x,s.tl.y),s.bl=new g.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(g.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,p){var y=this.viewportTransform,I=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),g.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(s,p),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),I&&(I.canvas=this,I.shouldCache(),I._transformDone=!0,I.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var p=this.viewportTransform,y=this.clipPath;s.save(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s.globalCompositeOperation="destination-in",y.transform(s),s.scale(1/y.zoomX,1/y.zoomY),s.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),s.restore()},_renderObjects:function(s,p){var y,I;for(y=0,I=p.length;y<I;++y)p[y]&&p[y].render(s)},_renderBackgroundOrOverlay:function(s,p){var y=this[p+"Color"],I=this[p+"Image"],_=this.viewportTransform,E=this[p+"Vpt"];if(!(!y&&!I)){if(y){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=y.toLive?y.toLive(s,this):y,E&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),s.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var D=y.gradientTransform||y.patternTransform;D&&s.transform(D[0],D[1],D[2],D[3],D[4],D[5]),s.fill(),s.restore()}I&&(s.save(),E&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),I.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(s){return this._centerObject(s,new g.Point(this.getCenter().left,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new g.Point(s.getCenterPoint().x,this.getCenter().top))},centerObject:function(s){var p=this.getCenter();return this._centerObject(s,new g.Point(p.left,p.top))},viewportCenterObject:function(s){var p=this.getVpCenter();return this._centerObject(s,p)},viewportCenterObjectH:function(s){var p=this.getVpCenter();return this._centerObject(s,new g.Point(p.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var p=this.getVpCenter();return this._centerObject(s,new g.Point(s.getCenterPoint().x,p.y))},getVpCenter:function(){var s=this.getCenter(),p=r(this.viewportTransform);return i({x:s.left,y:s.top},p)},_centerObject:function(s,p){return s.setPositionByOrigin(p,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,p){var y=this.clipPath,I={version:g.version,objects:this._toObjects(s,p)};return y&&!y.excludeFromExport&&(I.clipPath=this._toObject(this.clipPath,s,p)),v(I,this.__serializeBgOverlay(s,p)),g.util.populateWithProperties(this,I,p),I},_toObjects:function(s,p){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,s,p)},this)},_toObject:function(s,p,y){var I;this.includeDefaultValues||(I=s.includeDefaultValues,s.includeDefaultValues=!1);var _=s[p](y);return this.includeDefaultValues||(s.includeDefaultValues=I),_},__serializeBgOverlay:function(s,p){var y={},I=this.backgroundImage,_=this.overlayImage,E=this.backgroundColor,D=this.overlayColor;return E&&E.toObject?E.excludeFromExport||(y.background=E.toObject(p)):E&&(y.background=E),D&&D.toObject?D.excludeFromExport||(y.overlay=D.toObject(p)):D&&(y.overlay=D),I&&!I.excludeFromExport&&(y.backgroundImage=this._toObject(I,s,p)),_&&!_.excludeFromExport&&(y.overlayImage=this._toObject(_,s,p)),y},svgViewportTransformation:!0,toSVG:function(s,p){s||(s={}),s.reviver=p;var y=[];return this._setSVGPreamble(y,s),this._setSVGHeader(y,s),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",p),this._setSVGObjects(y,p),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",p),y.push("</svg>"),y.join("")},_setSVGPreamble:function(s,p){p.suppressPreamble||s.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,p){var y=p.width||this.width,I=p.height||this.height,_,E='viewBox="0 0 '+this.width+" "+this.height+'" ',D=g.Object.NUM_FRACTION_DIGITS;p.viewBox?E='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,E='viewBox="'+u(-_[4]/_[0],D)+" "+u(-_[5]/_[3],D)+" "+u(this.width/_[0],D)+" "+u(this.height/_[3],D)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',I,'" ',E,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",g.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(s){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+g.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,p=["background","overlay"].map(function(y){var I=s[y+"Color"];if(I&&I.toLive){var _=s[y+"Vpt"],E=s.viewportTransform,D={width:s.width/(_?E[0]:1),height:s.height/(_?E[3]:1)};return I.toSVG(D,{additionalTransform:_?g.util.matrixToSVG(E):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var s="",p={},y,I,_,E,D,L,z,X,ut,rt=g.fontPaths,Et=[];for(this._objects.forEach(function St(j){Et.push(j),j._objects&&j._objects.forEach(St)}),X=0,ut=Et.length;X<ut;X++)if(y=Et[X],I=y.fontFamily,!(y.type.indexOf("text")===-1||p[I]||!rt[I])&&(p[I]=!0,!!y.styles)){_=y.styles;for(D in _){E=_[D];for(z in E)L=E[z],I=L.fontFamily,!p[I]&&rt[I]&&(p[I]=!0)}}for(var Q in p)s+=[`		@font-face {
`,"			font-family: '",Q,`';
`,"			src: url('",rt[Q],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,p){var y,I,_,E=this._objects;for(I=0,_=E.length;I<_;I++)y=E[I],!y.excludeFromExport&&this._setSVGObject(s,y,p)},_setSVGObject:function(s,p,y){s.push(p.toSVG(y))},_setSVGBgOverlayImage:function(s,p,y){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&s.push(this[p].toSVG(y))},_setSVGBgOverlayColor:function(s,p){var y=this[p+"Color"],I=this.viewportTransform,_=this.width,E=this.height;if(!!y)if(y.toLive){var D=y.repeat,L=g.util.invertTransform(I),z=this[p+"Vpt"],X=z?g.util.matrixToSVG(L):"";s.push('<rect transform="'+X+" translate(",_/2,",",E/2,')"',' x="',y.offsetX-_/2,'" y="',y.offsetY-E/2,'" ','width="',D==="repeat-y"||D==="no-repeat"?y.source.width:_,'" height="',D==="repeat-x"||D==="no-repeat"?y.source.height:E,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var p=this._activeObject,y,I,_;if(s===p&&s.type==="activeSelection")for(_=p._objects,y=_.length;y--;)I=_[y],h(this._objects,I),this._objects.unshift(I);else h(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var p=this._activeObject,y,I,_;if(s===p&&s.type==="activeSelection")for(_=p._objects,y=0;y<_.length;y++)I=_[y],h(this._objects,I),this._objects.push(I);else h(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,p){if(!s)return this;var y=this._activeObject,I,_,E,D,L,z=0;if(s===y&&s.type==="activeSelection")for(L=y._objects,I=0;I<L.length;I++)_=L[I],E=this._objects.indexOf(_),E>0+z&&(D=E-1,h(this._objects,_),this._objects.splice(D,0,_)),z++;else E=this._objects.indexOf(s),E!==0&&(D=this._findNewLowerIndex(s,E,p),h(this._objects,s),this._objects.splice(D,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,p,y){var I,_;if(y)for(I=p,_=p-1;_>=0;--_){var E=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(E){I=_;break}}else I=p-1;return I},bringForward:function(s,p){if(!s)return this;var y=this._activeObject,I,_,E,D,L,z=0;if(s===y&&s.type==="activeSelection")for(L=y._objects,I=L.length;I--;)_=L[I],E=this._objects.indexOf(_),E<this._objects.length-1-z&&(D=E+1,h(this._objects,_),this._objects.splice(D,0,_)),z++;else E=this._objects.indexOf(s),E!==this._objects.length-1&&(D=this._findNewUpperIndex(s,E,p),h(this._objects,s),this._objects.splice(D,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,p,y){var I,_,E;if(y)for(I=p,_=p+1,E=this._objects.length;_<E;++_){var D=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(D){I=_;break}}else I=p+1;return I},moveTo:function(s,p){return h(this._objects,s),this._objects.splice(p,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(g.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),g.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),v(g.StaticCanvas.prototype,g.Observable),v(g.StaticCanvas.prototype,g.Collection),v(g.StaticCanvas.prototype,g.DataURLExporter),v(g.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var p=c();if(!p||!p.getContext)return null;var y=p.getContext("2d");if(!y)return null;switch(s){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),g.StaticCanvas.prototype.toJSON=g.StaticCanvas.prototype.toObject,g.isLikelyNode&&(g.StaticCanvas.prototype.createPNGStream=function(){var s=n(this.lowerCanvasEl);return s&&s.createPNGStream()},g.StaticCanvas.prototype.createJPEGStream=function(s){var p=n(this.lowerCanvasEl);return p&&p.createJPEGStream(s)})}(),g.BaseBrush=g.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var v=this.canvas.contextTop;v.strokeStyle=this.color,v.lineWidth=this.width,v.lineCap=this.strokeLineCap,v.miterLimit=this.strokeMiterLimit,v.lineJoin=this.strokeLineJoin,v.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(v){var a=this.canvas.viewportTransform;v.save(),v.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(!!this.shadow){var v=this.canvas,a=this.shadow,h=v.contextTop,u=v.getZoom();v&&v._isRetinaScaling()&&(u*=g.devicePixelRatio),h.shadowColor=a.color,h.shadowBlur=a.blur*u,h.shadowOffsetX=a.offsetX*u,h.shadowOffsetY=a.offsetY*u}},needsFullRender:function(){var v=new g.Color(this.color);return v.getAlpha()<1||!!this.shadow},_resetShadow:function(){var v=this.canvas.contextTop;v.shadowColor="",v.shadowBlur=v.shadowOffsetX=v.shadowOffsetY=0},_isOutSideCanvas:function(v){return v.x<0||v.x>this.canvas.getWidth()||v.y<0||v.y>this.canvas.getHeight()}}),function(){g.PencilBrush=g.util.createClass(g.BaseBrush,{decimate:.4,initialize:function(v){this.canvas=v,this._points=[]},_drawSegment:function(v,a,h){var u=a.midPointFrom(h);return v.quadraticCurveTo(a.x,a.y,u.x,u.y),u},onMouseDown:function(v,a){!this.canvas._isMainEvent(a.e)||(this._prepareForDrawing(v),this._captureDrawingPath(v),this._render())},onMouseMove:function(v,a){if(!!this.canvas._isMainEvent(a.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v))&&this._captureDrawingPath(v)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,u=h.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,h[u-2],h[u-1],!0),i.stroke(),i.restore()}},onMouseUp:function(v){return this.canvas._isMainEvent(v.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(v){var a=new g.Point(v.x,v.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(v){return this._points.length>1&&v.eq(this._points[this._points.length-1])?!1:(this._points.push(v),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(v){var a=new g.Point(v.x,v.y);return this._addPoint(a)},_render:function(){var v=this.canvas.contextTop,a,h,u=this._points[0],i=this._points[1];if(this._saveAndTransform(v),v.beginPath(),this._points.length===2&&u.x===i.x&&u.y===i.y){var r=this.width/1e3;u=new g.Point(u.x,u.y),i=new g.Point(i.x,i.y),u.x-=r,i.x+=r}for(v.moveTo(u.x,u.y),a=1,h=this._points.length;a<h;a++)this._drawSegment(v,u,i),u=this._points[a],i=this._points[a+1];v.lineTo(u.x,u.y),v.stroke(),v.restore()},convertPointsToSVGPath:function(v){var a=this.width/1e3;return g.util.getSmoothPathFromPoints(v,a)},_isEmptySVGPath:function(v){var a=g.util.joinPath(v);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(v){var a=new g.Path(v,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new g.Shadow(this.shadow)),a},decimatePoints:function(v,a){if(v.length<=2)return v;var h=this.canvas.getZoom(),u=Math.pow(a/h,2),i,r=v.length-1,n=v[0],c=[n],d;for(i=1;i<r-1;i++)d=Math.pow(n.x-v[i].x,2)+Math.pow(n.y-v[i].y,2),d>=u&&(n=v[i],c.push(n));return c.push(v[r]),c},_finalizeAndAddPath:function(){var v=this.canvas.contextTop;v.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var h=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),g.CircleBrush=g.util.createClass(g.BaseBrush,{width:10,initialize:function(v){this.canvas=v,this.points=[]},drawDot:function(v){var a=this.addPoint(v),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,a),h.restore()},dot:function(v,a){v.fillStyle=a.fill,v.beginPath(),v.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),v.closePath(),v.fill()},onMouseDown:function(v){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(v)},_render:function(){var v=this.canvas.contextTop,a,h,u=this.points;for(this._saveAndTransform(v),a=0,h=u.length;a<h;a++)this.dot(v,u[a]);v.restore()},onMouseMove:function(v){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(v),this._render()):this.drawDot(v))},onMouseUp:function(){var v=this.canvas.renderOnAddRemove,a,h;this.canvas.renderOnAddRemove=!1;var u=[];for(a=0,h=this.points.length;a<h;a++){var i=this.points[a],r=new g.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(r.shadow=new g.Shadow(this.shadow)),u.push(r)}var n=new g.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=v,this.canvas.requestRenderAll()},addPoint:function(v){var a=new g.Point(v.x,v.y),h=g.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new g.Color(this.color).setAlpha(g.util.getRandomInt(0,100)/100).toRgba();return a.radius=h,a.fill=u,this.points.push(a),a}}),g.SprayBrush=g.util.createClass(g.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(v){this.canvas=v,this.sprayChunks=[]},onMouseDown:function(v){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(v),this.render(this.sprayChunkPoints)},onMouseMove:function(v){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(v)||(this.addSprayChunk(v),this.render(this.sprayChunkPoints))},onMouseUp:function(){var v=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],h=0,u=this.sprayChunks.length;h<u;h++)for(var i=this.sprayChunks[h],r=0,n=i.length;r<n;r++){var c=new g.Rect({width:i[r].width,height:i[r].width,left:i[r].x+1,top:i[r].y+1,originX:"center",originY:"center",fill:this.color});a.push(c)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var d=new g.Group(a);this.shadow&&d.set("shadow",new g.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=v,this.canvas.requestRenderAll()},_getOptimizedRects:function(v){var a={},h,u,i;for(u=0,i=v.length;u<i;u++)h=v[u].left+""+v[u].top,a[h]||(a[h]=v[u]);var r=[];for(h in a)r.push(a[h]);return r},render:function(v){var a=this.canvas.contextTop,h,u;for(a.fillStyle=this.color,this._saveAndTransform(a),h=0,u=v.length;h<u;h++){var i=v[h];typeof i.opacity<"u"&&(a.globalAlpha=i.opacity),a.fillRect(i.x,i.y,i.width,i.width)}a.restore()},_render:function(){var v=this.canvas.contextTop,a,h;for(v.fillStyle=this.color,this._saveAndTransform(v),a=0,h=this.sprayChunks.length;a<h;a++)this.render(this.sprayChunks[a]);v.restore()},addSprayChunk:function(v){this.sprayChunkPoints=[];var a,h,u,i=this.width/2,r;for(r=0;r<this.density;r++){a=g.util.getRandomInt(v.x-i,v.x+i),h=g.util.getRandomInt(v.y-i,v.y+i),this.dotWidthVariance?u=g.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new g.Point(a,h);n.width=u,this.randomOpacity&&(n.opacity=g.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),g.PatternBrush=g.util.createClass(g.PencilBrush,{getPatternSrc:function(){var v=20,a=5,h=g.util.createCanvasElement(),u=h.getContext("2d");return h.width=h.height=v+a,u.fillStyle=this.color,u.beginPath(),u.arc(v/2,v/2,v/2,0,Math.PI*2,!1),u.closePath(),u.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(v){var a=this.callSuper("createPath",v),h=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new g.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),a}}),function(){var v=g.util.getPointer,a=g.util.degreesToRadians,h=g.util.isTouchEvent;g.Canvas=g.util.createClass(g.StaticCanvas,{initialize:function(i,r){r||(r={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,r),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=g.PencilBrush&&new g.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var i=this.getActiveObjects(),r,n,c;if(i.length>0&&!this.preserveObjectStacking){n=[],c=[];for(var d=0,s=this._objects.length;d<s;d++)r=this._objects[d],i.indexOf(r)===-1?n.push(r):c.push(r);i.length>1&&(this._activeObject._objects=c),n.push.apply(n,c)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var i=this.contextContainer;return this.renderCanvas(i,this._chooseObjectsToRender()),this},renderTopLayer:function(i){i.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(i),this.contextTopDirty=!0),i.restore()},renderTop:function(){var i=this.contextTop;return this.clearContext(i),this.renderTopLayer(i),this.fire("after:render"),this},_normalizePointer:function(i,r){var n=i.calcTransformMatrix(),c=g.util.invertTransform(n),d=this.restorePointerVpt(r);return g.util.transformPoint(d,c)},isTargetTransparent:function(i,r,n){if(i.shouldCache()&&i._cacheCanvas&&i!==this._activeObject){var c=this._normalizePointer(i,{x:r,y:n}),d=Math.max(i.cacheTranslationX+c.x*i.zoomX,0),s=Math.max(i.cacheTranslationY+c.y*i.zoomY,0),_=g.util.isTransparent(i._cacheContext,Math.round(d),Math.round(s),this.targetFindTolerance);return _}var p=this.contextCache,y=i.selectionBackgroundColor,I=this.viewportTransform;i.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(I[0],I[1],I[2],I[3],I[4],I[5]),i.render(p),p.restore(),i.selectionBackgroundColor=y;var _=g.util.isTransparent(p,r,n,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(i){var r=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?r=!!this.selectionKey.find(function(n){return i[n]===!0}):r=i[this.selectionKey],r},_shouldClearSelection:function(i,r){var n=this.getActiveObjects(),c=this._activeObject;return!r||r&&c&&n.length>1&&n.indexOf(r)===-1&&c!==r&&!this._isSelectionKeyPressed(i)||r&&!r.evented||r&&!r.selectable&&c&&c!==r},_shouldCenterTransform:function(i,r,n){if(!!i){var c;return r==="scale"||r==="scaleX"||r==="scaleY"||r==="resizing"?c=this.centeredScaling||i.centeredScaling:r==="rotate"&&(c=this.centeredRotation||i.centeredRotation),c?!n:n}},_getOriginFromCorner:function(i,r){var n={x:i.originX,y:i.originY};return r==="ml"||r==="tl"||r==="bl"?n.x="right":(r==="mr"||r==="tr"||r==="br")&&(n.x="left"),r==="tl"||r==="mt"||r==="tr"?n.y="bottom":(r==="bl"||r==="mb"||r==="br")&&(n.y="top"),n},_getActionFromCorner:function(i,r,n,c){if(!r||!i)return"drag";var d=c.controls[r];return d.getActionName(n,d,c)},_setupCurrentTransform:function(i,r,n){if(!!r){var c=this.getPointer(i),d=r.__corner,s=r.controls[d],p=n&&d?s.getActionHandler(i,r,s):g.controlsUtils.dragHandler,y=this._getActionFromCorner(n,d,i,r),I=this._getOriginFromCorner(r,d),_=i[this.centeredKey],E={target:r,action:y,actionHandler:p,corner:d,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:c.x-r.left,offsetY:c.y-r.top,originX:I.x,originY:I.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:a(r.angle),width:r.width*r.scaleX,shiftKey:i.shiftKey,altKey:_,original:g.util.saveObjectTransform(r)};this._shouldCenterTransform(r,y,_)&&(E.originX="center",E.originY="center"),E.original.originX=I.x,E.original.originY=I.y,this._currentTransform=E,this._beforeTransform(i)}},setCursor:function(i){this.upperCanvasEl.style.cursor=i},_drawSelection:function(i){var r=this._groupSelector,n=new g.Point(r.ex,r.ey),c=g.util.transformPoint(n,this.viewportTransform),d=new g.Point(r.ex+r.left,r.ey+r.top),s=g.util.transformPoint(d,this.viewportTransform),p=Math.min(c.x,s.x),y=Math.min(c.y,s.y),I=Math.max(c.x,s.x),_=Math.max(c.y,s.y),E=this.selectionLineWidth/2;this.selectionColor&&(i.fillStyle=this.selectionColor,i.fillRect(p,y,I-p,_-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(i.lineWidth=this.selectionLineWidth,i.strokeStyle=this.selectionBorderColor,p+=E,y+=E,I-=E,_-=E,g.Object.prototype._setLineDash.call(this,i,this.selectionDashArray),i.strokeRect(p,y,I-p,_-y))},findTarget:function(i,r){if(!this.skipTargetFind){var n=!0,c=this.getPointer(i,n),d=this._activeObject,s=this.getActiveObjects(),p,y,I=h(i),_=s.length>1&&!r||s.length===1;if(this.targets=[],_&&d._findTargetCorner(c,I)||s.length>1&&!r&&d===this._searchPossibleTargets([d],c))return d;if(s.length===1&&d===this._searchPossibleTargets([d],c))if(this.preserveObjectStacking)p=d,y=this.targets,this.targets=[];else return d;var E=this._searchPossibleTargets(this._objects,c);return i[this.altSelectionKey]&&E&&p&&E!==p&&(E=p,this.targets=y),E}},_checkTarget:function(i,r,n){if(r&&r.visible&&r.evented&&r.containsPoint(i))if((this.perPixelTargetFind||r.perPixelTargetFind)&&!r.isEditing){var c=this.isTargetTransparent(r,n.x,n.y);if(!c)return!0}else return!0},_searchPossibleTargets:function(i,r){for(var n,c=i.length,d;c--;){var s=i[c],p=s.group?this._normalizePointer(s.group,r):r;if(this._checkTarget(p,s,r)){n=i[c],n.subTargetCheck&&n instanceof g.Group&&(d=this._searchPossibleTargets(n._objects,r),d&&this.targets.push(d));break}}return n},restorePointerVpt:function(i){return g.util.transformPoint(i,g.util.invertTransform(this.viewportTransform))},getPointer:function(i,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var n=v(i),c=this.upperCanvasEl,d=c.getBoundingClientRect(),s=d.width||0,p=d.height||0,y;(!s||!p)&&("top"in d&&"bottom"in d&&(p=Math.abs(d.top-d.bottom)),"right"in d&&"left"in d&&(s=Math.abs(d.right-d.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,r||(n=this.restorePointerVpt(n));var I=this.getRetinaScaling();return I!==1&&(n.x/=I,n.y/=I),s===0||p===0?y={width:1,height:1}:y={width:c.width/s,height:c.height/p},{x:n.x*y.width,y:n.y*y.height}},_createUpperCanvas:function(){var i=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),r=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),g.util.addClass(n,"upper-canvas "+i),this.wrapperEl.appendChild(n),this._copyCanvasStyle(r,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=g.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),g.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),g.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(i){var r=this.width||i.width,n=this.height||i.height;g.util.setStyle(i,{position:"absolute",width:r+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),i.width=r,i.height=n,g.util.makeElementUnselectable(i)},_copyCanvasStyle:function(i,r){r.style.cssText=i.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var i=this._activeObject;return i?i.type==="activeSelection"&&i._objects?i._objects.slice(0):[i]:[]},_onObjectRemoved:function(i){i===this._activeObject&&(this.fire("before:selection:cleared",{target:i}),this._discardActiveObject(),this.fire("selection:cleared",{target:i}),i.fire("deselected")),i===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",i)},_fireSelectionEvents:function(i,r){var n=!1,c=this.getActiveObjects(),d=[],s=[];i.forEach(function(p){c.indexOf(p)===-1&&(n=!0,p.fire("deselected",{e:r,target:p}),s.push(p))}),c.forEach(function(p){i.indexOf(p)===-1&&(n=!0,p.fire("selected",{e:r,target:p}),d.push(p))}),i.length>0&&c.length>0?n&&this.fire("selection:updated",{e:r,selected:d,deselected:s,updated:d[0]||s[0],target:this._activeObject}):c.length>0?this.fire("selection:created",{e:r,selected:d,target:this._activeObject}):i.length>0&&this.fire("selection:cleared",{e:r,deselected:s})},setActiveObject:function(i,r){var n=this.getActiveObjects();return this._setActiveObject(i,r),this._fireSelectionEvents(n,r),this},_setActiveObject:function(i,r){return this._activeObject===i||!this._discardActiveObject(r,i)||i.onSelect({e:r})?!1:(this._activeObject=i,!0)},_discardActiveObject:function(i,r){var n=this._activeObject;if(n){if(n.onDeselect({e:i,object:r}))return!1;this._activeObject=null}return!0},discardActiveObject:function(i){var r=this.getActiveObjects(),n=this.getActiveObject();return r.length&&this.fire("before:selection:cleared",{target:n,e:i}),this._discardActiveObject(i),this._fireSelectionEvents(r,i),this},dispose:function(){var i=this.wrapperEl;return this.removeListeners(),i.removeChild(this.upperCanvasEl),i.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(r){g.util.cleanUpJsdomNode(this[r]),this[r]=void 0}.bind(this)),i.parentNode&&i.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,g.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(i){var r=this._activeObject;r&&r._renderControls(i)},_toObject:function(i,r,n){var c=this._realizeGroupTransformOnObject(i),d=this.callSuper("_toObject",i,r,n);return this._unwindGroupTransformOnObject(i,c),d},_realizeGroupTransformOnObject:function(i){if(i.group&&i.group.type==="activeSelection"&&this._activeObject===i.group){var r=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return r.forEach(function(c){n[c]=i[c]}),g.util.addTransformToObject(i,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(i,r){r&&i.set(r)},_setSVGObject:function(i,r,n){var c=this._realizeGroupTransformOnObject(r);this.callSuper("_setSVGObject",i,r,n),this._unwindGroupTransformOnObject(r,c)},setViewportTransform:function(i){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),g.StaticCanvas.prototype.setViewportTransform.call(this,i)}});for(var u in g.StaticCanvas)u!=="prototype"&&(g.Canvas[u]=g.StaticCanvas[u])}(),function(){var v=g.util.addListener,a=g.util.removeListener,h=3,u=2,i=1,r={passive:!1};function n(c,d){return c.button&&c.button===d-1}g.util.object.extend(g.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(v,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,d){var s=this.upperCanvasEl,p=this._getEventPrefix();c(g.window,"resize",this._onResize),c(s,p+"down",this._onMouseDown),c(s,p+"move",this._onMouseMove,r),c(s,p+"out",this._onMouseOut),c(s,p+"enter",this._onMouseEnter),c(s,"wheel",this._onMouseWheel),c(s,"contextmenu",this._onContextMenu),c(s,"dblclick",this._onDoubleClick),c(s,"dragover",this._onDragOver),c(s,"dragenter",this._onDragEnter),c(s,"dragleave",this._onDragLeave),c(s,"drop",this._onDrop),this.enablePointerEvents||c(s,"touchstart",this._onTouchStart,r),typeof eventjs<"u"&&d in eventjs&&(eventjs[d](s,"gesture",this._onGesture),eventjs[d](s,"drag",this._onDrag),eventjs[d](s,"orientation",this._onOrientationChange),eventjs[d](s,"shake",this._onShake),eventjs[d](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var c=this._getEventPrefix();a(g.document,c+"up",this._onMouseUp),a(g.document,"touchend",this._onTouchEnd,r),a(g.document,c+"move",this._onMouseMove,r),a(g.document,"touchmove",this._onMouseMove,r)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(c,d){this.__onTransformGesture&&this.__onTransformGesture(c,d)},_onDrag:function(c,d){this.__onDrag&&this.__onDrag(c,d)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var d=this._hoveredTarget;this.fire("mouse:out",{target:d,e:c}),this._hoveredTarget=null,d&&d.fire("mouseout",{e:c});var s=this;this._hoveredTargets.forEach(function(p){s.fire("mouse:out",{target:d,e:c}),p&&d.fire("mouseout",{e:c})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(p){p.isEditing&&p.hiddenTextarea.focus()})},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,d){this.__onOrientationChange&&this.__onOrientationChange(c,d)},_onShake:function(c,d){this.__onShake&&this.__onShake(c,d)},_onLongPress:function(c,d){this.__onLongPress&&this.__onLongPress(c,d)},_onDragOver:function(c){c.preventDefault();var d=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(d,c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var d=c.changedTouches;return d?d[0]&&d[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return c.isPrimary===!0?!0:c.isPrimary===!1?!1:c.type==="touchend"&&c.touches.length===0?!0:c.changedTouches?c.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(c){c.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var d=this.upperCanvasEl,s=this._getEventPrefix();v(g.document,"touchend",this._onTouchEnd,r),v(g.document,"touchmove",this._onMouseMove,r),a(d,s+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var d=this.upperCanvasEl,s=this._getEventPrefix();a(d,s+"move",this._onMouseMove,r),v(g.document,s+"up",this._onMouseUp),v(g.document,s+"move",this._onMouseMove,r)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var d=this._getEventPrefix();a(g.document,"touchend",this._onTouchEnd,r),a(g.document,"touchmove",this._onMouseMove,r);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){v(s.upperCanvasEl,d+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var d=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(c)&&(a(g.document,s+"up",this._onMouseUp),a(g.document,s+"move",this._onMouseMove,r),v(d,s+"move",this._onMouseMove,r))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var d=this._activeObject;return!!d!=!!c||d&&c&&d!==c?!0:(d&&d.isEditing,!1)},__onMouseUp:function(c){var d,s=this._currentTransform,p=this._groupSelector,y=!1,I=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(c),d=this._target,this._handleEvent(c,"up:before"),n(c,h)){this.fireRightClick&&this._handleEvent(c,"up",h,I);return}if(n(c,u)){this.fireMiddleClick&&this._handleEvent(c,"up",u,I),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(c);return}if(!!this._isMainEvent(c)){if(s&&(this._finalizeCurrentTransform(c),y=s.actionPerformed),!I){var _=d===this._activeObject;this._maybeGroupObjects(c),y||(y=this._shouldRender(d)||!_&&d===this._activeObject)}if(d){if(d.selectable&&d!==this._activeObject&&d.activeOn==="up")this.setActiveObject(d,c),y=!0;else{var E=d._findTargetCorner(this.getPointer(c,!0),g.util.isTouchEvent(c)),D=d.controls[E],L=D&&D.getMouseUpHandler(c,d,D);if(L){var z=this.getPointer(c);L(c,s,z.x,z.y)}}d.isMoving=!1}this._setCursorFromEvent(c,d),this._handleEvent(c,"up",i,I),this._groupSelector=null,this._currentTransform=null,d&&(d.__corner=0),y?this.requestRenderAll():I||this.renderTop()}},_simpleEventHandler:function(c,d){var s=this.findTarget(d),p=this.targets,y={e:d,target:s,subTargets:p};if(this.fire(c,y),s&&s.fire(c,y),!p)return s;for(var I=0;I<p.length;I++)p[I].fire(c,y);return s},_handleEvent:function(c,d,s,p){var y=this._target,I=this.targets||[],_={e:c,target:y,subTargets:I,button:s||i,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};d==="up"&&(_.currentTarget=this.findTarget(c),_.currentSubTargets=this.targets),this.fire("mouse:"+d,_),y&&y.fire("mouse"+d,_);for(var E=0;E<I.length;E++)I[E].fire("mouse"+d,_)},_finalizeCurrentTransform:function(c){var d=this._currentTransform,s=d.target,p,y={e:c,target:s,transform:d,action:d.action};s._scaling&&(s._scaling=!1),s.setCoords(),(d.actionPerformed||this.stateful&&s.hasStateChanged())&&(d.actionPerformed&&(p=this._addEventOptions(y,d),this._fire(p,y)),this._fire("modified",y))},_addEventOptions:function(c,d){var s,p;switch(d.action){case"scaleX":s="scaled",p="x";break;case"scaleY":s="scaled",p="y";break;case"skewX":s="skewed",p="x";break;case"skewY":s="skewed",p="y";break;case"scale":s="scaled",p="equally";break;case"rotate":s="rotated";break;case"drag":s="moved";break}return c.by=p,s},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var d=this.getPointer(c);this.freeDrawingBrush.onMouseDown(d,{e:c,pointer:d}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var d=this.getPointer(c);this.freeDrawingBrush.onMouseMove(d,{e:c,pointer:d})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var d=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:d}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var d=this._target;if(n(c,h)){this.fireRightClick&&this._handleEvent(c,"down",h);return}if(n(c,u)){this.fireMiddleClick&&this._handleEvent(c,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(c);return}if(!!this._isMainEvent(c)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var p=this._shouldRender(d),y=this._shouldGroup(c,d);if(this._shouldClearSelection(c,d)?this.discardActiveObject(c):y&&(this._handleGrouping(c,d),d=this._activeObject),this.selection&&(!d||!d.selectable&&!d.isEditing&&d!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),d){var I=d===this._activeObject;d.selectable&&d.activeOn==="down"&&this.setActiveObject(d,c);var _=d._findTargetCorner(this.getPointer(c,!0),g.util.isTouchEvent(c));if(d.__corner=_,d===this._activeObject&&(_||!y)){this._setupCurrentTransform(c,d,I);var E=d.controls[_],s=this.getPointer(c),D=E&&E.getMouseDownHandler(c,d,E);D&&D(c,this._currentTransform,s.x,s.y)}}this._handleEvent(c,"down"),(p||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var d=this._currentTransform;this.stateful&&d.target.saveState(),this.fire("before:transform",{e:c,transform:d})},__onMouseMove:function(c){this._handleEvent(c,"move:before"),this._cacheTransformEventData(c);var d,s;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(c);return}if(!!this._isMainEvent(c)){var p=this._groupSelector;p?(s=this._absolutePointer,p.left=s.x-p.ex,p.top=s.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(d=this.findTarget(c)||null,this._setCursorFromEvent(c,d),this._fireOverOutEvents(d,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,d){var s=this._hoveredTarget,p=this._hoveredTargets,y=this.targets,I=Math.max(p.length,y.length);this.fireSyntheticInOutEvents(c,d,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<I;_++)this.fireSyntheticInOutEvents(y[_],d,{oldTarget:p[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,d){var s=this._draggedoverTarget,p=this._hoveredTargets,y=this.targets,I=Math.max(p.length,y.length);this.fireSyntheticInOutEvents(c,d,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<I;_++)this.fireSyntheticInOutEvents(y[_],d,{oldTarget:p[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,d,s){var p,y,I=s.oldTarget,_,E,D=I!==c,L=s.canvasEvtIn,z=s.canvasEvtOut;D&&(p={e:d,target:c,previousTarget:I},y={e:d,target:I,nextTarget:c}),E=c&&D,_=I&&D,_&&(z&&this.fire(z,y),I.fire(s.evtOut,y)),E&&(L&&this.fire(L,p),c.fire(s.evtIn,p))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var d=this.getPointer(c),s=this._currentTransform;s.reset=!1,s.shiftKey=c.shiftKey,s.altKey=c[this.centeredKey],this._performTransformAction(c,s,d),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,d,s){var p=s.x,y=s.y,I=d.action,_=!1,E=d.actionHandler;E&&(_=E(c,d,p,y)),I==="drag"&&_&&(d.target.isMoving=!0,this.setCursor(d.target.moveCursor||this.moveCursor)),d.actionPerformed=d.actionPerformed||_},_fire:g.controlsUtils.fireEvent,_setCursorFromEvent:function(c,d){if(!d)return this.setCursor(this.defaultCursor),!1;var s=d.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!p||!p.contains(d))&&d._findTargetCorner(this.getPointer(c,!0));y?this.setCursor(this.getCornerCursor(y,d,c)):(d.subTargetCheck&&this.targets.concat().reverse().map(function(I){s=I.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(c,d,s){var p=d.controls[c];return p.cursorStyleHandler(s,p,d)}})}(),function(){var v=Math.min,a=Math.max;g.util.object.extend(g.Canvas.prototype,{_shouldGroup:function(h,u){var i=this._activeObject;return i&&this._isSelectionKeyPressed(h)&&u&&u.selectable&&this.selection&&(i!==u||i.type==="activeSelection")&&!u.onSelect({e:h})},_handleGrouping:function(h,u){var i=this._activeObject;i.__corner||u===i&&(u=this.findTarget(h,!0),!u||!u.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(u,h):this._createActiveSelection(u,h))},_updateActiveSelection:function(h,u){var i=this._activeObject,r=i._objects.slice(0);i.contains(h)?(i.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),u)):(i.addWithUpdate(h),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,u)},_createActiveSelection:function(h,u){var i=this.getActiveObjects(),r=this._createGroup(h);this._hoveredTarget=r,this._setActiveObject(r,u),this._fireSelectionEvents(i,u)},_createGroup:function(h){var u=this._objects,i=u.indexOf(this._activeObject)<u.indexOf(h),r=i?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new g.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(h){var u=this._collectObjects(h),i;u.length===1?this.setActiveObject(u[0],h):u.length>1&&(i=new g.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(i,h))},_collectObjects:function(h){for(var u=[],i,r=this._groupSelector.ex,n=this._groupSelector.ey,c=r+this._groupSelector.left,d=n+this._groupSelector.top,s=new g.Point(v(r,c),v(n,d)),p=new g.Point(a(r,c),a(n,d)),y=!this.selectionFullyContained,I=r===c&&n===d,_=this._objects.length;_--&&(i=this._objects[_],!(!(!i||!i.selectable||!i.visible)&&(y&&i.intersectsWithRect(s,p,!0)||i.isContainedWithinRect(s,p,!0)||y&&i.containsPoint(s,null,!0)||y&&i.containsPoint(p,null,!0))&&(u.push(i),I))););return u.length>1&&(u=u.filter(function(E){return!E.onSelect({e:h})})),u},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){g.util.object.extend(g.StaticCanvas.prototype,{toDataURL:function(v){v||(v={});var a=v.format||"png",h=v.quality||1,u=(v.multiplier||1)*(v.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(u,v);return g.util.toDataURL(i,a,h)},toCanvasElement:function(v,a){v=v||1,a=a||{};var h=(a.width||this.width)*v,u=(a.height||this.height)*v,i=this.getZoom(),r=this.width,n=this.height,c=i*v,d=this.viewportTransform,s=(d[4]-(a.left||0))*v,p=(d[5]-(a.top||0))*v,y=this.interactive,I=[c,0,0,c,s,p],_=this.enableRetinaScaling,E=g.util.createCanvasElement(),D=this.contextTop;return E.width=h,E.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=I,this.width=h,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(E.getContext("2d"),this._objects),this.viewportTransform=d,this.width=r,this.height=n,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=_,this.contextTop=D,E}})}(),g.util.object.extend(g.StaticCanvas.prototype,{loadFromJSON:function(v,a,h){if(!!v){var u=typeof v=="string"?JSON.parse(v):g.util.object.clone(v),i=this,r=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(c){i.clear(),i._setBgOverlay(u,function(){r?i._enlivenObjects([r],function(d){i.clipPath=d[0],i.__setupCanvas.call(i,u,c,n,a)}):i.__setupCanvas.call(i,u,c,n,a)})},h),this}},__setupCanvas:function(v,a,h,u){var i=this;a.forEach(function(r,n){i.insertAt(r,n)}),this.renderOnAddRemove=h,delete v.objects,delete v.backgroundImage,delete v.overlayImage,delete v.background,delete v.overlay,this._setOptions(v),this.renderAll(),u&&u()},_setBgOverlay:function(v,a){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!v.backgroundImage&&!v.overlayImage&&!v.background&&!v.overlay){a&&a();return}var u=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",v.backgroundImage,h,u),this.__setBgOverlay("overlayImage",v.overlayImage,h,u),this.__setBgOverlay("backgroundColor",v.background,h,u),this.__setBgOverlay("overlayColor",v.overlay,h,u)},__setBgOverlay:function(v,a,h,u){var i=this;if(!a){h[v]=!0,u&&u();return}v==="backgroundImage"||v==="overlayImage"?g.util.enlivenObjects([a],function(r){i[v]=r[0],h[v]=!0,u&&u()}):this["set"+g.util.string.capitalize(v,!0)](a,function(){h[v]=!0,u&&u()})},_enlivenObjects:function(v,a,h){if(!v||v.length===0){a&&a([]);return}g.util.enlivenObjects(v,function(u){a&&a(u)},null,h)},_toDataURL:function(v,a){this.clone(function(h){a(h.toDataURL(v))})},_toDataURLWithMultiplier:function(v,a,h){this.clone(function(u){h(u.toDataURLWithMultiplier(v,a))})},clone:function(v,a){var h=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(u){u.loadFromJSON(h,function(){v&&v(u)})})},cloneWithoutData:function(v){var a=g.util.createCanvasElement();a.width=this.width,a.height=this.height;var h=new g.Canvas(a);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),v&&v(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):v&&v(h)}}),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.util.object.clone,i=a.util.toFixed,r=a.util.string.capitalize,n=a.util.degreesToRadians,c=!a.isLikelyNode,d=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var p=a.perfLimitSizeTotal,y=s.width,I=s.height,_=a.maxCacheSideLimit,E=a.minCacheSideLimit;if(y<=_&&I<=_&&y*I<=p)return y<E&&(s.width=E),I<E&&(s.height=E),s;var D=y/I,L=a.util.limitDimsByArea(D,p),z=a.util.capValue,X=z(E,L.x,_),ut=z(E,L.y,_);return y>X&&(s.zoomX/=y/X,s.width=X,s.capped=!0),I>ut&&(s.zoomY/=I/ut,s.height=ut,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),y=p.x*s.scaleX/this.scaleX,I=p.y*s.scaleY/this.scaleY;return{width:y+d,height:I+d,zoomX:s.scaleX,zoomY:s.scaleY,x:y,y:I}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var p=s._currentTransform.target,y=s._currentTransform.action;if(this===p&&y.slice&&y.slice(0,5)==="scale")return!1}var I=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),E=a.minCacheSideLimit,D=_.width,L=_.height,z,X,ut=_.zoomX,rt=_.zoomY,Et=D!==this.cacheWidth||L!==this.cacheHeight,Q=this.zoomX!==ut||this.zoomY!==rt,St=Et||Q,j=0,jt=0,gt=!1;if(Et){var Nt=this._cacheCanvas.width,J=this._cacheCanvas.height,et=D>Nt||L>J,Z=(D<Nt*.9||L<J*.9)&&Nt>E&&J>E;gt=et||Z,et&&!_.capped&&(D>E||L>E)&&(j=D*.1,jt=L*.1)}return this instanceof a.Text&&this.path&&(St=!0,gt=!0,j+=this.getHeightOfLine(0)*this.zoomX,jt+=this.getHeightOfLine(0)*this.zoomY),St?(gt?(I.width=Math.ceil(D+j),I.height=Math.ceil(L+jt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,I.width,I.height)),z=_.x/2,X=_.y/2,this.cacheTranslationX=Math.round(I.width/2-z)+z,this.cacheTranslationY=Math.round(I.height/2-X)+X,this.cacheWidth=D,this.cacheHeight=L,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ut,rt),this.zoomX=ut,this.zoomY=rt,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,y=this.calcTransformMatrix(!p);s.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(s){var p=a.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:i(this.left,p),top:i(this.top,p),width:i(this.width,p),height:i(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,p),scaleX:i(this.scaleX,p),scaleY:i(this.scaleY,p),angle:i(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,p),skewY:i(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(s),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,y,s),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var p=a.util.getKlass(s.type).prototype,y=p.stateProperties;return y.forEach(function(I){if(!(I==="left"||I==="top")){s[I]===p[I]&&delete s[I];var _=Object.prototype.toString.call(s[I])==="[object Array]"&&Object.prototype.toString.call(p[I])==="[object Array]";_&&s[I].length===0&&p[I].length===0&&delete s[I]}}),s},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),p=s.scaleX,y=s.scaleY;if(this.canvas){var I=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();p*=I*_,y*=I*_}return{scaleX:p,scaleY:y}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,p){var y=s==="scaleX"||s==="scaleY",I=this[s]!==p,_=!1;return y&&(p=this._constrainScale(p)),s==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):s==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):s==="shadow"&&p&&!(p instanceof a.Shadow)?p=new a.Shadow(p):s==="dirty"&&this.group&&this.group.set("dirty",p),this[s]=p,I&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s){var p=this.clipPath;if(s.save(),p.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",p.absolutePositioned){var y=a.util.invertTransform(this.calcTransformMatrix());s.transform(y[0],y[1],y[2],y[3],y[4],y[5])}p.transform(s),s.scale(1/p.zoomX,1/p.zoomY),s.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),s.restore()},drawObject:function(s,p){var y=this.fill,I=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s),this.fill=y,this.stroke=I},_drawClipPath:function(s){var p=this.clipPath;!p||(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(s))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!s){var p=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-y/2,p,y)}return!0}return!1},_renderBackground:function(s){if(!!this.backgroundColor){var p=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,p){var y=p.stroke;y&&(s.lineWidth=p.strokeWidth,s.lineCap=p.strokeLineCap,s.lineDashOffset=p.strokeDashOffset,s.lineJoin=p.strokeLineJoin,s.miterLimit=p.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(s,y):(s.strokeStyle=y.toLive(s,this),this._applyPatternGradientTransform(s,y)):s.strokeStyle=p.stroke)},_setFillStyles:function(s,p){var y=p.fill;y&&(y.toLive?(s.fillStyle=y.toLive(s,this),this._applyPatternGradientTransform(s,p.fill)):s.fillStyle=y)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),s.setLineDash(p))},_renderControls:function(s,p){var y=this.getViewportTransform(),I=this.calcTransformMatrix(),_,E,D;p=p||{},E=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,D=typeof p.hasControls<"u"?p.hasControls:this.hasControls,I=a.util.multiplyTransformMatrices(y,I),_=a.util.qrDecompose(I),s.save(),s.translate(_.translateX,_.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),s.rotate(n(_.angle)),p.forActiveSelection||this.group?E&&this.drawBordersInGroup(s,_,p):E&&this.drawBorders(s,p),D&&this.drawControls(s,p),s.restore()},_setShadow:function(s){if(!!this.shadow){var p=this.shadow,y=this.canvas,I,_=y&&y.viewportTransform[0]||1,E=y&&y.viewportTransform[3]||1;p.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),y&&y._isRetinaScaling()&&(_*=a.devicePixelRatio,E*=a.devicePixelRatio),s.shadowColor=p.color,s.shadowBlur=p.blur*a.browserShadowBlurConstant*(_+E)*(I.scaleX+I.scaleY)/4,s.shadowOffsetX=p.offsetX*_*I.scaleX,s.shadowOffsetY=p.offsetY*E*I.scaleY}},_removeShadow:function(s){!this.shadow||(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var y=p.gradientTransform||p.patternTransform,I=-this.width/2+p.offsetX||0,_=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,I,_):s.transform(1,0,0,1,I,_),y&&s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:I,offsetY:_}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){!this.fill||(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();s.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,p){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),I=a.util.createCanvasElement(),_,E=this.canvas.getRetinaScaling(),D=y.x/this.scaleX/E,L=y.y/this.scaleY/E;I.width=D,I.height=L,_=I.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(D,0),_.lineTo(D,L),_.lineTo(0,L),_.closePath(),_.translate(D/2,L/2),_.scale(y.zoomX/this.scaleX/E,y.zoomY/this.scaleY/E),this._applyPatternGradientTransform(_,p),_.fillStyle=p.toLive(s),_.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(E*this.scaleX/y.zoomX,E*this.scaleY/y.zoomY),s.strokeStyle=_.createPattern(I,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=a.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,p.x+=s.offsetLeft,p.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(p,"center","center")},clone:function(s,p){var y=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(y,s):a.Object._fromObject("Object",y,s)},cloneAsImage:function(s,p){var y=this.toCanvasElement(p);return s&&s(new a.Image(y)),this},toCanvasElement:function(s){s||(s={});var p=a.util,y=p.saveObjectTransform(this),I=this.group,_=this.shadow,E=Math.abs,D=(s.multiplier||1)*(s.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,s.withoutTransform&&p.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var L=a.util.createCanvasElement(),z=this.getBoundingRect(!0,!0),X=this.shadow,ut,rt={x:0,y:0},Et,Q,St;X&&(Et=X.blur,X.nonScaling?ut={scaleX:1,scaleY:1}:ut=this.getObjectScaling(),rt.x=2*Math.round(E(X.offsetX)+Et)*E(ut.scaleX),rt.y=2*Math.round(E(X.offsetY)+Et)*E(ut.scaleY)),Q=z.width+rt.x,St=z.height+rt.y,L.width=Math.ceil(Q),L.height=Math.ceil(St);var j=new a.StaticCanvas(L,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(j.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(j.width/2,j.height/2),"center","center");var jt=this.canvas;j.add(this);var gt=j.toCanvasElement(D||1,s);return this.shadow=_,this.set("canvas",jt),I&&(this.group=I),this.set(y).setCoords(),j._objects=[],j.dispose(),j=null,gt},toDataURL:function(s){return s||(s={}),a.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",s),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,p){p=p||this.canvas.getPointer(s);var y=new a.Point(p.x,p.y),I=this._getLeftTopCoords();return this.angle&&(y=a.util.rotatePoint(y,I,n(-this.angle))),{x:y.x-I.x,y:y.y-I.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),h(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object._fromObject=function(s,p,y,I){var _=a[s];p=u(p,!0),a.util.enlivenPatterns([p.fill,p.stroke],function(E){typeof E[0]<"u"&&(p.fill=E[0]),typeof E[1]<"u"&&(p.stroke=E[1]),a.util.enlivenObjects([p.clipPath],function(D){p.clipPath=D[0];var L=I?new _(p[I],p):new _(p);y&&y(L)})})},a.Object.__uid=0)}(O),function(){var v=g.util.degreesToRadians,a={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};g.util.object.extend(g.Object.prototype,{translateToGivenOrigin:function(u,i,r,n,c){var d=u.x,s=u.y,p,y,I;return typeof i=="string"?i=a[i]:i-=.5,typeof n=="string"?n=a[n]:n-=.5,p=n-i,typeof r=="string"?r=h[r]:r-=.5,typeof c=="string"?c=h[c]:c-=.5,y=c-r,(p||y)&&(I=this._getTransformedDimensions(),d=u.x+p*I.x,s=u.y+y*I.y),new g.Point(d,s)},translateToCenterPoint:function(u,i,r){var n=this.translateToGivenOrigin(u,i,r,"center","center");return this.angle?g.util.rotatePoint(n,u,v(this.angle)):n},translateToOriginPoint:function(u,i,r){var n=this.translateToGivenOrigin(u,"center","center",i,r);return this.angle?g.util.rotatePoint(n,u,v(this.angle)):n},getCenterPoint:function(){var u=new g.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,i){var r=this.getCenterPoint();return this.translateToOriginPoint(r,u,i)},toLocalPoint:function(u,i,r){var n=this.getCenterPoint(),c,d;return typeof i<"u"&&typeof r<"u"?c=this.translateToGivenOrigin(n,"center","center",i,r):c=new g.Point(this.left,this.top),d=new g.Point(u.x,u.y),this.angle&&(d=g.util.rotatePoint(d,n,-v(this.angle))),d.subtractEquals(c)},setPositionByOrigin:function(u,i,r){var n=this.translateToCenterPoint(u,i,r),c=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(u){var i=v(this.angle),r=this.getScaledWidth(),n=g.util.cos(i)*r,c=g.util.sin(i)*r,d,s;typeof this.originX=="string"?d=a[this.originX]:d=this.originX-.5,typeof u=="string"?s=a[u]:s=u-.5,this.left+=n*(s-d),this.top+=c*(s-d),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function v(r){return[new g.Point(r.tl.x,r.tl.y),new g.Point(r.tr.x,r.tr.y),new g.Point(r.br.x,r.br.y),new g.Point(r.bl.x,r.bl.y)]}var a=g.util,h=a.degreesToRadians,u=a.multiplyTransformMatrices,i=a.transformPoint;a.object.extend(g.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(r,n){return n?r?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),r?this.aCoords:this.lineCoords)},getCoords:function(r,n){return v(this._getCoords(r,n))},intersectsWithRect:function(r,n,c,d){var s=this.getCoords(c,d),p=g.Intersection.intersectPolygonRectangle(s,r,n);return p.status==="Intersection"},intersectsWithObject:function(r,n,c){var d=g.Intersection.intersectPolygonPolygon(this.getCoords(n,c),r.getCoords(n,c));return d.status==="Intersection"||r.isContainedWithinObject(this,n,c)||this.isContainedWithinObject(r,n,c)},isContainedWithinObject:function(r,n,c){for(var d=this.getCoords(n,c),s=n?r.aCoords:r.lineCoords,p=0,y=r._getImageLines(s);p<4;p++)if(!r.containsPoint(d[p],y))return!1;return!0},isContainedWithinRect:function(r,n,c,d){var s=this.getBoundingRect(c,d);return s.left>=r.x&&s.left+s.width<=n.x&&s.top>=r.y&&s.top+s.height<=n.y},containsPoint:function(r,p,c,d){var s=this._getCoords(c,d),p=p||this._getImageLines(s),y=this._findCrossPoints(r,p);return y!==0&&y%2===1},isOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,d=this.getCoords(!0,r);return d.some(function(s){return s.x<=c.x&&s.x>=n.x&&s.y<=c.y&&s.y>=n.y})||this.intersectsWithRect(n,c,!0,r)?!0:this._containsCenterOfCanvas(n,c,r)},_containsCenterOfCanvas:function(r,n,c){var d={x:(r.x+n.x)/2,y:(r.y+n.y)/2};return!!this.containsPoint(d,null,!0,c)},isPartiallyOnScreen:function(r){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,c,!0,r))return!0;var d=this.getCoords(!0,r).every(function(s){return(s.x>=c.x||s.x<=n.x)&&(s.y>=c.y||s.y<=n.y)});return d&&this._containsCenterOfCanvas(n,c,r)},_getImageLines:function(r){var n={topline:{o:r.tl,d:r.tr},rightline:{o:r.tr,d:r.br},bottomline:{o:r.br,d:r.bl},leftline:{o:r.bl,d:r.tl}};return n},_findCrossPoints:function(r,n){var c,d,s,p,y,I=0,_;for(var E in n)if(_=n[E],!(_.o.y<r.y&&_.d.y<r.y)&&!(_.o.y>=r.y&&_.d.y>=r.y)&&(_.o.x===_.d.x&&_.o.x>=r.x?y=_.o.x:(c=0,d=(_.d.y-_.o.y)/(_.d.x-_.o.x),s=r.y-c*r.x,p=_.o.y-d*_.o.x,y=-(s-p)/(c-d)),y>=r.x&&(I+=1),I===2))break;return I},getBoundingRect:function(r,n){var c=this.getCoords(r,n);return a.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(r){return Math.abs(r)<this.minScaleLimit?r<0?-this.minScaleLimit:this.minScaleLimit:r===0?1e-4:r},scale:function(r){return this._set("scaleX",r),this._set("scaleY",r),this.setCoords()},scaleToWidth:function(r,n){var c=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(r/this.width/c)},scaleToHeight:function(r,n){var c=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(r/this.height/c)},calcCoords:function(r){return r?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var r=this.getViewportTransform(),n=this.padding,c=h(this.angle),d=a.cos(c),s=a.sin(c),p=d*n,y=s*n,I=p+y,_=p-y,E=this.calcACoords(),D={tl:i(E.tl,r),tr:i(E.tr,r),bl:i(E.bl,r),br:i(E.br,r)};return n&&(D.tl.x-=_,D.tl.y-=I,D.tr.x+=I,D.tr.y-=_,D.bl.x-=I,D.bl.y+=_,D.br.x+=_,D.br.y+=I),D},calcOCoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),c=this.getViewportTransform(),d=u(c,n),s=u(d,r),s=u(s,[1/c[0],0,0,1/c[3],0,0]),p=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(I,_,E){y[_]=I.positionHandler(p,s,E)}),y},calcACoords:function(){var r=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),c=u(n,r),d=this._getTransformedDimensions(),s=d.x/2,p=d.y/2;return{tl:i({x:-s,y:-p},c),tr:i({x:s,y:-p},c),bl:i({x:-s,y:p},c),br:i({x:s,y:p},c)}},setCoords:function(r){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),r?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var r=this.getCenterPoint();return[1,0,0,1,r.x,r.y]},transformMatrixKey:function(r){var n="_",c="";return!r&&this.group&&(c=this.group.transformMatrixKey(r)+n),c+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(r){var n=this.calcOwnMatrix();if(r||!this.group)return n;var c=this.transformMatrixKey(r),d=this.matrixCache||(this.matrixCache={});return d.key===c?d.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),d.key=c,d.value=n,n)},calcOwnMatrix:function(){var r=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===r)return n.value;var c=this._calcTranslateMatrix(),d={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=r,n.value=a.composeMatrix(d),n.value},_calcDimensionsTransformMatrix:function(r,n,c){return a.calcDimensionsMatrix({skewX:r,skewY:n,scaleX:this.scaleX*(c&&this.flipX?-1:1),scaleY:this.scaleY*(c&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var r=this.strokeWidth,n=this.width+r,c=this.height+r;return{x:n,y:c}},_getTransformedDimensions:function(r,n){typeof r>"u"&&(r=this.skewX),typeof n>"u"&&(n=this.skewY);var c,d,s,p=r===0&&n===0;if(this.strokeUniform?(d=this.width,s=this.height):(c=this._getNonTransformedDimensions(),d=c.x,s=c.y),p)return this._finalizeDimensions(d*this.scaleX,s*this.scaleY);var y=a.sizeAfterTransform(d,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:r,skewY:n});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(r,n){return this.strokeUniform?{x:r+this.strokeWidth,y:n+this.strokeWidth}:{x:r,y:n}},_calculateCurrentDimensions:function(){var r=this.getViewportTransform(),n=this._getTransformedDimensions(),c=i(n,r,!0);return c.scalarAdd(2*this.padding)}})}(),g.util.object.extend(g.Object.prototype,{sendToBack:function(){return this.group?g.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?g.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(v){return this.group?g.StaticCanvas.prototype.sendBackwards.call(this.group,this,v):this.canvas&&this.canvas.sendBackwards(this,v),this},bringForward:function(v){return this.group?g.StaticCanvas.prototype.bringForward.call(this.group,this,v):this.canvas&&this.canvas.bringForward(this,v),this},moveTo:function(v){return this.group&&this.group.type!=="activeSelection"?g.StaticCanvas.prototype.moveTo.call(this.group,this,v):this.canvas&&this.canvas.moveTo(this,v),this}}),function(){function v(h,u){if(u){if(u.toLive)return h+": url(#SVGID_"+u.id+"); ";var i=new g.Color(u),r=h+": "+i.toRgb()+"; ",n=i.getAlpha();return n!==1&&(r+=h+"-opacity: "+n.toString()+"; "),r}else return h+": none; "}var a=g.util.toFixed;g.util.object.extend(g.Object.prototype,{getSvgStyles:function(h){var u=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",I=h?"":this.getSvgFilter(),_=v("fill",this.fill),E=v("stroke",this.stroke);return[E,"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",s,"; ",_,"fill-rule: ",u,"; ","opacity: ",p,";",I,y].join("")},getSvgSpanStyles:function(h,u){var i="; ",n=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+i:"",r=h.strokeWidth?"stroke-width: "+h.strokeWidth+i:"",n=n,c=h.fontSize?"font-size: "+h.fontSize+"px"+i:"",d=h.fontStyle?"font-style: "+h.fontStyle+i:"",s=h.fontWeight?"font-weight: "+h.fontWeight+i:"",p=h.fill?v("fill",h.fill):"",y=h.stroke?v("stroke",h.stroke):"",I=this.getSvgTextDecoration(h),_=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return I&&(I="text-decoration: "+I+i),[y,r,n,c,d,s,I,p,_,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(u){return h[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,u){var i=h?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+g.util.matrixToSVG(i);return r+(u||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var u=g.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,u),'" y="',a(-this.height/2,u),'" width="',a(this.width,u),'" height="',a(this.height,u),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,u){u=u||{};var i=u.reviver,r=u.additionalTransform||"",n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),c=h.indexOf("COMMON_PARTS");return h[c]=n,i?i(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,u){u=u||{};var i=u.noStyle,r=u.reviver,n=i?"":'style="'+this.getSvgStyles()+'" ',c=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",d=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=d&&d.absolutePositioned,y=this.stroke,I=this.fill,_=this.shadow,E,D=[],L,z=h.indexOf("COMMON_PARTS"),X=u.additionalTransform;return d&&(d.clipPathId="CLIPPATH_"+g.Object.__uid++,L='<clipPath id="'+d.clipPathId+`" >
`+d.toClipPathSVG(r)+`</clipPath>
`),p&&D.push("<g ",c,this.getSvgCommons(),` >
`),D.push("<g ",this.getSvgTransform(!1),p?"":c+this.getSvgCommons(),` >
`),E=[n,s,i?"":this.addPaintOrder()," ",X?'transform="'+X+'" ':""].join(""),h[z]=E,I&&I.toLive&&D.push(I.toSVG(this)),y&&y.toLive&&D.push(y.toSVG(this)),_&&D.push(_.toSVG(this)),d&&D.push(L),D.push(h.join("")),D.push(`</g>
`),p&&D.push(`</g>
`),r?r(D.join("")):D.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var v=g.util.object.extend,a="stateProperties";function h(i,r,n){var c={},d=!0;n.forEach(function(s){c[s]=i[s]}),v(i[r],c,d)}function u(i,r,n){if(i===r)return!0;if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(var c=0,d=i.length;c<d;c++)if(!u(i[c],r[c]))return!1;return!0}else if(i&&typeof i=="object"){var s=Object.keys(i),p;if(!r||typeof r!="object"||!n&&s.length!==Object.keys(r).length)return!1;for(var c=0,d=s.length;c<d;c++)if(p=s[c],!(p==="canvas"||p==="group")&&!u(i[p],r[p]))return!1;return!0}}g.util.object.extend(g.Object.prototype,{hasStateChanged:function(i){i=i||a;var r="_"+i;return Object.keys(this[r]).length<this[i].length?!0:!u(this[r],this,!0)},saveState:function(i){var r=i&&i.propertySet||a,n="_"+r;return this[n]?(h(this,n,this[r]),i&&i.stateProperties&&h(this,n,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var r=i.propertySet||a;return i.propertySet=r,this["_"+r]={},this.saveState(i),this}})}(),function(){var v=g.util.degreesToRadians;g.util.object.extend(g.Object.prototype,{_findTargetCorner:function(a,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=a.x,i=a.y,r,n,c=Object.keys(this.oCoords),d=c.length-1,s;for(this.__corner=0;d>=0;d--)if(s=c[d],!!this.isControlVisible(s)&&(n=this._getImageLines(h?this.oCoords[s].touchCorner:this.oCoords[s].corner),r=this._findCrossPoints({x:u,y:i},n),r!==0&&r%2===1))return this.__corner=s,s;return!1},forEachControl:function(a){for(var h in this.controls)a(this.controls[h],h,this)},_setCornerCoords:function(){var a=this.oCoords;for(var h in a){var u=this.controls[h];a[h].corner=u.calcCornerCoords(this.angle,this.cornerSize,a[h].x,a[h].y,!1),a[h].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,a[h].x,a[h].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var h=this.getCenterPoint(),u=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return a.translate(h.x,h.y),a.scale(1/i[0],1/i[3]),a.rotate(v(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-u.x/2,-u.y/2,u.x,u.y),a.restore(),this},drawBorders:function(a,h){h=h||{};var u=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=u.x+i,n=u.y+i,c=typeof h.hasControls<"u"?h.hasControls:this.hasControls,d=!1;return a.save(),a.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(a,h.borderDashArray||this.borderDashArray),a.strokeRect(-r/2,-n/2,r,n),c&&(a.beginPath(),this.forEachControl(function(s,p,y){s.withConnection&&s.getVisibility(y,p)&&(d=!0,a.moveTo(s.x*r,s.y*n),a.lineTo(s.x*r+s.offsetX,s.y*n+s.offsetY))}),d&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,h,u){u=u||{};var i=g.util.sizeAfterTransform(this.width,this.height,h),r=this.strokeWidth,n=this.strokeUniform,c=this.borderScaleFactor,d=i.x+r*(n?this.canvas.getZoom():h.scaleX)+c,s=i.y+r*(n?this.canvas.getZoom():h.scaleY)+c;return a.save(),this._setLineDash(a,u.borderDashArray||this.borderDashArray),a.strokeStyle=u.borderColor||this.borderColor,a.strokeRect(-d/2,-s/2,d,s),a.restore(),this},drawControls:function(a,h){h=h||{},a.save();var u=this.canvas.getRetinaScaling(),i,r;return a.setTransform(u,0,0,u,0,0),a.strokeStyle=a.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl(function(n,c,d){r=d.oCoords[c],n.getVisibility(d,c)&&(i&&(r=g.util.transformPoint(r,i)),n.render(a,r.x,r.y,h,d))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=h,this},setControlsVisibility:function(a){a||(a={});for(var h in a)this.setControlVisible(h,a[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),g.util.object.extend(g.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(v,a){a=a||{};var h=function(){},u=a.onComplete||h,i=a.onChange||h,r=this;return g.util.animate({startValue:v.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(n){v.set("left",n),r.requestRenderAll(),i()},onComplete:function(){v.setCoords(),u()}}),this},fxCenterObjectV:function(v,a){a=a||{};var h=function(){},u=a.onComplete||h,i=a.onChange||h,r=this;return g.util.animate({startValue:v.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(n){v.set("top",n),r.requestRenderAll(),i()},onComplete:function(){v.setCoords(),u()}}),this},fxRemove:function(v,a){a=a||{};var h=function(){},u=a.onComplete||h,i=a.onChange||h,r=this;return g.util.animate({startValue:v.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){v.set("opacity",n),r.requestRenderAll(),i()},onComplete:function(){r.remove(v),u()}}),this}}),g.util.object.extend(g.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var v=[],a,h;for(a in arguments[0])v.push(a);for(var u=0,i=v.length;u<i;u++)a=v[u],h=u!==i-1,this._animate(a,arguments[0][a],arguments[1],h)}else this._animate.apply(this,arguments);return this},_animate:function(v,a,h,u){var i=this,r;a=a.toString(),h?h=g.util.object.clone(h):h={},~v.indexOf(".")&&(r=v.split("."));var n=i.colorProperties.indexOf(v)>-1||r&&i.colorProperties.indexOf(r[1])>-1,c=r?this.get(r[0])[r[1]]:this.get(v);"from"in h||(h.from=c),n||(~a.indexOf("=")?a=c+parseFloat(a.replace("=","")):a=parseFloat(a));var d={startValue:h.from,endValue:a,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(s,p,y){return h.abort.call(i,s,p,y)},onChange:function(s,p,y){r?i[r[0]][r[1]]=s:i.set(v,s),!u&&h.onChange&&h.onChange(s,p,y)},onComplete:function(s,p,y){u||(i.setCoords(),h.onComplete&&h.onComplete(s,p,y))}};return n?g.util.animateColor(d.startValue,d.endValue,d.duration,d):g.util.animate(d)}}),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,c){n||(n=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(c)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,c){return this.callSuper("_set",n,c),typeof i[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var c=this.calcLinePoints();n.moveTo(c.x1,c.y1),n.lineTo(c.x2,c.y2),n.lineWidth=this.strokeWidth;var d=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=d},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return h(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1,d=n*this.width*.5,s=c*this.height*.5,p=n*this.width*-.5,y=c*this.height*-.5;return{x1:d,x2:p,y1:s,y2:y}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(n,c,d){d=d||{};var s=a.parseAttributes(n,a.Line.ATTRIBUTE_NAMES),p=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];c(new a.Line(p,h(s,d)))},a.Line.fromObject=function(n,c){function d(p){delete p.points,c&&c(p)}var s=u(n,!0);s.points=[n.x1,n.y1,n.x2,n.y2],a.Object._fromObject("Line",s,d,"points")};function r(n,c){var d=n.origin,s=n.axis1,p=n.axis2,y=n.dimension,I=c.nearest,_=c.center,E=c.farthest;return function(){switch(this.get(d)){case I:return Math.min(this.get(s),this.get(p));case _:return Math.min(this.get(s),this.get(p))+.5*this.get(y);case E:return Math.max(this.get(s),this.get(p))}}}}(O),function(v){var a=v.fabric||(v.fabric={}),h=Math.PI;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:h*2,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,r){return this.callSuper("_set",i,r),i==="radius"&&this.setRadius(r),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,r=0,n=0,c=(this.endAngle-this.startAngle)%(2*h);if(c===0)i=["<circle ","COMMON_PARTS",'cx="'+r+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var d=a.util.cos(this.startAngle)*this.radius,s=a.util.sin(this.startAngle)*this.radius,p=a.util.cos(this.endAngle)*this.radius,y=a.util.sin(this.endAngle)*this.radius,I=c>h?"1":"0";i=['<path d="M '+d+" "+s," A "+this.radius+" "+this.radius," 0 ",+I+" 1"," "+p+" "+y,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(i,r){var n=a.parseAttributes(i,a.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,r(new a.Circle(n))};function u(i){return"radius"in i&&i.radius>=0}a.Circle.fromObject=function(i,r){a.Object._fromObject("Circle",i,r)}}(O),function(v){var a=v.fabric||(v.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(h){var u=this.width/2,i=this.height/2;h.beginPath(),h.moveTo(-u,i),h.lineTo(0,-i),h.lineTo(u,i),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,u=this.height/2,i=[-h+" "+u,"0 "+-u,h+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),a.Triangle.fromObject=function(h,u){return a.Object._fromObject("Triangle",h,u)}}(O),function(v){var a=v.fabric||(v.fabric={}),h=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,i){switch(this.callSuper("_set",u,i),u){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,h,!1),u.restore(),this._renderPaintInOrder(u)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(u,i){var r=a.parseAttributes(u,a.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,i(new a.Ellipse(r))},a.Ellipse.fromObject=function(u,i){a.Object._fromObject("Ellipse",u,i)}}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var i=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,c=this.height,d=-this.width/2,s=-this.height/2,p=i!==0||r!==0,y=1-.5522847498;u.beginPath(),u.moveTo(d+i,s),u.lineTo(d+n-i,s),p&&u.bezierCurveTo(d+n-y*i,s,d+n,s+y*r,d+n,s+r),u.lineTo(d+n,s+c-r),p&&u.bezierCurveTo(d+n,s+c-y*r,d+n-y*i,s+c,d+n-i,s+c),u.lineTo(d+i,s+c),p&&u.bezierCurveTo(d+y*i,s+c,d,s+c-y*r,d,s+c-r),u.lineTo(d,s+r),p&&u.bezierCurveTo(d,s+y*r,d+y*i,s,d+i,s),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(u,i,r){if(!u)return i(null);r=r||{};var n=a.parseAttributes(u,a.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var c=new a.Rect(h(r?a.util.object.clone(r):{},n));c.visible=c.visible&&c.width>0&&c.height>0,i(c)},a.Rect.fromObject=function(u,i){return a.Object._fromObject("Rect",u,i)}}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.util.array.min,i=a.util.array.max,r=a.util.toFixed;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(n,c){c=c||{},this.points=n||[],this.callSuper("initialize",c),this._setPositionDimensions(c)},_setPositionDimensions:function(n){var c=this._calcDimensions(n),d;this.width=c.width,this.height=c.height,n.fromSVG||(d=this.translateToGivenOrigin({x:c.left-this.strokeWidth/2,y:c.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof n.left>"u"&&(this.left=n.fromSVG?c.left:d.x),typeof n.top>"u"&&(this.top=n.fromSVG?c.top:d.y),this.pathOffset={x:c.left+this.width/2,y:c.top+this.height/2}},_calcDimensions:function(){var n=this.points,c=u(n,"x")||0,d=u(n,"y")||0,s=i(n,"x")||0,p=i(n,"y")||0,y=s-c,I=p-d;return{left:c,top:d,width:y,height:I}},toObject:function(n){return h(this.callSuper("toObject",n),{points:this.points.concat()})},_toSVG:function(){for(var n=[],c=this.pathOffset.x,d=this.pathOffset.y,s=a.Object.NUM_FRACTION_DIGITS,p=0,y=this.points.length;p<y;p++)n.push(r(this.points[p].x-c,s),",",r(this.points[p].y-d,s)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',n.join(""),`" />
`]},commonRender:function(n){var c,d=this.points.length,s=this.pathOffset.x,p=this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;n.beginPath(),n.moveTo(this.points[0].x-s,this.points[0].y-p);for(var y=0;y<d;y++)c=this.points[y],n.lineTo(c.x-s,c.y-p);return!0},_render:function(n){!this.commonRender(n)||this._renderPaintInOrder(n)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(n){return function(c,d,s){if(!c)return d(null);s||(s={});var p=a.parsePointsAttribute(c.getAttribute("points")),y=a.parseAttributes(c,a[n].ATTRIBUTE_NAMES);y.fromSVG=!0,d(new a[n](p,h(y,s)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(n,c){return a.Object._fromObject("Polyline",n,c,"points")}}(O),function(v){var a=v.fabric||(v.fabric={});if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_render:function(h){!this.commonRender(h)||(h.closePath(),this._renderPaintInOrder(h))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(h,u){a.Object._fromObject("Polygon",h,u,"points")}}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.array.min,u=a.util.array.max,i=a.util.object.extend,r=Object.prototype.toString,n=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(c,d){d=d||{},this.callSuper("initialize",d),c||(c=[]);var s=r.call(c)==="[object Array]";this.path=a.util.makePathSimpler(s?c:a.util.parsePath(c)),this.path&&a.Polyline.prototype._setPositionDimensions.call(this,d)},_renderPathCommands:function(c){var d,s=0,p=0,y=0,I=0,_=0,E=0,D=-this.pathOffset.x,L=-this.pathOffset.y;c.beginPath();for(var z=0,X=this.path.length;z<X;++z)switch(d=this.path[z],d[0]){case"L":y=d[1],I=d[2],c.lineTo(y+D,I+L);break;case"M":y=d[1],I=d[2],s=y,p=I,c.moveTo(y+D,I+L);break;case"C":y=d[5],I=d[6],_=d[3],E=d[4],c.bezierCurveTo(d[1]+D,d[2]+L,_+D,E+L,y+D,I+L);break;case"Q":c.quadraticCurveTo(d[1]+D,d[2]+L,d[3]+D,d[4]+L),y=d[3],I=d[4],_=d[1],E=d[2];break;case"z":case"Z":y=s,I=p,c.closePath();break}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return i(this.callSuper("toObject",c),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(c){var d=this.toObject(["sourcePath"].concat(c));return d.sourcePath&&delete d.path,d},_toSVG:function(){var c=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',c,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var c=a.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,c)+", "+n(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:d})},toSVG:function(c){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:d})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c=[],d=[],s,p=0,y=0,I=0,_=0,E,D=0,L=this.path.length;D<L;++D){switch(s=this.path[D],s[0]){case"L":I=s[1],_=s[2],E=[];break;case"M":I=s[1],_=s[2],p=I,y=_,E=[];break;case"C":E=a.util.getBoundsOfCurve(I,_,s[1],s[2],s[3],s[4],s[5],s[6]),I=s[5],_=s[6];break;case"Q":E=a.util.getBoundsOfCurve(I,_,s[1],s[2],s[1],s[2],s[3],s[4]),I=s[3],_=s[4];break;case"z":case"Z":I=p,_=y;break}E.forEach(function(St){c.push(St.x),d.push(St.y)}),c.push(I),d.push(_)}var z=h(c)||0,X=h(d)||0,ut=u(c)||0,rt=u(d)||0,Et=ut-z,Q=rt-X;return{left:z,top:X,width:Et,height:Q}}}),a.Path.fromObject=function(c,d){if(typeof c.sourcePath=="string"){var s=c.sourcePath;a.loadSVGFromURL(s,function(p){var y=p[0];y.setOptions(c),d&&d(y)})}else a.Object._fromObject("Path",c,d,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(c,d,s){var p=a.parseAttributes(c,a.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,d(new a.Path(p.d,i(p,s)))}}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.array.min,u=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,r,n){r=r||{},this._objects=[],n&&this.callSuper("initialize",r),this._objects=i||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(n)this._updateObjectsACoords();else{var d=r&&r.centerPoint;r.originX!==void 0&&(this.originX=r.originX),r.originY!==void 0&&(this.originY=r.originY),d||this._calcBounds(),this._updateObjectsCoords(d),delete r.centerPoint,this.callSuper("initialize",r)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,r=this._objects.length;r--;)this._objects[r].setCoords(i)},_updateObjectsCoords:function(r){for(var r=r||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],r)},_updateObjectCoords:function(i,r){var n=i.left,c=i.top,d=!0;i.set({left:n-r.x,top:c-r.y}),i.group=this,i.setCoords(d)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var r=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),i&&(r&&a.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,r?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,r){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(i,r);if(i==="canvas")for(;n--;)this._objects[n]._set(i,r);a.Object.prototype._set.call(this,i,r)},toObject:function(i){var r=this.includeDefaultValues,n=this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){var s=d.includeDefaultValues;d.includeDefaultValues=r;var p=d.toObject(i);return d.includeDefaultValues=s,p}),c=a.Object.prototype.toObject.call(this,i);return c.objects=n,c},toDatalessObject:function(i){var r,n=this.sourcePath;if(n)r=n;else{var c=this.includeDefaultValues;r=this._objects.map(function(s){var p=s.includeDefaultValues;s.includeDefaultValues=c;var y=s.toDatalessObject(i);return s.includeDefaultValues=p,y})}var d=a.Object.prototype.toDatalessObject.call(this,i);return d.objects=r,d},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=a.Object.prototype.shouldCache.call(this);if(i){for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var r=0,n=this._objects.length;r<n;r++)this._objects[r].render(i);this._drawClipPath(i)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var r=0,n=this._objects.length;r<n;r++)if(this._objects[r].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-d/2,c,d)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(r){a.util.addTransformToObject(r,i),delete r.group,r.setCoords()}),this},realizeTransform:function(i,r){return a.util.addTransformToObject(i,r),i},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var i=this._objects,r=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var c=new a.ActiveSelection([]);return c.set(n),c.type="activeSelection",r.remove(this),i.forEach(function(d){d.group=c,d.dirty=!0,r.add(d)}),c.canvas=r,c._objects=i,r._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(r){r.setCoords(i)}),this},_calcBounds:function(i){for(var r=[],n=[],c,d,s,p=["tr","br","bl","tl"],y=0,I=this._objects.length,_,E=p.length;y<I;++y){for(c=this._objects[y],s=c.calcACoords(),_=0;_<E;_++)d=p[_],r.push(s[d].x),n.push(s[d].y);c.aCoords=s}this._getBounds(r,n,i)},_getBounds:function(i,r,n){var c=new a.Point(h(i),h(r)),d=new a.Point(u(i),u(r)),s=c.y||0,p=c.x||0,y=d.x-c.x||0,I=d.y-c.y||0;this.width=y,this.height=I,n||this.setPositionByOrigin({x:p,y:s},"left","top")},_toSVG:function(i){for(var r=["<g ","COMMON_PARTS",` >
`],n=0,c=this._objects.length;n<c;n++)r.push("		",this._objects[n].toSVG(i));return r.push(`</g>
`),r},getSvgStyles:function(){var i=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",r=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),r].join("")},toClipPathSVG:function(i){for(var r=[],n=0,c=this._objects.length;n<c;n++)r.push("	",this._objects[n].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(r,{reviver:i})}}),a.Group.fromObject=function(i,r){var n=i.objects,c=a.util.object.clone(i,!0);if(delete c.objects,typeof n=="string"){a.loadSVGFromURL(n,function(d){var s=a.util.groupSVGElements(d,i,n);s.set(c),r&&r(s)});return}a.util.enlivenObjects(n,function(d){a.util.enlivenObjects([i.clipPath],function(s){var p=a.util.object.clone(i,!0);p.clipPath=s[0],delete p.objects,r&&r(new a.Group(d,p,!0))})})})}(O),function(v){var a=v.fabric||(v.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(h,u){u=u||{},this._objects=h||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var u=a.Object.prototype.toObject.call(this),i=new a.Group([]);if(delete u.type,i.set(u),h.forEach(function(n){n.canvas.remove(n),n.group=i}),i._objects=h,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,u,i){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",h,u),i=i||{},typeof i.hasControls>"u"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(h,i);h.restore()}}),a.ActiveSelection.fromObject=function(h,u){a.util.enlivenObjects(h.objects,function(i){delete h.objects,u&&u(new a.ActiveSelection(i,h,!0))})})}(O),function(v){var a=g.util.object.extend;if(v.fabric||(v.fabric={}),v.fabric.Image){g.warn("fabric.Image is already defined.");return}g.Image=g.util.createClass(g.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:g.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:g.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,u){u||(u={}),this.filters=[],this.cacheKey="texture"+g.Object.__uid++,this.callSuper("initialize",u),this._initElement(h,u)},getElement:function(){return this._element||{}},setElement:function(h,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var u=g.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(h)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(h){g.util.cleanUpJsdomNode(this[h]),this[h]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,i=this.height/2;h.beginPath(),h.moveTo(-u,-i),h.lineTo(u,-i),h.lineTo(u,i),h.lineTo(-u,i),h.lineTo(-u,-i),h.closePath()}},toObject:function(h){var u=[];this.filters.forEach(function(r){r&&u.push(r.toObject())});var i=a(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],u=[],i,r=this._element,n=-this.width/2,c=-this.height/2,d="",s="";if(!r)return[];if(this.hasCrop()){var p=g.Object.__uid++;h.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+n+'" y="'+c+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',c-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,s,'"',d,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,i=["	<rect ",'x="',n,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?h=h.concat(i,u):h=h.concat(u,i),h},getSrc:function(h){var u=h?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(h,u,i){return g.util.loadImage(h,function(r,n){this.setElement(r,i),this._setWidthHeight(),u&&u(this,n)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,u=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,n=i.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||r>u&&n>u){this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,this._lastScaleY=n;return}g.filterBackend||(g.filterBackend=g.initFilterBackend());var d=g.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=c.width,y=c.height;d.width=p,d.height=y,this._element=d,this._lastScaleX=h.scaleX=r,this._lastScaleY=h.scaleY=n,g.filterBackend.applyFilters([h],c,p,y,this._element,s),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,i=u.naturalWidth||u.width,r=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=g.util.createCanvasElement();n.width=i,n.height=r,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1;return g.filterBackend||(g.filterBackend=g.initFilterBackend()),g.filterBackend.applyFilters(h,this._originalElement,i,r,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){g.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){g.util.setImageSmoothing(h,this.imageSmoothing),g.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var u=this._element;if(!!u){var i=this._filterScalingX,r=this._filterScalingY,n=this.width,c=this.height,d=Math.min,s=Math.max,p=s(this.cropX,0),y=s(this.cropY,0),I=u.naturalWidth||u.width,_=u.naturalHeight||u.height,E=p*i,D=y*r,L=d(n*i,I-E),z=d(c*r,_-D),X=-n/2,ut=-c/2,rt=d(n,I/i-p),Et=d(c,_/r-y);u&&h.drawImage(u,E,D,L,z,X,ut,rt,Et)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,u){this.setElement(g.util.getById(h),u),g.util.addClass(this.getElement(),g.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,u){h&&h.length?g.util.enlivenObjects(h,function(i){u&&u(i)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(h){h||(h={});var u=this.getElement();this.width=h.width||u.naturalWidth||u.width||0,this.height=h.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var h=g.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,i=this._element.height,r=1,n=1,c=0,d=0,s=0,p=0,y,I=this.width,_=this.height,E={width:I,height:_};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(r=n=g.util.findScaleToFit(this._element,E),y=(I-u*r)/2,h.alignX==="Min"&&(c=-y),h.alignX==="Max"&&(c=y),y=(_-i*n)/2,h.alignY==="Min"&&(d=-y),h.alignY==="Max"&&(d=y)),h.meetOrSlice==="slice"&&(r=n=g.util.findScaleToCover(this._element,E),y=u-I/r,h.alignX==="Mid"&&(s=y/2),h.alignX==="Max"&&(s=y),y=i-_/n,h.alignY==="Mid"&&(p=y/2),h.alignY==="Max"&&(p=y),u=I/r,i=_/n)):(r=I/u,n=_/i),{width:u,height:i,scaleX:r,scaleY:n,offsetLeft:c,offsetTop:d,cropX:s,cropY:p}}}),g.Image.CSS_CANVAS="canvas-img",g.Image.prototype.getSvgSrc=g.Image.prototype.getSrc,g.Image.fromObject=function(h,u){var i=g.util.object.clone(h);g.util.loadImage(i.src,function(r,n){if(n){u&&u(null,!0);return}g.Image.prototype._initFilters.call(i,i.filters,function(c){i.filters=c||[],g.Image.prototype._initFilters.call(i,[i.resizeFilter],function(d){i.resizeFilter=d[0],g.util.enlivenObjects([i.clipPath],function(s){i.clipPath=s[0];var p=new g.Image(r,i);u(p,!1)})})})},null,i.crossOrigin)},g.Image.fromURL=function(h,u,i){g.util.loadImage(h,function(r,n){u&&u(new g.Image(r,i),n)},null,i&&i.crossOrigin)},g.Image.ATTRIBUTE_NAMES=g.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),g.Image.fromElement=function(h,u,i){var r=g.parseAttributes(h,g.Image.ATTRIBUTE_NAMES);g.Image.fromURL(r["xlink:href"],u,a(i?g.util.object.clone(i):{},r))}}(O),g.util.object.extend(g.Object.prototype,{_getAngleValueForStraighten:function(){var v=this.angle%360;return v>0?Math.round((v-1)/90)*90:Math.round(v/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(v){v=v||{};var a=function(){},h=v.onComplete||a,u=v.onChange||a,i=this;return g.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(r){i.rotate(r),u()},onComplete:function(){i.setCoords(),h()}}),this}}),g.util.object.extend(g.StaticCanvas.prototype,{straightenObject:function(v){return v.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(v){return v.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function v(h,u){var i="precision "+u+` float;
void main(){}`,r=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(r,i),h.compileShader(r),!!h.getShaderParameter(r,h.COMPILE_STATUS)}g.isWebglSupported=function(h){if(g.isLikelyNode)return!1;h=h||g.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),i=u.getContext("webgl")||u.getContext("experimental-webgl"),r=!1;if(i){g.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=g.maxTextureSize>=h;for(var n=["highp","mediump","lowp"],c=0;c<3;c++)if(v(i,n[c])){g.webGlPrecision=n[c];break}}return this.isSupported=r,r},g.WebglFilterBackend=a;function a(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(h,u){this.dispose(),this.createWebGLCanvas(h,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,u)},chooseFastestCopyGLTo2DMethod:function(h,u){var i=typeof window.performance<"u",r;try{new ImageData(1,1),r=!0}catch{r=!1}var n=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(!!(i&&r&&n&&c)){var d=g.util.createCanvasElement(),s=new ArrayBuffer(h*u*4);if(g.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=W;return}var p={imageBuffer:s,destinationWidth:h,destinationHeight:u,targetCanvas:d},y,I,_;d.width=h,d.height=u,y=window.performance.now(),F.call(p,this.gl,p),I=window.performance.now()-y,y=window.performance.now(),W.call(p,this.gl,p),_=window.performance.now()-y,I>_?(this.imageBuffer=s,this.copyGLTo2D=W):this.copyGLTo2D=F}},createWebGLCanvas:function(h,u){var i=g.util.createCanvasElement();i.width=h,i.height=u;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=i.getContext("webgl",r);n||(n=i.getContext("experimental-webgl",r)),n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)},applyFilters:function(h,u,i,r,n,c){var d=this.gl,s;c&&(s=this.getCachedTexture(c,u));var p={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:d,sourceTexture:this.createTexture(d,i,r,!s&&u),targetTexture:this.createTexture(d,i,r),originalTexture:s||this.createTexture(d,i,r,!s&&u),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},y=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,y),h.forEach(function(I){I&&I.applyTo(p)}),R(p),this.copyGLTo2D(d,p),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(p.sourceTexture),d.deleteTexture(p.targetTexture),d.deleteFramebuffer(y),n.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,u,i,r){var n=h.createTexture();return h.bindTexture(h.TEXTURE_2D,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),r?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,r):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,u,i,0,h.RGBA,h.UNSIGNED_BYTE,null),n},getCachedTexture:function(h,u){if(this.textureCache[h])return this.textureCache[h];var i=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[h]=i,i},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:F,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,u={renderer:"",vendor:""};if(!h)return u;var i=h.getExtension("WEBGL_debug_renderer_info");if(i){var r=h.getParameter(i.UNMASKED_RENDERER_WEBGL),n=h.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(u.renderer=r.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function R(v){var a=v.targetCanvas,h=a.width,u=a.height,i=v.destinationWidth,r=v.destinationHeight;(h!==i||u!==r)&&(a.width=i,a.height=r)}function F(v,a){var h=v.canvas,u=a.targetCanvas,i=u.getContext("2d");i.translate(0,u.height),i.scale(1,-1);var r=h.height-u.height;i.drawImage(h,0,r,u.width,u.height,0,0,u.width,u.height)}function W(v,a){var h=a.targetCanvas,u=h.getContext("2d"),i=a.destinationWidth,r=a.destinationHeight,n=i*r*4,c=new Uint8Array(this.imageBuffer,0,n),d=new Uint8ClampedArray(this.imageBuffer,0,n);v.readPixels(0,0,i,r,v.RGBA,v.UNSIGNED_BYTE,c);var s=new ImageData(d,i,r);u.putImageData(s,0,0)}(function(){var v=function(){};g.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:v,dispose:v,clearWebGLCaches:v,resources:{},applyFilters:function(h,u,i,r,n){var c=n.getContext("2d");c.drawImage(u,0,0,i,r);var d=c.getImageData(0,0,i,r),s=c.getImageData(0,0,i,r),p={sourceWidth:i,sourceHeight:r,imageData:d,originalEl:u,originalImageData:s,canvasEl:n,ctx:c,filterBackend:this};return h.forEach(function(y){y.applyTo(p)}),(p.imageData.width!==i||p.imageData.height!==r)&&(n.width=p.imageData.width,n.height=p.imageData.height),c.putImageData(p.imageData,0,0),p}}})(),g.Image=g.Image||{},g.Image.filters=g.Image.filters||{},g.Image.filters.BaseFilter=g.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(v){v&&this.setOptions(v)},setOptions:function(v){for(var a in v)this[a]=v[a]},createProgram:function(v,a,h){a=a||this.fragmentSource,h=h||this.vertexSource,g.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+g.webGlPrecision+" float"));var u=v.createShader(v.VERTEX_SHADER);if(v.shaderSource(u,h),v.compileShader(u),!v.getShaderParameter(u,v.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+v.getShaderInfoLog(u));var i=v.createShader(v.FRAGMENT_SHADER);if(v.shaderSource(i,a),v.compileShader(i),!v.getShaderParameter(i,v.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+v.getShaderInfoLog(i));var r=v.createProgram();if(v.attachShader(r,u),v.attachShader(r,i),v.linkProgram(r),!v.getProgramParameter(r,v.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+v.getProgramInfoLog(r));var n=this.getAttributeLocations(v,r),c=this.getUniformLocations(v,r)||{};return c.uStepW=v.getUniformLocation(r,"uStepW"),c.uStepH=v.getUniformLocation(r,"uStepH"),{program:r,attributeLocations:n,uniformLocations:c}},getAttributeLocations:function(v,a){return{aPosition:v.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(v,a,h){var u=a.aPosition,i=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,i),v.enableVertexAttribArray(u),v.vertexAttribPointer(u,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,h,v.STATIC_DRAW)},_setupFrameBuffer:function(v){var a=v.context,h,u;v.passes>1?(h=v.destinationWidth,u=v.destinationHeight,(v.sourceWidth!==h||v.sourceHeight!==u)&&(a.deleteTexture(v.targetTexture),v.targetTexture=v.filterBackend.createTexture(a,h,u)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,v.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(v){v.passes--,v.pass++;var a=v.targetTexture;v.targetTexture=v.sourceTexture,v.sourceTexture=a},isNeutralState:function(){var v=this.mainParameter,a=g.Image.filters[this.type].prototype;if(v)if(Array.isArray(a[v])){for(var h=a[v].length;h--;)if(this[v][h]!==a[v][h])return!1;return!0}else return a[v]===this[v];else return!1},applyTo:function(v){v.webgl?(this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v)):this.applyTo2d(v)},retrieveShader:function(v){return v.programCache.hasOwnProperty(this.type)||(v.programCache[this.type]=this.createProgram(v.context)),v.programCache[this.type]},applyToWebGL:function(v){var a=v.context,h=this.retrieveShader(v);v.pass===0&&v.originalTexture?a.bindTexture(a.TEXTURE_2D,v.originalTexture):a.bindTexture(a.TEXTURE_2D,v.sourceTexture),a.useProgram(h.program),this.sendAttributeData(a,h.attributeLocations,v.aPosition),a.uniform1f(h.uniformLocations.uStepW,1/v.sourceWidth),a.uniform1f(h.uniformLocations.uStepH,1/v.sourceHeight),this.sendUniformData(a,h.uniformLocations),a.viewport(0,0,v.destinationWidth,v.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(v,a,h){v.activeTexture(h),v.bindTexture(v.TEXTURE_2D,a),v.activeTexture(v.TEXTURE0)},unbindAdditionalTexture:function(v,a){v.activeTexture(a),v.bindTexture(v.TEXTURE_2D,null),v.activeTexture(v.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(v){this[this.mainParameter]=v},sendUniformData:function(){},createHelpLayer:function(v){if(!v.helpLayer){var a=document.createElement("canvas");a.width=v.sourceWidth,a.height=v.sourceHeight,v.helpLayer=a}},toObject:function(){var v={type:this.type},a=this.mainParameter;return a&&(v[a]=this[a]),v},toJSON:function(){return this.toObject()}}),g.Image.filters.BaseFilter.fromObject=function(v,a){var h=new g.Image.filters[v.type](v);return a&&a(h),h},function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.ColorMatrix=u(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var r=i.imageData,n=r.data,c=n.length,d=this.matrix,s,p,y,I,_,E=this.colorsOnly;for(_=0;_<c;_+=4)s=n[_],p=n[_+1],y=n[_+2],E?(n[_]=s*d[0]+p*d[1]+y*d[2]+d[4]*255,n[_+1]=s*d[5]+p*d[6]+y*d[7]+d[9]*255,n[_+2]=s*d[10]+p*d[11]+y*d[12]+d[14]*255):(I=n[_+3],n[_]=s*d[0]+p*d[1]+y*d[2]+I*d[3]+d[4]*255,n[_+1]=s*d[5]+p*d[6]+y*d[7]+I*d[8]+d[9]*255,n[_+2]=s*d[10]+p*d[11]+y*d[12]+I*d[13]+d[14]*255,n[_+3]=s*d[15]+p*d[16]+y*d[17]+I*d[18]+d[19]*255)},getUniformLocations:function(i,r){return{uColorMatrix:i.getUniformLocation(r,"uColorMatrix"),uConstants:i.getUniformLocation(r,"uConstants")}},sendUniformData:function(i,r){var n=this.matrix,c=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],d=[n[4],n[9],n[14],n[19]];i.uniformMatrix4fv(r.uColorMatrix,!1,c),i.uniform4fv(r.uConstants,d)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Brightness=u(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var r=i.imageData,n=r.data,c,d=n.length,s=Math.round(this.brightness*255);for(c=0;c<d;c+=4)n[c]=n[c]+s,n[c+1]=n[c+1]+s,n[c+2]=n[c+2]+s}},getUniformLocations:function(i,r){return{uBrightness:i.getUniformLocation(r,"uBrightness")}},sendUniformData:function(i,r){i.uniform1f(r.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.Image.filters,i=a.util.createClass;u.Convolute=i(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(r){var n=Math.sqrt(this.matrix.length),c=this.type+"_"+n+"_"+(this.opaque?1:0),d=this.fragmentSource[c];return r.programCache.hasOwnProperty(c)||(r.programCache[c]=this.createProgram(r.context,d)),r.programCache[c]},applyTo2d:function(r){var n=r.imageData,c=n.data,d=this.matrix,s=Math.round(Math.sqrt(d.length)),p=Math.floor(s/2),y=n.width,I=n.height,_=r.ctx.createImageData(y,I),E=_.data,D=this.opaque?1:0,L,z,X,ut,rt,Et,Q,St,j,jt,gt,Nt,J;for(gt=0;gt<I;gt++)for(jt=0;jt<y;jt++){for(rt=(gt*y+jt)*4,L=0,z=0,X=0,ut=0,J=0;J<s;J++)for(Nt=0;Nt<s;Nt++)Q=gt+J-p,Et=jt+Nt-p,!(Q<0||Q>=I||Et<0||Et>=y)&&(St=(Q*y+Et)*4,j=d[J*s+Nt],L+=c[St]*j,z+=c[St+1]*j,X+=c[St+2]*j,D||(ut+=c[St+3]*j));E[rt]=L,E[rt+1]=z,E[rt+2]=X,D?E[rt+3]=c[rt+3]:E[rt+3]=ut}r.imageData=_},getUniformLocations:function(r,n){return{uMatrix:r.getUniformLocation(n,"uMatrix"),uOpaque:r.getUniformLocation(n,"uOpaque"),uHalfSize:r.getUniformLocation(n,"uHalfSize"),uSize:r.getUniformLocation(n,"uSize")}},sendUniformData:function(r,n){r.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Grayscale=u(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var r=i.imageData,n=r.data,c,d=n.length,s,p=this.mode;for(c=0;c<d;c+=4)p==="average"?s=(n[c]+n[c+1]+n[c+2])/3:p==="lightness"?s=(Math.min(n[c],n[c+1],n[c+2])+Math.max(n[c],n[c+1],n[c+2]))/2:p==="luminosity"&&(s=.21*n[c]+.72*n[c+1]+.07*n[c+2]),n[c]=s,n[c+1]=s,n[c+2]=s},retrieveShader:function(i){var r=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(r)){var n=this.fragmentSource[this.mode];i.programCache[r]=this.createProgram(i.context,n)}return i.programCache[r]},getUniformLocations:function(i,r){return{uMode:i.getUniformLocation(r,"uMode")}},sendUniformData:function(i,r){var n=1;i.uniform1i(r.uMode,n)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Invert=u(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var r=i.imageData,n=r.data,c,d=n.length;for(c=0;c<d;c+=4)n[c]=255-n[c],n[c+1]=255-n[c+1],n[c+2]=255-n[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,r){return{uInvert:i.getUniformLocation(r,"uInvert")}},sendUniformData:function(i,r){i.uniform1i(r.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.Image.filters,i=a.util.createClass;u.Noise=i(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(r){if(this.noise!==0){var n=r.imageData,c=n.data,d,s=c.length,p=this.noise,y;for(d=0,s=c.length;d<s;d+=4)y=(.5-Math.random())*p,c[d]+=y,c[d+1]+=y,c[d+2]+=y}},getUniformLocations:function(r,n){return{uNoise:r.getUniformLocation(n,"uNoise"),uSeed:r.getUniformLocation(n,"uSeed")}},sendUniformData:function(r,n){r.uniform1f(n.uNoise,this.noise/255),r.uniform1f(n.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Pixelate=u(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var r=i.imageData,n=r.data,c=r.height,d=r.width,s,p,y,I,_,E,D,L,z,X,ut;for(p=0;p<c;p+=this.blocksize)for(y=0;y<d;y+=this.blocksize)for(s=p*4*d+y*4,I=n[s],_=n[s+1],E=n[s+2],D=n[s+3],X=Math.min(p+this.blocksize,c),ut=Math.min(y+this.blocksize,d),L=p;L<X;L++)for(z=y;z<ut;z++)s=L*4*d+z*4,n[s]=I,n[s+1]=_,n[s+2]=E,n[s+3]=D},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,r){return{uBlocksize:i.getUniformLocation(r,"uBlocksize"),uStepW:i.getUniformLocation(r,"uStepW"),uStepH:i.getUniformLocation(r,"uStepH")}},sendUniformData:function(i,r){i.uniform1f(r.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.extend,u=a.Image.filters,i=a.util.createClass;u.RemoveColor=i(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(r){var n=r.imageData,c=n.data,d,s=this.distance*255,p,y,I,_=new a.Color(this.color).getSource(),E=[_[0]-s,_[1]-s,_[2]-s],D=[_[0]+s,_[1]+s,_[2]+s];for(d=0;d<c.length;d+=4)p=c[d],y=c[d+1],I=c[d+2],p>E[0]&&y>E[1]&&I>E[2]&&p<D[0]&&y<D[1]&&I<D[2]&&(c[d+3]=0)},getUniformLocations:function(r,n){return{uLow:r.getUniformLocation(n,"uLow"),uHigh:r.getUniformLocation(n,"uHigh")}},sendUniformData:function(r,n){var c=new a.Color(this.color).getSource(),d=parseFloat(this.distance),s=[0+c[0]/255-d,0+c[1]/255-d,0+c[2]/255-d,1],p=[c[0]/255+d,c[1]/255+d,c[2]/255+d,1];r.uniform4fv(n.uLow,s),r.uniform4fv(n.uHigh,p)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in i)h[r]=u(h.ColorMatrix,{type:r,matrix:i[r],mainParameter:!1,colorsOnly:!0}),a.Image.filters[r].fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric,h=a.Image.filters,u=a.util.createClass;h.BlendColor=u(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var r=this.type+"_"+this.mode,n;return i.programCache.hasOwnProperty(r)||(n=this.buildSource(this.mode),i.programCache[r]=this.createProgram(i.context,n)),i.programCache[r]},applyTo2d:function(i){var r=i.imageData,n=r.data,c=n.length,d,s,p,y,I,_,E,D=1-this.alpha;E=new a.Color(this.color).getSource(),d=E[0]*this.alpha,s=E[1]*this.alpha,p=E[2]*this.alpha;for(var L=0;L<c;L+=4)switch(y=n[L],I=n[L+1],_=n[L+2],this.mode){case"multiply":n[L]=y*d/255,n[L+1]=I*s/255,n[L+2]=_*p/255;break;case"screen":n[L]=255-(255-y)*(255-d)/255,n[L+1]=255-(255-I)*(255-s)/255,n[L+2]=255-(255-_)*(255-p)/255;break;case"add":n[L]=y+d,n[L+1]=I+s,n[L+2]=_+p;break;case"diff":case"difference":n[L]=Math.abs(y-d),n[L+1]=Math.abs(I-s),n[L+2]=Math.abs(_-p);break;case"subtract":n[L]=y-d,n[L+1]=I-s,n[L+2]=_-p;break;case"darken":n[L]=Math.min(y,d),n[L+1]=Math.min(I,s),n[L+2]=Math.min(_,p);break;case"lighten":n[L]=Math.max(y,d),n[L+1]=Math.max(I,s),n[L+2]=Math.max(_,p);break;case"overlay":n[L]=d<128?2*y*d/255:255-2*(255-y)*(255-d)/255,n[L+1]=s<128?2*I*s/255:255-2*(255-I)*(255-s)/255,n[L+2]=p<128?2*_*p/255:255-2*(255-_)*(255-p)/255;break;case"exclusion":n[L]=d+y-2*d*y/255,n[L+1]=s+I-2*s*I/255,n[L+2]=p+_-2*p*_/255;break;case"tint":n[L]=d+y*D,n[L+1]=s+I*D,n[L+2]=p+_*D}},getUniformLocations:function(i,r){return{uColor:i.getUniformLocation(r,"uColor")}},sendUniformData:function(i,r){var n=new a.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,i.uniform4fv(r.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric,h=a.Image.filters,u=a.util.createClass;h.BlendImage=u(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var r=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(r)||(i.programCache[r]=this.createProgram(i.context,n)),i.programCache[r]},applyToWebGL:function(i){var r=i.context,n=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(r,n,r.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(r,r.TEXTURE1)},createTexture:function(i,r){return i.getCachedTexture(r.cacheKey,r._element)},calculateMatrix:function(){var i=this.image,r=i._element.width,n=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/r,-i.top/n,1]},applyTo2d:function(i){var r=i.imageData,n=i.filterBackend.resources,c=r.data,d=c.length,s=r.width,p=r.height,y,I,_,E,D,L,z,X,ut,rt,Et=this.image,Q;n.blendImage||(n.blendImage=a.util.createCanvasElement()),ut=n.blendImage,rt=ut.getContext("2d"),ut.width!==s||ut.height!==p?(ut.width=s,ut.height=p):rt.clearRect(0,0,s,p),rt.setTransform(Et.scaleX,0,0,Et.scaleY,Et.left,Et.top),rt.drawImage(Et._element,0,0,s,p),Q=rt.getImageData(0,0,s,p).data;for(var St=0;St<d;St+=4)switch(D=c[St],L=c[St+1],z=c[St+2],X=c[St+3],y=Q[St],I=Q[St+1],_=Q[St+2],E=Q[St+3],this.mode){case"multiply":c[St]=D*y/255,c[St+1]=L*I/255,c[St+2]=z*_/255,c[St+3]=X*E/255;break;case"mask":c[St+3]=E;break}},getUniformLocations:function(i,r){return{uTransformMatrix:i.getUniformLocation(r,"uTransformMatrix"),uImage:i.getUniformLocation(r,"uImage")}},sendUniformData:function(i,r){var n=this.calculateMatrix();i.uniform1i(r.uImage,1),i.uniformMatrix3fv(r.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(i,r){a.Image.fromObject(i.image,function(n){var c=a.util.object.clone(i);c.image=n,r(new a.Image.filters.BlendImage(c))})}}(O),function(v){var a=v.fabric||(v.fabric={}),h=Math.pow,u=Math.floor,i=Math.sqrt,r=Math.abs,n=Math.round,c=Math.sin,d=Math.ceil,s=a.Image.filters,p=a.util.createClass;s.Resize=p(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,I){return{uDelta:y.getUniformLocation(I,"uDelta"),uTaps:y.getUniformLocation(I,"uTaps")}},sendUniformData:function(y,I){y.uniform2fv(I.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(I.uTaps,this.taps)},retrieveShader:function(y){var I=this.getFilterWindow(),_=this.type+"_"+I;if(!y.programCache.hasOwnProperty(_)){var E=this.generateShader(I);y.programCache[_]=this.createProgram(y.context,E)}return y.programCache[_]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),I=this.tempScale,_=this.getFilterWindow(),E=new Array(_),D=1;D<=_;D++)E[D-1]=y(D*I);return E},generateShader:function(E){for(var I=new Array(E),_=this.fragmentSourceTOP,E,D=1;D<=E;D++)I[D-1]=D+".0 * uDelta";return _+="uniform float uTaps["+E+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,I.forEach(function(L,z){_+="  color += texture2D(uTexture, vTexCoord + "+L+") * uTaps["+z+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+L+") * uTaps["+z+`];
`,_+="  sum += 2.0 * uTaps["+z+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(I){if(I>=y||I<=-y)return 0;if(I<11920929e-14&&I>-11920929e-14)return 1;I*=Math.PI;var _=I/y;return c(I)/I*c(_)/_}},applyTo2d:function(y){var I=y.imageData,_=this.scaleX,E=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/E;var D=I.width,L=I.height,z=n(D*_),X=n(L*E),ut;this.resizeType==="sliceHack"?ut=this.sliceByTwo(y,D,L,z,X):this.resizeType==="hermite"?ut=this.hermiteFastResize(y,D,L,z,X):this.resizeType==="bilinear"?ut=this.bilinearFiltering(y,D,L,z,X):this.resizeType==="lanczos"&&(ut=this.lanczosResize(y,D,L,z,X)),y.imageData=ut},sliceByTwo:function(y,I,_,E,D){var L=y.imageData,z=.5,X=!1,ut=!1,rt=I*z,Et=_*z,Q=a.filterBackend.resources,St,j,jt=0,gt=0,Nt=I,J=0;for(Q.sliceByTwo||(Q.sliceByTwo=document.createElement("canvas")),St=Q.sliceByTwo,(St.width<I*1.5||St.height<_)&&(St.width=I*1.5,St.height=_),j=St.getContext("2d"),j.clearRect(0,0,I*1.5,_),j.putImageData(L,0,0),E=u(E),D=u(D);!X||!ut;)I=rt,_=Et,E<u(rt*z)?rt=u(rt*z):(rt=E,X=!0),D<u(Et*z)?Et=u(Et*z):(Et=D,ut=!0),j.drawImage(St,jt,gt,I,_,Nt,J,rt,Et),jt=Nt,gt=J,J+=Et;return j.getImageData(jt,gt,E,D)},lanczosResize:function(y,I,_,E,D){function L(Z){var H,at,N,B,U,G,ht,lt,vt,pt,mt;for(J.x=(Z+.5)*Et,et.x=u(J.x),H=0;H<D;H++){for(J.y=(H+.5)*Q,et.y=u(J.y),U=0,G=0,ht=0,lt=0,vt=0,at=et.x-jt;at<=et.x+jt;at++)if(!(at<0||at>=I)){pt=u(1e3*r(at-J.x)),Nt[pt]||(Nt[pt]={});for(var tt=et.y-gt;tt<=et.y+gt;tt++)tt<0||tt>=_||(mt=u(1e3*r(tt-J.y)),Nt[pt][mt]||(Nt[pt][mt]=rt(i(h(pt*St,2)+h(mt*j,2))/1e3)),N=Nt[pt][mt],N>0&&(B=(tt*I+at)*4,U+=N,G+=N*z[B],ht+=N*z[B+1],lt+=N*z[B+2],vt+=N*z[B+3]))}B=(H*E+Z)*4,ut[B]=G/U,ut[B+1]=ht/U,ut[B+2]=lt/U,ut[B+3]=vt/U}return++Z<E?L(Z):X}var z=y.imageData.data,X=y.ctx.createImageData(E,D),ut=X.data,rt=this.lanczosCreate(this.lanczosLobes),Et=this.rcpScaleX,Q=this.rcpScaleY,St=2/this.rcpScaleX,j=2/this.rcpScaleY,jt=d(Et*this.lanczosLobes/2),gt=d(Q*this.lanczosLobes/2),Nt={},J={},et={};return L(0)},bilinearFiltering:function(y,I,_,E,D){var L,z,X,ut,rt,Et,Q,St,j,jt,gt,Nt,J=0,et,Z=this.rcpScaleX,H=this.rcpScaleY,at=4*(I-1),N=y.imageData,B=N.data,U=y.ctx.createImageData(E,D),G=U.data;for(Q=0;Q<D;Q++)for(St=0;St<E;St++)for(rt=u(Z*St),Et=u(H*Q),j=Z*St-rt,jt=H*Q-Et,et=4*(Et*I+rt),gt=0;gt<4;gt++)L=B[et+gt],z=B[et+4+gt],X=B[et+at+gt],ut=B[et+at+4+gt],Nt=L*(1-j)*(1-jt)+z*j*(1-jt)+X*jt*(1-j)+ut*j*jt,G[J++]=Nt;return U},hermiteFastResize:function(y,I,_,E,D){for(var L=this.rcpScaleX,z=this.rcpScaleY,X=d(L/2),ut=d(z/2),rt=y.imageData,Et=rt.data,Q=y.ctx.createImageData(E,D),St=Q.data,j=0;j<D;j++)for(var jt=0;jt<E;jt++){for(var gt=(jt+j*E)*4,Nt=0,J=0,et=0,Z=0,H=0,at=0,N=0,B=(j+.5)*z,U=u(j*z);U<(j+1)*z;U++)for(var G=r(B-(U+.5))/ut,ht=(jt+.5)*L,lt=G*G,vt=u(jt*L);vt<(jt+1)*L;vt++){var pt=r(ht-(vt+.5))/X,mt=i(lt+pt*pt);mt>1&&mt<-1||(Nt=2*mt*mt*mt-3*mt*mt+1,Nt>0&&(pt=4*(vt+U*I),N+=Nt*Et[pt+3],et+=Nt,Et[pt+3]<255&&(Nt=Nt*Et[pt+3]/250),Z+=Nt*Et[pt],H+=Nt*Et[pt+1],at+=Nt*Et[pt+2],J+=Nt))}St[gt]=Z/J,St[gt+1]=H/J,St[gt+2]=at/J,St[gt+3]=N/et}return Q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Contrast=u(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var r=i.imageData,n,d,c=r.data,d=c.length,s=Math.floor(this.contrast*255),p=259*(s+255)/(255*(259-s));for(n=0;n<d;n+=4)c[n]=p*(c[n]-128)+128,c[n+1]=p*(c[n+1]-128)+128,c[n+2]=p*(c[n+2]-128)+128}},getUniformLocations:function(i,r){return{uContrast:i.getUniformLocation(r,"uContrast")}},sendUniformData:function(i,r){i.uniform1f(r.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Saturation=u(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var r=i.imageData,n=r.data,c=n.length,d=-this.saturation,s,p;for(s=0;s<c;s+=4)p=Math.max(n[s],n[s+1],n[s+2]),n[s]+=p!==n[s]?(p-n[s])*d:0,n[s+1]+=p!==n[s+1]?(p-n[s+1])*d:0,n[s+2]+=p!==n[s+2]?(p-n[s+2])*d:0}},getUniformLocations:function(i,r){return{uSaturation:i.getUniformLocation(r,"uSaturation")}},sendUniformData:function(i,r){i.uniform1f(r.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Vibrance=u(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(i){if(this.vibrance!==0){var r=i.imageData,n=r.data,c=n.length,d=-this.vibrance,s,p,y,I;for(s=0;s<c;s+=4)p=Math.max(n[s],n[s+1],n[s+2]),y=(n[s]+n[s+1]+n[s+2])/3,I=Math.abs(p-y)*2/255*d,n[s]+=p!==n[s]?(p-n[s])*I:0,n[s+1]+=p!==n[s+1]?(p-n[s+1])*I:0,n[s+2]+=p!==n[s+2]?(p-n[s+2])*I:0}},getUniformLocations:function(i,r){return{uVibrance:i.getUniformLocation(r,"uVibrance")}},sendUniformData:function(i,r){i.uniform1f(r.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Blur=u(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var r=i.filterBackend.resources,n,c,d=i.imageData.width,s=i.imageData.height;r.blurLayer1||(r.blurLayer1=a.util.createCanvasElement(),r.blurLayer2=a.util.createCanvasElement()),n=r.blurLayer1,c=r.blurLayer2,(n.width!==d||n.height!==s)&&(c.width=n.width=d,c.height=n.height=s);var p=n.getContext("2d"),y=c.getContext("2d"),I=15,_,E,D,L,z=this.blur*.06*.5;for(p.putImageData(i.imageData,0,0),y.clearRect(0,0,d,s),L=-I;L<=I;L++)_=(Math.random()-.5)/4,E=L/I,D=z*E*d+_,y.globalAlpha=1-Math.abs(E),y.drawImage(n,D,_),p.drawImage(c,0,0),y.globalAlpha=1,y.clearRect(0,0,c.width,c.height);for(L=-I;L<=I;L++)_=(Math.random()-.5)/4,E=L/I,D=z*E*s+_,y.globalAlpha=1-Math.abs(E),y.drawImage(n,_,D),p.drawImage(c,0,0),y.globalAlpha=1,y.clearRect(0,0,c.width,c.height);i.ctx.drawImage(n,0,0);var X=i.ctx.getImageData(0,0,n.width,n.height);return p.globalAlpha=1,p.clearRect(0,0,n.width,n.height),X},getUniformLocations:function(i,r){return{delta:i.getUniformLocation(r,"uDelta")}},sendUniformData:function(i,r){var n=this.chooseRightDelta();i.uniform2fv(r.delta,n)},chooseRightDelta:function(){var i=1,r=[0,0],n;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),n=i*this.blur*.12,this.horizontal?r[0]=n:r[1]=n,r}}),h.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Gamma=u(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var r=i.imageData,n=r.data,c=this.gamma,d=n.length,s=1/c[0],p=1/c[1],y=1/c[2],I;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),I=0,d=256;I<d;I++)this.rVals[I]=Math.pow(I/255,s)*255,this.gVals[I]=Math.pow(I/255,p)*255,this.bVals[I]=Math.pow(I/255,y)*255;for(I=0,d=n.length;I<d;I+=4)n[I]=this.rVals[n[I]],n[I+1]=this.gVals[n[I+1]],n[I+2]=this.bVals[n[I+2]]},getUniformLocations:function(i,r){return{uGamma:i.getUniformLocation(r,"uGamma")}},sendUniformData:function(i,r){i.uniform3fv(r.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.Composed=u(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(r){r.applyTo(i)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(i,r){var n=i.subFilters||[],c=n.map(function(s){return new a.Image.filters[s.type](s)}),d=new a.Image.filters.Composed({subFilters:c});return r&&r(d),d}}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.Image.filters,u=a.util.createClass;h.HueRotation=u(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,r=a.util.cos(i),n=a.util.sin(i),c=1/3,d=Math.sqrt(c)*n,s=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+s/3,this.matrix[1]=c*s-d,this.matrix[2]=c*s+d,this.matrix[5]=c*s+d,this.matrix[6]=r+c*s,this.matrix[7]=c*s-d,this.matrix[10]=c*s-d,this.matrix[11]=c*s+d,this.matrix[12]=r+c*s},isNeutralState:function(i){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,i)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(O),function(v){var a=v.fabric||(v.fabric={}),h=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(u),cacheProperties:a.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,r){this.styles=r?r.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",r),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=a.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,r,n,c,d,s,p,y=0,I=this._textLines.length;y<I;y++)if(!(this.textAlign!=="justify"&&(y===I-1||this.isEndOfWrapping(y)))&&(c=0,d=this._textLines[y],r=this.getLineWidth(y),r<this.width&&(p=this.textLines[y].match(this._reSpacesAndTabs)))){n=p.length,i=(this.width-r)/n;for(var _=0,E=d.length;_<=E;_++)s=this.__charBounds[y][_],this._reSpaceAndTab.test(d[_])?(s.width+=i,s.kernedWidth+=i,s.left+=c,c+=i):s.left+=c}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),r=this.fontSize;return i.width+=r*i.zoomX,i.height+=r*i.zoomY,i},_render:function(i){var r=this.path;r&&!r.isNotVisible()&&r._render(i),this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,r,n){i.textBaseline="alphabetic",i.font=this._getFontDeclaration(r,n)},calcTextWidth:function(){for(var i=this.getLineWidth(0),r=1,n=this._textLines.length;r<n;r++){var c=this.getLineWidth(r);c>i&&(i=c)}return i},_renderTextLine:function(i,r,n,c,d,s){this._renderChars(i,r,n,c,d,s)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var r,n,c=i.fillStyle,d,s,p=this._getLeftOffset(),y=this._getTopOffset(),I=0,_=0,E,D,L=this.path,z,X=0,ut=this._textLines.length;X<ut;X++){if(r=this.getHeightOfLine(X),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",X)){y+=r;continue}d=this._textLines[X],n=this._getLineLeftOffset(X),_=0,I=0,s=this.getValueOfPropertyAt(X,0,"textBackgroundColor");for(var rt=0,Et=d.length;rt<Et;rt++)E=this.__charBounds[X][rt],D=this.getValueOfPropertyAt(X,rt,"textBackgroundColor"),L?(i.save(),i.translate(E.renderLeft,E.renderTop),i.rotate(E.angle),i.fillStyle=D,D&&i.fillRect(-E.width/2,-r/this.lineHeight*(1-this._fontSizeFraction),E.width,r/this.lineHeight),i.restore()):D!==s?(z=p+n+I,this.direction==="rtl"&&(z=this.width-z-_),i.fillStyle=s,s&&i.fillRect(z,y,_,r/this.lineHeight),I=E.left,_=E.width,s=D):_+=E.kernedWidth;D&&!L&&(z=p+n+I,this.direction==="rtl"&&(z=this.width-z-_),i.fillStyle=D,i.fillRect(z,y,_,r/this.lineHeight)),y+=r}i.fillStyle=c,this._removeShadow(i)}},getFontCache:function(i){var r=i.fontFamily.toLowerCase();a.charWidthsCache[r]||(a.charWidthsCache[r]={});var n=a.charWidthsCache[r],c=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return n[c]||(n[c]={}),n[c]},_measureChar:function(i,r,n,c){var d=this.getFontCache(r),s=this._getFontDeclaration(r),p=this._getFontDeclaration(c),y=n+i,I=s===p,_,E,D,L=r.fontSize/this.CACHE_FONT_SIZE,z;if(n&&d[n]!==void 0&&(D=d[n]),d[i]!==void 0&&(z=_=d[i]),I&&d[y]!==void 0&&(E=d[y],z=E-D),_===void 0||D===void 0||E===void 0){var X=this.getMeasuringContext();this._setTextStyles(X,r,!0)}return _===void 0&&(z=_=X.measureText(i).width,d[i]=_),D===void 0&&I&&n&&(D=X.measureText(n).width,d[n]=D),I&&E===void 0&&(E=X.measureText(y).width,d[y]=E,z=E-D),{width:_*L,kernedWidth:z*L}},getHeightOfChar:function(i,r){return this.getValueOfPropertyAt(i,r,"fontSize")},measureLine:function(i){var r=this._measureLine(i);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r},_measureLine:function(i){var r=0,n,c,d=this._textLines[i],s,p,y=0,I=new Array(d.length),_=0,E,D,L=this.path,z=this.pathSide==="right";for(this.__charBounds[i]=I,n=0;n<d.length;n++)c=d[n],p=this._getGraphemeBox(c,i,n,s),I[n]=p,r+=p.kernedWidth,s=c;if(I[n]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},L){switch(D=L.segmentsInfo[L.segmentsInfo.length-1].length,E=a.util.getPointOnPath(L.path,0,L.segmentsInfo),E.x+=L.pathOffset.x,E.y+=L.pathOffset.y,this.textAlign){case"left":_=z?D-r:0;break;case"center":_=(D-r)/2;break;case"right":_=z?0:D-r;break}for(_+=this.pathStartOffset*(z?-1:1),n=z?d.length-1:0;z?n>=0:n<d.length;z?n--:n++)p=I[n],_>D?_%=D:_<0&&(_+=D),this._setGraphemeOnPath(_,p,E),_+=p.kernedWidth}return{width:r,numOfSpaces:y}},_setGraphemeOnPath:function(i,r,n){var c=i+r.kernedWidth/2,d=this.path,s=a.util.getPointOnPath(d.path,c,d.segmentsInfo);r.renderLeft=s.x-n.x,r.renderTop=s.y-n.y,r.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(i,r,n,c,d){var s=this.getCompleteStyleDeclaration(r,n),p=c?this.getCompleteStyleDeclaration(r,n-1):{},y=this._measureChar(i,s,c,p),I=y.kernedWidth,_=y.width,E;this.charSpacing!==0&&(E=this._getWidthOfCharSpacing(),_+=E,I+=E);var D={width:_,left:0,height:s.fontSize,kernedWidth:I,deltaY:s.deltaY};if(n>0&&!d){var L=this.__charBounds[r][n-1];D.left=L.left+L.width+y.kernedWidth-y.width}return D},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var r=this._textLines[i],n=this.getHeightOfChar(i,0),c=1,d=r.length;c<d;c++)n=Math.max(this.getHeightOfChar(i,c),n);return this.__lineHeights[i]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,r=0,n=0,c=this._textLines.length;n<c;n++)i=this.getHeightOfLine(n),r+=n===c-1?i/this.lineHeight:i;return r},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,r){i.save();for(var n=0,c=this._getLeftOffset(),d=this._getTopOffset(),s=0,p=this._textLines.length;s<p;s++){var y=this.getHeightOfLine(s),I=y/this.lineHeight,_=this._getLineLeftOffset(s);this._renderTextLine(r,i,this._textLines[s],c+_,d+n+I,s),n+=y}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,r,n,c,d,s){var p=this.getHeightOfLine(s),y=this.textAlign.indexOf("justify")!==-1,I,_,E="",D,L=0,z,X=this.path,ut=!y&&this.charSpacing===0&&this.isEmptyStyles(s)&&!X,rt=this.direction==="ltr",Et=this.direction==="ltr"?1:-1,Q;if(r.save(),d-=p*this._fontSizeFraction/this.lineHeight,ut){r.canvas.setAttribute("dir",rt?"ltr":"rtl"),r.direction=rt?"ltr":"rtl",r.textAlign=rt?"left":"right",this._renderChar(i,r,s,0,n.join(""),c,d,p),r.restore();return}for(var St=0,j=n.length-1;St<=j;St++)z=St===j||this.charSpacing||X,E+=n[St],D=this.__charBounds[s][St],L===0?(c+=Et*(D.kernedWidth-D.width),L+=D.width):L+=D.kernedWidth,y&&!z&&this._reSpaceAndTab.test(n[St])&&(z=!0),z||(I=I||this.getCompleteStyleDeclaration(s,St),_=this.getCompleteStyleDeclaration(s,St+1),z=this._hasStyleChanged(I,_)),z&&(X?(r.save(),r.translate(D.renderLeft,D.renderTop),r.rotate(D.angle),this._renderChar(i,r,s,St,E,-L/2,0,p),r.restore()):(Q=c,r.canvas.setAttribute("dir",rt?"ltr":"rtl"),r.direction=rt?"ltr":"rtl",r.textAlign=rt?"left":"right",this._renderChar(i,r,s,St,E,Q,d,p)),E="",I=_,c+=Et*L,L=0);r.restore()},_applyPatternGradientTransformText:function(i){var r=a.util.createCanvasElement(),n,c=this.width+this.strokeWidth,d=this.height+this.strokeWidth;return r.width=c,r.height=d,n=r.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(c,0),n.lineTo(c,d),n.lineTo(0,d),n.closePath(),n.translate(c/2,d/2),n.fillStyle=i.toLive(n),this._applyPatternGradientTransform(n,i),n.fill(),n.createPattern(r,"no-repeat")},handleFiller:function(i,r,n){var c,d;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(c=-this.width/2,d=-this.height/2,i.translate(c,d),i[r]=this._applyPatternGradientTransformText(n),{offsetX:c,offsetY:d}):(i[r]=n.toLive(i,this),this._applyPatternGradientTransform(i,n)):(i[r]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,r){return i.lineWidth=r.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",r.stroke)},_setFillStyles:function(i,r){return this.handleFiller(i,"fillStyle",r.fill)},_renderChar:function(i,r,n,c,d,s,p){var y=this._getStyleDeclaration(n,c),I=this.getCompleteStyleDeclaration(n,c),_=i==="fillText"&&I.fill,E=i==="strokeText"&&I.stroke&&I.strokeWidth,D,L;!E&&!_||(r.save(),_&&(D=this._setFillStyles(r,I)),E&&(L=this._setStrokeStyles(r,I)),r.font=this._getFontDeclaration(I),y&&y.textBackgroundColor&&this._removeShadow(r),y&&y.deltaY&&(p+=y.deltaY),_&&r.fillText(d,s-D.offsetX,p-D.offsetY),E&&r.strokeText(d,s-L.offsetX,p-L.offsetY),r.restore())},setSuperscript:function(i,r){return this._setScript(i,r,this.superscript)},setSubscript:function(i,r){return this._setScript(i,r,this.subscript)},_setScript:function(i,r,n){var c=this.get2DCursorLocation(i,!0),d=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),s=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY"),p={fontSize:d*n.size,deltaY:s+d*n.baseline};return this.setSelectionStyles(p,i,r),this},_hasStyleChanged:function(i,r){return i.fill!==r.fill||i.stroke!==r.stroke||i.strokeWidth!==r.strokeWidth||i.fontSize!==r.fontSize||i.fontFamily!==r.fontFamily||i.fontWeight!==r.fontWeight||i.fontStyle!==r.fontStyle||i.deltaY!==r.deltaY},_hasStyleChangedForSvg:function(i,r){return this._hasStyleChanged(i,r)||i.overline!==r.overline||i.underline!==r.underline||i.linethrough!==r.linethrough},_getLineLeftOffset:function(i){var r=this.getLineWidth(i),n=this.width-r,c=this.textAlign,d=this.direction,p,s=0,p=this.isEndOfWrapping(i);return c==="justify"||c==="justify-center"&&!p||c==="justify-right"&&!p||c==="justify-left"&&!p?0:(c==="center"&&(s=n/2),c==="right"&&(s=n),c==="justify-center"&&(s=n/2),c==="justify-right"&&(s=n),d==="rtl"&&(s-=n),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i])return this.__lineWidths[i];var r,n=this._textLines[i],c;return n===""?r=0:(c=this.measureLine(i),r=c.width),this.__lineWidths[i]=r,r},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,r,n){var c=this._getStyleDeclaration(i,r);return c&&typeof c[n]<"u"?c[n]:this[n]},_renderTextDecoration:function(i,r){if(!(!this[r]&&!this.styleHas(r))){for(var n,c,d,s,p,y,I,_,E=this._getLeftOffset(),D=this._getTopOffset(),L,z,X,ut,rt,Et,Q,St,j=this.path,jt=this._getWidthOfCharSpacing(),gt=this.offsets[r],Nt=0,J=this._textLines.length;Nt<J;Nt++){if(n=this.getHeightOfLine(Nt),!this[r]&&!this.styleHas(r,Nt)){D+=n;continue}I=this._textLines[Nt],Et=n/this.lineHeight,s=this._getLineLeftOffset(Nt),z=0,X=0,_=this.getValueOfPropertyAt(Nt,0,r),St=this.getValueOfPropertyAt(Nt,0,"fill"),L=D+Et*(1-this._fontSizeFraction),c=this.getHeightOfChar(Nt,0),p=this.getValueOfPropertyAt(Nt,0,"deltaY");for(var et=0,Z=I.length;et<Z;et++)if(ut=this.__charBounds[Nt][et],rt=this.getValueOfPropertyAt(Nt,et,r),Q=this.getValueOfPropertyAt(Nt,et,"fill"),d=this.getHeightOfChar(Nt,et),y=this.getValueOfPropertyAt(Nt,et,"deltaY"),j&&rt&&Q)i.save(),i.fillStyle=St,i.translate(ut.renderLeft,ut.renderTop),i.rotate(ut.angle),i.fillRect(-ut.kernedWidth/2,gt*d+y,ut.kernedWidth,this.fontSize/15),i.restore();else if((rt!==_||Q!==St||d!==c||y!==p)&&X>0){var H=E+s+z;this.direction==="rtl"&&(H=this.width-H-X),_&&St&&(i.fillStyle=St,i.fillRect(H,L+gt*c+p,X,this.fontSize/15)),z=ut.left,X=ut.width,_=rt,St=Q,c=d,p=y}else X+=ut.kernedWidth;var H=E+s+z;this.direction==="rtl"&&(H=this.width-H-X),i.fillStyle=Q,rt&&Q&&i.fillRect(H,L+gt*c+p,X-jt,this.fontSize/15),D+=n}this._removeShadow(i)}},_getFontDeclaration:function(i,r){var n=i||this,c=this.fontFamily,d=a.Text.genericFonts.indexOf(c.toLowerCase())>-1,s=c===void 0||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||d?n.fontFamily:'"'+n.fontFamily+'"';return[a.isLikelyNode?n.fontWeight:n.fontStyle,a.isLikelyNode?n.fontStyle:n.fontWeight,r?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",s].join(" ")},render:function(i){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i))},_splitTextIntoLines:function(i){for(var r=i.split(this._reNewline),n=new Array(r.length),c=[`
`],d=[],s=0;s<r.length;s++)n[s]=a.util.string.graphemeSplit(r[s]),d=d.concat(n[s],c);return d.pop(),{_unwrappedLines:n,lines:r,graphemeText:d,graphemeLines:n}},toObject:function(i){var r=u.concat(i),n=this.callSuper("toObject",r);return n.styles=h(this.styles,!0),n.path&&(n.path=this.path.toObject()),n},set:function(i,r){this.callSuper("set",i,r);var n=!1,c=!1;if(typeof i=="object")for(var d in i)d==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(d)!==-1,c=c||d==="path";else n=this._dimensionAffectingProps.indexOf(i)!==-1,c=i==="path";return c&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(i,r,n){if(!i)return r(null);var c=a.parseAttributes(i,a.Text.ATTRIBUTE_NAMES),d=c.textAnchor||"left";if(n=a.util.object.extend(n?h(n):{},c),n.top=n.top||0,n.left=n.left||0,c.textDecoration){var s=c.textDecoration;s.indexOf("underline")!==-1&&(n.underline=!0),s.indexOf("overline")!==-1&&(n.overline=!0),s.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in c&&(n.left+=c.dx),"dy"in c&&(n.top+=c.dy),"fontSize"in n||(n.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in i?p=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(p=i.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=n.strokeWidth;n.strokeWidth=0;var I=new a.Text(p,n),_=I.getScaledHeight()/I.height,E=(I.height+I.strokeWidth)*I.lineHeight-I.height,D=E*_,L=I.getScaledHeight()+D,z=0;d==="center"&&(z=I.getScaledWidth()/2),d==="right"&&(z=I.getScaledWidth()),I.set({left:I.left-z,top:I.top-(L-I.fontSize*(.07+I._fontSizeFraction))/I.lineHeight,strokeWidth:typeof y<"u"?y:1}),r(I)},a.Text.fromObject=function(i,r){var n=h(i),c=i.path;return delete n.path,a.Object._fromObject("Text",n,function(d){c?a.Object._fromObject("Path",c,function(s){d.set("path",s),r(d)},"path"):r(d)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(O),function(){g.util.object.extend(g.Text.prototype,{isEmptyStyles:function(v){if(!this.styles||typeof v<"u"&&!this.styles[v])return!0;var a=typeof v>"u"?this.styles:{line:this.styles[v]};for(var h in a)for(var u in a[h])for(var i in a[h][u])return!1;return!0},styleHas:function(v,a){if(!this.styles||!v||v===""||typeof a<"u"&&!this.styles[a])return!1;var h=typeof a>"u"?this.styles:{0:this.styles[a]};for(var u in h)for(var i in h[u])if(typeof h[u][i][v]<"u")return!0;return!1},cleanStyle:function(v){if(!this.styles||!v||v==="")return!1;var a=this.styles,h=0,u,i,r=!0,n=0,c;for(var d in a){u=0;for(var s in a[d]){var c=a[d][s],p=c.hasOwnProperty(v);h++,p?(i?c[v]!==i&&(r=!1):i=c[v],c[v]===this[v]&&delete c[v]):r=!1,Object.keys(c).length!==0?u++:delete a[d][s]}u===0&&delete a[d]}for(var y=0;y<this._textLines.length;y++)n+=this._textLines[y].length;r&&h===n&&(this[v]=i,this.removeStyle(v))},removeStyle:function(v){if(!(!this.styles||!v||v==="")){var a=this.styles,h,u,i;for(u in a){h=a[u];for(i in h)delete h[i][v],Object.keys(h[i]).length===0&&delete h[i];Object.keys(h).length===0&&delete a[u]}}},_extendStyles:function(v,a){var h=this.get2DCursorLocation(v);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),g.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),a)},get2DCursorLocation:function(v,a){typeof v>"u"&&(v=this.selectionStart);for(var h=a?this._unwrappedTextLines:this._textLines,u=h.length,i=0;i<u;i++){if(v<=h[i].length)return{lineIndex:i,charIndex:v};v-=h[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:h[i-1].length<v?h[i-1].length:v}},getSelectionStyles:function(v,a,h){typeof v>"u"&&(v=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||v);for(var u=[],i=v;i<a;i++)u.push(this.getStyleAtPosition(i,h));return u},getStyleAtPosition:function(v,a){var h=this.get2DCursorLocation(v),u=a?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return u||{}},setSelectionStyles:function(v,a,h){typeof a>"u"&&(a=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||a);for(var u=a;u<h;u++)this._extendStyles(u,v);return this._forceClearCache=!0,this},_getStyleDeclaration:function(v,a){var h=this.styles&&this.styles[v];return h?h[a]:null},getCompleteStyleDeclaration:function(v,a){for(var h=this._getStyleDeclaration(v,a)||{},u={},i,r=0;r<this._styleProperties.length;r++)i=this._styleProperties[r],u[i]=typeof h[i]>"u"?this[i]:h[i];return u},_setStyleDeclaration:function(v,a,h){this.styles[v][a]=h},_deleteStyleDeclaration:function(v,a){delete this.styles[v][a]},_getLineStyle:function(v){return!!this.styles[v]},_setLineStyle:function(v){this.styles[v]={}},_deleteLineStyle:function(v){delete this.styles[v]}})}(),function(){function v(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}g.IText=g.util.createClass(g.Text,g.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,h){this.callSuper("initialize",a,h),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,h){this[a]!==h&&(this._fireSelectionChanged(),this[a]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,u=this.canvas.viewportTransform;h.save(),h.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(h),this._clearTextArea(h),a||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,h):this.renderSelection(a,h),h.restore()}},_clearTextArea:function(a){var h=this.width+4,u=this.height+4;a.clearRect(-h/2,-u/2,h,u)},_getCursorBoundaries:function(a){typeof a>"u"&&(a=this.selectionStart);var h=this._getLeftOffset(),u=this._getTopOffset(),i=this._getCursorBoundariesOffsets(a);return{left:h,top:u,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,u,i,r=0,n=0,c,d=this.get2DCursorLocation(a);i=d.charIndex,u=d.lineIndex;for(var s=0;s<u;s++)r+=this.getHeightOfLine(s);h=this._getLineLeftOffset(u);var p=this.__charBounds[u][i];return p&&(n=p.left),this.charSpacing!==0&&i===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),c={top:r,left:h+(n>0?n:0)},this.direction==="rtl"&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(a,h){var u=this.get2DCursorLocation(),i=u.lineIndex,r=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(i,r,"fontSize"),c=this.scaleX*this.canvas.getZoom(),d=this.cursorWidth/c,s=a.topOffset,p=this.getValueOfPropertyAt(i,r,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(a.left+a.leftOffset-d/2,s+a.top+p,d,n)},renderSelection:function(a,h){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),c=this.get2DCursorLocation(i),d=n.lineIndex,s=c.lineIndex,p=n.charIndex<0?0:n.charIndex,y=c.charIndex<0?0:c.charIndex,I=d;I<=s;I++){var _=this._getLineLeftOffset(I)||0,E=this.getHeightOfLine(I),D=0,L=0,z=0;if(I===d&&(L=this.__charBounds[d][p].left),I>=d&&I<s)z=r&&!this.isEndOfWrapping(I)?this.width:this.getLineWidth(I)||5;else if(I===s)if(y===0)z=this.__charBounds[s][y].left;else{var X=this._getWidthOfCharSpacing();z=this.__charBounds[s][y-1].left+this.__charBounds[s][y-1].width-X}D=E,(this.lineHeight<1||I===s&&this.lineHeight>1)&&(E/=this.lineHeight);var ut=a.left+_+L,rt=z-L,Et=E,Q=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",Et=1,Q=E):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(ut=this.width-ut-rt),h.fillRect(ut,a.top+a.topOffset+Q,rt,Et),a.topOffset+=D}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),h=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c:h}}}),g.IText.fromObject=function(a,h){if(v(a),a.styles)for(var u in a.styles)for(var i in a.styles[u])v(a.styles[u][i]);g.Object._fromObject("IText",a,h,"text")}}(),function(){var v=g.util.object.clone;g.util.object.extend(g.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var h=a.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,a._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var h=a.canvas;h&&(h._iTextInstances=h._iTextInstances||[],g.util.removeFromArray(h._iTextInstances,a),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,a._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(h){h.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,h,u,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",h,{duration:u,onComplete:function(){r.isAborted||a[i]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var h=this,u=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},u)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var h=0,u=a-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)h++,u--;for(;/\S/.test(this._text[u])&&u>-1;)h++,u--;return a-h},findWordBoundaryRight:function(a){var h=0,u=a;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)h++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)h++,u++;return a+h},findLineBoundaryLeft:function(a){for(var h=0,u=a-1;!/\n/.test(this._text[u])&&u>-1;)h++,u--;return a-h},findLineBoundaryRight:function(a){for(var h=0,u=a;!/\n/.test(this._text[u])&&u<this._text.length;)h++,u++;return a+h},searchWordBoundary:function(a,h){for(var u=this._text,i=this._reSpace.test(u[a])?a-1:a,r=u[i],n=g.reNonWord;!n.test(r)&&i>0&&i<u.length;)i+=h,r=u[i];return n.test(r)&&(i+=h===1?0:1),i},selectWord:function(a){a=a||this.selectionStart;var h=this.searchWordBoundary(a,-1),u=this.searchWordBoundary(a,1);this.selectionStart=h,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var h=this.findLineBoundaryLeft(a),u=this.findLineBoundaryRight(a);return this.selectionStart=h,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){var h=this.getSelectionStartFromPointer(a.e),u=this.selectionStart,i=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||u===i)&&(u===h||i===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,h,u){var i=u.slice(0,a),r=g.util.string.graphemeSplit(i).length;if(a===h)return{selectionStart:r,selectionEnd:r};var n=u.slice(a,h),c=g.util.string.graphemeSplit(n).length;return{selectionStart:r,selectionEnd:r+c}},fromGraphemeToStringSelection:function(a,h,u){var i=u.slice(0,a),r=i.join("").length;if(a===h)return{selectionStart:r,selectionEnd:r};var n=u.slice(a,h),c=n.join("").length;return{selectionStart:r,selectionEnd:r+c}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(a),u=this.get2DCursorLocation(a),i=u.lineIndex,r=u.charIndex,n=this.getValueOfPropertyAt(i,r,"fontSize")*this.lineHeight,c=h.leftOffset,d=this.calcTransformMatrix(),s={x:h.left+c,y:h.top+h.topOffset+n},p=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,I=y.width/p,_=y.height/p,E=I-n,D=_-n,L=y.clientWidth/I,z=y.clientHeight/_;return s=g.util.transformPoint(s,d),s=g.util.transformPoint(s,this.canvas.viewportTransform),s.x*=L,s.y*=z,s.x<0&&(s.x=0),s.x>E&&(s.x=E),s.y<0&&(s.y=0),s.y>D&&(s.y=D),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,h){var u=this.get2DCursorLocation(a,!0),i=this.get2DCursorLocation(h,!0),r=u.lineIndex,n=u.charIndex,c=i.lineIndex,d=i.charIndex,s,p;if(r!==c){if(this.styles[r])for(s=n;s<this._unwrappedTextLines[r].length;s++)delete this.styles[r][s];if(this.styles[c])for(s=d;s<this._unwrappedTextLines[c].length;s++)p=this.styles[c][s],p&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+s-d]=p);for(s=r+1;s<=c;s++)delete this.styles[s];this.shiftLineStyles(c,r-c)}else if(this.styles[r]){p=this.styles[r];var y=d-n,I,_;for(s=n;s<d;s++)delete p[s];for(_ in this.styles[r])I=parseInt(_,10),I>=d&&(p[I-y]=p[_],delete p[_])}},shiftLineStyles:function(a,h){var u=v(this.styles);for(var i in this.styles){var r=parseInt(i,10);r>a&&(this.styles[r+h]=u[r],u[r-h]||delete this.styles[r])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,h,u,i){var r,n={},c=!1,d=this._unwrappedTextLines[a].length===h;u||(u=1),this.shiftLineStyles(a,u),this.styles[a]&&(r=this.styles[a][h===0?h:h-1]);for(var s in this.styles[a]){var p=parseInt(s,10);p>=h&&(c=!0,n[p-h]=this.styles[a][s],d&&h===0||delete this.styles[a][s])}var y=!1;for(c&&!d&&(this.styles[a+u]=n,y=!0),y&&u--;u>0;)i&&i[u-1]?this.styles[a+u]={0:v(i[u-1])}:r?this.styles[a+u]={0:v(r)}:delete this.styles[a+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(a,h,u,i){this.styles||(this.styles={});var r=this.styles[a],n=r?v(r):{};u||(u=1);for(var c in n){var d=parseInt(c,10);d>=h&&(r[d+u]=n[d],n[d-u]||delete r[d])}if(this._forceClearCache=!0,i){for(;u--;)!Object.keys(i[u]).length||(this.styles[a]||(this.styles[a]={}),this.styles[a][h+u]=v(i[u]));return}if(!!r)for(var s=r[h?h-1:1];s&&u--;)this.styles[a][h+u]=v(s)},insertNewStyleBlock:function(a,h,u){for(var i=this.get2DCursorLocation(h,!0),r=[0],n=0,c=0;c<a.length;c++)a[c]===`
`?(n++,r[n]=0):r[n]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],u),u=u&&u.slice(r[0]+1)),n&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],n);for(var c=1;c<n;c++)r[c]>0?this.insertCharStyleObject(i.lineIndex+c,0,r[c],u):u&&(this.styles[i.lineIndex+c][0]=u[0]),u=u&&u.slice(r[c]+1);r[c]>0&&this.insertCharStyleObject(i.lineIndex+c,0,r[c],u)},setSelectionStartEndWithShift:function(a,h,u){u<=a?(h===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=u):u>a&&u<h?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(h===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=u)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),g.util.object.extend(g.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(v){if(!!this.canvas){this.__newClickTime=+new Date;var a=v.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",v),this._stopEvent(v.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(v){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===v.x&&this.__lastPointer.y===v.y},_stopEvent:function(v){v.preventDefault&&v.preventDefault(),v.stopPropagation&&v.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(v){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(v.e))},tripleClickHandler:function(v){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(v.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(v){!this.canvas||!this.editable||v.e.button&&v.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(v.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(v){!this.canvas||!this.editable||v.e.button&&v.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(v){if(this.__isMousedown=!1,!(!this.editable||this.group||v.transform&&v.transform.actionPerformed||v.e.button&&v.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(v.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(v){var a=this.getSelectionStartFromPointer(v),h=this.selectionStart,u=this.selectionEnd;v.shiftKey?this.setSelectionStartEndWithShift(h,u,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(v){for(var a=this.getLocalPointer(v),h=0,u=0,i=0,r=0,n=0,c,d,s=0,p=this._textLines.length;s<p&&i<=a.y;s++)i+=this.getHeightOfLine(s)*this.scaleY,n=s,s>0&&(r+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));c=this._getLineLeftOffset(n),u=c*this.scaleX,d=this._textLines[n],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+u);for(var y=0,I=d.length;y<I&&(h=u,u+=this.__charBounds[n][y].kernedWidth*this.scaleX,u<=a.x);y++)r++;return this._getNewSelectionStartFromOffset(a,h,u,r,I)},_getNewSelectionStartFromOffset:function(v,a,h,u,i){var r=v.x-a,n=h-v.x,c=n>r||n<0?0:1,d=u+c;return this.flipX&&(d=i-d),d>this._text.length&&(d=this._text.length),d}}),g.util.object.extend(g.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=g.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var v=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+v.top+"; left: "+v.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+v.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):g.document.body.appendChild(this.hiddenTextarea),g.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),g.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),g.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),g.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),g.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),g.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),g.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),g.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),g.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(g.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(v){if(!!this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(v.keyCode in a)this[a[v.keyCode]](v);else if(v.keyCode in this.ctrlKeysMapDown&&(v.ctrlKey||v.metaKey))this[this.ctrlKeysMapDown[v.keyCode]](v);else return;v.stopImmediatePropagation(),v.preventDefault(),v.keyCode>=33&&v.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(v){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(v.keyCode in this.ctrlKeysMapUp&&(v.ctrlKey||v.metaKey))this[this.ctrlKeysMapUp[v.keyCode]](v);else return;v.stopImmediatePropagation(),v.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(v){var a=this.fromPaste;if(this.fromPaste=!1,v&&v.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,i=h.length,r,n,c=i-u,d=this.selectionStart,s=this.selectionEnd,p=d!==s,y,I,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),D=d>E.selectionStart;p?(r=this._text.slice(d,s),c+=s-d):i<u&&(D?r=this._text.slice(s+c,s):r=this._text.slice(d,d-c)),n=h.slice(E.selectionEnd-c,E.selectionEnd),r&&r.length&&(n.length&&(y=this.getSelectionStyles(d,d+1,!1),y=n.map(function(){return y[0]})),p?(I=d,_=s):D?(I=s-r.length,_=s):(I=s,_=s+r.length),this.removeStyleFromTo(I,_)),n.length&&(a&&n.join("")===g.copiedText&&!g.disableStyleCopyPaste&&(y=g.copiedTextStyle),this.insertNewStyleBlock(n,d,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(v){this.compositionStart=v.target.selectionStart,this.compositionEnd=v.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(g.copiedText=this.getSelectedText(),g.disableStyleCopyPaste?g.copiedTextStyle=null:g.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(v){return v&&v.clipboardData||g.window.clipboardData},_getWidthBeforeCursor:function(v,a){var h=this._getLineLeftOffset(v),u;return a>0&&(u=this.__charBounds[v][a-1],h+=u.left+u.width),h},getDownCursorOffset:function(v,a){var h=this._getSelectionForOffset(v,a),u=this.get2DCursorLocation(h),i=u.lineIndex;if(i===this._textLines.length-1||v.metaKey||v.keyCode===34)return this._text.length-h;var r=u.charIndex,n=this._getWidthBeforeCursor(i,r),c=this._getIndexOnLine(i+1,n),d=this._textLines[i].slice(r);return d.length+c+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(v,a){return v.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(v,a){var h=this._getSelectionForOffset(v,a),u=this.get2DCursorLocation(h),i=u.lineIndex;if(i===0||v.metaKey||v.keyCode===33)return-h;var r=u.charIndex,n=this._getWidthBeforeCursor(i,r),c=this._getIndexOnLine(i-1,n),d=this._textLines[i].slice(0,r),s=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+c-d.length+(1-s)},_getIndexOnLine:function(v,a){for(var h=this._textLines[v],u=this._getLineLeftOffset(v),i=u,r=0,n,c,d=0,s=h.length;d<s;d++)if(n=this.__charBounds[v][d].width,i+=n,i>a){c=!0;var p=i-n,y=i,I=Math.abs(p-a),_=Math.abs(y-a);r=_<I?d:d-1;break}return c||(r=h.length-1),r},moveCursorDown:function(v){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",v)},moveCursorUp:function(v){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",v)},_moveCursorUpOrDown:function(v,a){var h="get"+v+"CursorOffset",u=this[h](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(v){var a=this._selectionDirection==="left"?this.selectionStart+v:this.selectionEnd+v;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),v!==0},moveCursorWithoutShift:function(v){return v<0?(this.selectionStart+=v,this.selectionEnd=this.selectionStart):(this.selectionEnd+=v,this.selectionStart=this.selectionEnd),v!==0},moveCursorLeft:function(v){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",v)},_move:function(v,a,h){var u;if(v.altKey)u=this["findWordBoundary"+h](this[a]);else if(v.metaKey||v.keyCode===35||v.keyCode===36)u=this["findLineBoundary"+h](this[a]);else return this[a]+=h==="Left"?-1:1,!0;if(typeof u!==void 0&&this[a]!==u)return this[a]=u,!0},_moveLeft:function(v,a){return this._move(v,a,"Left")},_moveRight:function(v,a){return this._move(v,a,"Right")},moveCursorLeftWithoutShift:function(v){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(v,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(v){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(v,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(v,"selectionStart")},moveCursorRight:function(v){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",v)},_moveCursorLeftOrRight:function(v,a){var h="moveCursor"+v+"With";this._currentCursorOpacity=1,a.shiftKey?h+="Shift":h+="outShift",this[h](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(v){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(v,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(v,"selectionEnd")},moveCursorRightWithoutShift:function(v){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(v,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(v,a){typeof a>"u"&&(a=v+1),this.removeStyleFromTo(v,a),this._text.splice(v,a-v),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(v,a,h,u){typeof u>"u"&&(u=h),u>h&&this.removeStyleFromTo(h,u);var i=g.util.string.graphemeSplit(v);this.insertNewStyleBlock(i,h,a),this._text=[].concat(this._text.slice(0,h),i,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var v=g.util.toFixed,a=/  +/g;g.util.object.extend(g.Text.prototype,{_toSVG:function(){var h=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(h.textTop,h.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(h){var u=!0,i=this.getSvgTextDecoration(this);return[h.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",h.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(h,u){var i=[],r=[],n=h,c;this._setSVGBg(r);for(var d=0,s=this._textLines.length;d<s;d++)c=this._getLineLeftOffset(d),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(r,d,u+c,n),this._setSVGTextLineText(i,d,u+c,n),n+=this.getHeightOfLine(d);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(h,u,i,r){var n=h!==h.trim()||h.match(a),c=this.getSvgSpanStyles(u,n),d=c?'style="'+c+'"':"",s=u.deltaY,p="",y=g.Object.NUM_FRACTION_DIGITS;return s&&(p=' dy="'+v(s,y)+'" '),['<tspan x="',v(i,y),'" y="',v(r,y),'" ',p,d,">",g.util.string.escapeXml(h),"</tspan>"].join("")},_setSVGTextLineText:function(h,u,i,r){var n=this.getHeightOfLine(u),c=this.textAlign.indexOf("justify")!==-1,d,s,p="",y,I,_=0,E=this._textLines[u],D;r+=n*(1-this._fontSizeFraction)/this.lineHeight;for(var L=0,z=E.length-1;L<=z;L++)D=L===z||this.charSpacing,p+=E[L],y=this.__charBounds[u][L],_===0?(i+=y.kernedWidth-y.width,_+=y.width):_+=y.kernedWidth,c&&!D&&this._reSpaceAndTab.test(E[L])&&(D=!0),D||(d=d||this.getCompleteStyleDeclaration(u,L),s=this.getCompleteStyleDeclaration(u,L+1),D=this._hasStyleChangedForSvg(d,s)),D&&(I=this._getStyleDeclaration(u,L)||{},h.push(this._createTextCharSpan(p,I,i,r)),p="",d=s,i+=_,_=0)},_pushTextBgRect:function(h,u,i,r,n,c){var d=g.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(u),' x="',v(i,d),'" y="',v(r,d),'" width="',v(n,d),'" height="',v(c,d),`"></rect>
`)},_setSVGTextLineBg:function(h,u,i,r){for(var n=this._textLines[u],c=this.getHeightOfLine(u)/this.lineHeight,d=0,s=0,p,y,I=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),_=0,E=n.length;_<E;_++)p=this.__charBounds[u][_],y=this.getValueOfPropertyAt(u,_,"textBackgroundColor"),y!==I?(I&&this._pushTextBgRect(h,I,i+s,r,d,c),s=p.left,d=p.width,I=y):d+=p.kernedWidth;y&&this._pushTextBgRect(h,y,i+s,r,d,c)},_getFillAttributes:function(h){var u=h&&typeof h=="string"?new g.Color(h):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+h+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(h){for(var u=0,i=0,r=0;r<h;r++)u+=this.getHeightOfLine(r);return i=this.getHeightOfLine(r),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(h){var u=g.Object.prototype.getSvgStyles.call(this,h);return u+" white-space: pre;"}})}(),function(v){var a=v.fabric||(v.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var u=0,i=0,r=0,n={},c=0;c<h.graphemeLines.length;c++)h.graphemeText[r]===`
`&&c>0?(i=0,r++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[r])&&c>0&&(i++,r++),n[c]={line:u,offset:i},r+=h.graphemeLines[c].length,i+=h.graphemeLines[c].length;return n},styleHas:function(h,u){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[u];i&&(u=i.line)}return a.Text.prototype.styleHas.call(this,h,u)},isEmptyStyles:function(h){if(!this.styles)return!0;var u=0,i=h+1,r,n,c=!1,d=this._styleMap[h],s=this._styleMap[h+1];d&&(h=d.line,u=d.offset),s&&(i=s.line,c=i===h,r=s.offset),n=typeof h>"u"?this.styles:{line:this.styles[h]};for(var p in n)for(var y in n[p])if(y>=u&&(!c||y<r))for(var I in n[p][y])return!1;return!0},_getStyleDeclaration:function(h,u){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[h];if(!i)return null;h=i.line,u=i.offset+u}return this.callSuper("_getStyleDeclaration",h,u)},_setStyleDeclaration:function(h,u,i){var r=this._styleMap[h];h=r.line,u=r.offset+u,this.styles[h][u]=i},_deleteStyleDeclaration:function(h,u){var i=this._styleMap[h];h=i.line,u=i.offset+u,delete this.styles[h][u]},_getLineStyle:function(h){var u=this._styleMap[h];return!!this.styles[u.line]},_setLineStyle:function(h){var u=this._styleMap[h];this.styles[u.line]={}},_wrapText:function(h,u){var i=[],r;for(this.isWrapping=!0,r=0;r<h.length;r++)i=i.concat(this._wrapLine(h[r],r,u));return this.isWrapping=!1,i},_measureWord:function(h,u,i){var r=0,n,c=!0;i=i||0;for(var d=0,s=h.length;d<s;d++){var p=this._getGraphemeBox(h[d],u,d+i,n,c);r+=p.kernedWidth,n=h[d]}return r},_wrapLine:function(h,u,i,ut){var n=0,c=this.splitByGrapheme,d=[],s=[],p=c?a.util.string.graphemeSplit(h):h.split(this._wordJoiners),y="",I=0,_=c?"":" ",E=0,D=0,L=0,z=!0,X=this._getWidthOfCharSpacing(),ut=ut||0;p.length===0&&p.push([]),i-=ut;for(var rt=0;rt<p.length;rt++)y=c?p[rt]:a.util.string.graphemeSplit(p[rt]),E=this._measureWord(y,u,I),I+=y.length,n+=D+E-X,n>i&&!z?(d.push(s),s=[],n=E,z=!0):n+=X,!z&&!c&&s.push(_),s=s.concat(y),D=c?0:this._measureWord([_],u,I),I++,z=!1,E>L&&(L=E);return rt&&d.push(s),L+ut>this.dynamicMinWidth&&(this.dynamicMinWidth=L-X+ut),d},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h){return this.splitByGrapheme?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var u=a.Text.prototype._splitTextIntoLines.call(this,h),i=this._wrapText(u.lines,this.width),r=new Array(i.length),n=0;n<i.length;n++)r[n]=i[n].join("");return u.lines=r,u.graphemeLines=i,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var u in this._styleMap)this._textLines[u]&&(h[this._styleMap[u].line]=1);for(var u in this.styles)h[u]||delete this.styles[u]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),a.Textbox.fromObject=function(h,u){return a.Object._fromObject("Textbox",h,u,"text")}}(O),function(){var v=g.controlsUtils,a=v.scaleSkewCursorStyleHandler,h=v.scaleCursorStyleHandler,u=v.scalingEqually,i=v.scalingYOrSkewingX,r=v.scalingXOrSkewingY,n=v.scaleOrSkewActionName,c=g.Object.prototype.controls;if(c.ml=new g.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:r,getActionName:n}),c.mr=new g.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:r,getActionName:n}),c.mb=new g.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:i,getActionName:n}),c.mt=new g.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:i,getActionName:n}),c.tl=new g.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:u}),c.tr=new g.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:u}),c.bl=new g.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:u}),c.br=new g.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:u}),c.mtr=new g.Control({x:0,y:-.5,actionHandler:v.rotationWithSnapping,cursorStyleHandler:v.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),g.Textbox){var d=g.Textbox.prototype.controls={};d.mtr=c.mtr,d.tr=c.tr,d.br=c.br,d.tl=c.tl,d.bl=c.bl,d.mt=c.mt,d.mb=c.mb,d.mr=new g.Control({x:.5,y:0,actionHandler:v.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),d.ml=new g.Control({x:-.5,y:0,actionHandler:v.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()},3053:function(M,O,m){var g=m(602);function A(k,R,F){var W,v;if(F=F||0,!g(R))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(R,k,F);for(v=R.length,W=F;F>=0&&W<v;W+=1)if(R[W]===k)return W;return-1}M.exports=A},8592:function(M,O,m){var g=m(602),A=m(6092),k=m(5573);function R(F,W,v){g(F)?A(F,W,v):k(F,W,v)}M.exports=R},6092:function(M){function O(m,g,A){var k=0,R=m.length;for(A=A||null;k<R&&g.call(A,m[k],k,m)!==!1;k+=1);}M.exports=O},5573:function(M){function O(m,g,A){var k;A=A||null;for(k in m)if(m.hasOwnProperty(k)&&g.call(A,m[k],k,m)===!1)break}M.exports=O},9052:function(M,O,m){var g=m(961),A=m(9886),k=m(2560),R=m(5393),F=m(602),W=m(5183),v=m(8592),a=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(u){g(u.prototype,h.prototype)},h.prototype._getHandlerItem=function(u,i){var r={handler:u};return i&&(r.context=i),r},h.prototype._safeEvent=function(u){var i=this.events,r;return i||(i=this.events={}),u&&(r=i[u],r||(r=[],i[u]=r),i=r),i},h.prototype._safeContext=function(){var u=this.contexts;return u||(u=this.contexts=[]),u},h.prototype._indexOfContext=function(u){for(var i=this._safeContext(),r=0;i[r];){if(u===i[r][0])return r;r+=1}return-1},h.prototype._memorizeContext=function(u){var i,r;!A(u)||(i=this._safeContext(),r=this._indexOfContext(u),r>-1?i[r][1]+=1:i.push([u,1]))},h.prototype._forgetContext=function(u){var i,r;!A(u)||(i=this._safeContext(),r=this._indexOfContext(u),r>-1&&(i[r][1]-=1,i[r][1]<=0&&i.splice(r,1)))},h.prototype._bindEvent=function(u,i,r){var n=this._safeEvent(u);this._memorizeContext(r),n.push(this._getHandlerItem(i,r))},h.prototype.on=function(u,i,r){var n=this;k(u)?(u=u.split(a),v(u,function(c){n._bindEvent(c,i,r)})):R(u)&&(r=i,v(u,function(c,d){n.on(d,c,r)}))},h.prototype.once=function(u,i,r){var n=this;if(R(u)){r=i,v(u,function(d,s){n.once(s,d,r)});return}function c(){i.apply(r,arguments),n.off(u,c,r)}this.on(u,c,r)},h.prototype._spliceMatches=function(u,i){var r=0,n;if(!!F(u))for(n=u.length;r<n;r+=1)i(u[r])===!0&&(u.splice(r,1),n-=1,r-=1)},h.prototype._matchHandler=function(u){var i=this;return function(r){var n=u===r.handler;return n&&i._forgetContext(r.context),n}},h.prototype._matchContext=function(u){var i=this;return function(r){var n=u===r.context;return n&&i._forgetContext(r.context),n}},h.prototype._matchHandlerAndContext=function(u,i){var r=this;return function(n){var c=u===n.handler,d=i===n.context,s=c&&d;return s&&r._forgetContext(n.context),s}},h.prototype._offByEventName=function(u,i){var r=this,n=W(i),c=r._matchHandler(i);u=u.split(a),v(u,function(d){var s=r._safeEvent(d);n?r._spliceMatches(s,c):(v(s,function(p){r._forgetContext(p.context)}),r.events[d]=[])})},h.prototype._offByHandler=function(u){var i=this,r=this._matchHandler(u);v(this._safeEvent(),function(n){i._spliceMatches(n,r)})},h.prototype._offByObject=function(u,i){var r=this,n;this._indexOfContext(u)<0?v(u,function(c,d){r.off(d,c)}):k(i)?(n=this._matchContext(u),r._spliceMatches(this._safeEvent(i),n)):W(i)?(n=this._matchHandlerAndContext(i,u),v(this._safeEvent(),function(c){r._spliceMatches(c,n)})):(n=this._matchContext(u),v(this._safeEvent(),function(c){r._spliceMatches(c,n)}))},h.prototype.off=function(u,i){k(u)?this._offByEventName(u,i):arguments.length?W(u)?this._offByHandler(u):R(u)&&this._offByObject(u,i):(this.events={},this.contexts=[])},h.prototype.fire=function(u){this.invoke.apply(this,arguments)},h.prototype.invoke=function(u){var i,r,n,c;if(!this.hasListener(u))return!0;for(i=this._safeEvent(u),r=Array.prototype.slice.call(arguments,1),n=0;i[n];){if(c=i[n],c.handler.apply(c.context,r)===!1)return!1;n+=1}return!0},h.prototype.hasListener=function(u){return this.getListenerLength(u)>0},h.prototype.getListenerLength=function(u){var i=this._safeEvent(u);return i.length},M.exports=h},961:function(M){function O(m,g){var A=Object.prototype.hasOwnProperty,k,R,F,W;for(F=1,W=arguments.length;F<W;F+=1){k=arguments[F];for(R in k)A.call(k,R)&&(m[R]=k[R])}return m}M.exports=O},1610:function(M,O,m){var g=m(5695),A=m(3778);function k(R,F){for(var W=arguments,v=W[0],a=1,h=W.length;a<h;a+=1){if(g(v)||A(v))return;v=v[W[a]]}return v}M.exports=k},4564:function(M,O,m){var g=m(5573);function A(k,R){var F=document.createElement("img"),W="";return g(R,function(v,a){W+="&"+a+"="+v}),W=W.substring(1),F.src=k+"?"+W,F.style.display="none",document.body.appendChild(F),document.body.removeChild(F),F}M.exports=A},4729:function(M,O,m){var g=m(5695),A=m(4564),k=7*24*60*60*1e3;function R(W){var v=new Date().getTime();return v-W>k}function F(W,v){var a="https://www.google-analytics.com/collect",h=location.hostname,u="event",i="use",r="TOAST UI "+W+" for "+h+": Statistics",n=window.localStorage.getItem(r);!g(window.tui)&&window.tui.usageStatistics===!1||n&&!R(n)||(window.localStorage.setItem(r,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&A(a,{v:1,t:u,tid:v,cid:h,dp:h,dh:W,el:W,ec:i})},1e3))}M.exports=F},602:function(M){function O(m){return m instanceof Array}M.exports=O},9886:function(M,O,m){var g=m(5695),A=m(3778);function k(R){return!g(R)&&!A(R)}M.exports=k},5183:function(M){function O(m){return m instanceof Function}M.exports=O},3778:function(M){function O(m){return m===null}M.exports=O},5393:function(M){function O(m){return m===Object(m)}M.exports=O},2560:function(M){function O(m){return typeof m=="string"||m instanceof String}M.exports=O},5695:function(M){function O(m){return m===void 0}M.exports=O},4426:function(M,O,m){M.exports=m(4486)},9406:function(M,O,m){M.exports=m(4877)},789:function(M,O,m){M.exports=m(7178)},381:function(M,O,m){M.exports=m(5603)},7636:function(M,O,m){M.exports=m(1206)},1899:function(M,O,m){M.exports=m(6174)},899:function(M,O,m){M.exports=m(57)},8005:function(M,O,m){M.exports=m(4741)},6562:function(M,O,m){M.exports=m(8368)},9131:function(M,O,m){M.exports=m(3739)},4383:function(M,O,m){M.exports=m(172)},6065:function(M,O,m){M.exports=m(4963)},1734:function(M,O,m){M.exports=m(7820)},2461:function(M,O,m){M.exports=m(5636)},5214:function(M,O,m){M.exports=m(5059)},6397:function(M,O,m){M.exports=m(3969)},8189:function(M,O,m){M.exports=m(6618)},9146:function(M,O,m){M.exports=m(5279)},4496:function(M,O,m){M.exports=m(9562)},3972:function(M,O,m){M.exports=m(652)},7172:function(M,O,m){M.exports=m(2813)},1845:function(M,O,m){M.exports=m(8664)},662:function(M,O,m){M.exports=m(1457)},711:function(M,O,m){M.exports=m(2937)},6623:function(M,O,m){M.exports=m(9297)},7077:function(M,O,m){M.exports=m(8026)},9856:function(M,O,m){M.exports=m(2044)},4230:function(M,O,m){M.exports=m(2214)},184:function(M,O,m){M.exports=m(9256)},3742:function(M,O,m){M.exports=m(5659)},1801:function(M){var O={rect:1,circle:2,triangle:1},m={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function g(a){var h=a.originX,u=a.originY,i=h.substring(0,1)+u.substring(0,1);a.startPoint=a.origins[i]}function A(a,h,u){var i=a.x,r=a.y,n=h.x,c=h.y,d=u*Math.PI/180,s=(n-i)*Math.cos(d)-(c-r)*Math.sin(d)+i,p=(n-i)*Math.sin(d)+(c-r)*Math.cos(d)+r;return{originX:i>s?"right":"left",originY:r>p?"bottom":"top"}}function k(a){return a.originX==="center"&&a.originY==="center"}function R(a,h){var u=h.getPointByOrigin("center","center"),i=-h.angle,r=A(u,a,i),n=r.originX,c=r.originY,d=h.getPointByOrigin(n,c),s=h.left-(u.x-d.x),p=h.top-(u.y-d.y);h.set({originX:n,originY:c,left:s,top:p}),h.setCoords()}function F(a,h){var u=h.startPoint,i=-h.angle,r=A(u,a,i),n=r.originX,c=r.originY;h.setPositionByOrigin(u,n,c),h.setCoords()}function W(a){var h=a.type,u=a.scaleX,i=a.scaleY,r=m[h],n=a[r.w]*u,c=a[r.h]*i;if(a.isRegular){var d=Math.max(u,i);n=a[r.w]*d,c=a[r.h]*d}var s={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};s[r.w]=n,s[r.h]=c,a.set(s)}function v(a,h){var u=h.type,i=h.strokeWidth,r=h.startPoint,n=O[u],c=m[u],d=h.type==="triangle",s={},p=Math.abs(r.x-a.x)/n,y=Math.abs(r.y-a.y)/n;p>i&&(p-=i/n),y>i&&(y-=i/n),h.isRegular&&(p=y=Math.max(p,y),d&&(y=Math.sqrt(3)/2*p)),s[c.w]=p,s[c.h]=y,h.set(s)}M.exports={setOrigins:function(h){var u=h.getPointByOrigin("left","top"),i=h.getPointByOrigin("right","top"),r=h.getPointByOrigin("right","bottom"),n=h.getPointByOrigin("left","bottom");h.origins={lt:u,rt:i,rb:r,lb:n}},resize:function(h,u,i){k(h)&&(R(u,h),g(h)),i?W(h):v(u,h),F(u,h)},adjustOriginToCenter:function(h){var u=h.getPointByOrigin("center","center"),i=h.originX,r=h.originY,n=h.getPointByOrigin(i,r),c=h.left+(u.x-n.x),d=h.top+(u.y-n.y);h.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:c,top:d}),h.setCoords()}}},2221:function(M,O,m){m(5454),m(9173);var g=m(7545);M.exports=g.Array.from},5078:function(M,O,m){m(8118);var g=m(7545);M.exports=g.Array.isArray},6135:function(M,O,m){m(9106);var g=m(5607);M.exports=g("Array").concat},9510:function(M,O,m){m(1710);var g=m(5607);M.exports=g("Array").fill},3971:function(M,O,m){m(3436);var g=m(5607);M.exports=g("Array").filter},98:function(M,O,m){m(9823);var g=m(5607);M.exports=g("Array").forEach},2089:function(M,O,m){m(2276);var g=m(5607);M.exports=g("Array").indexOf},6209:function(M,O,m){m(3838);var g=m(5607);M.exports=g("Array").map},2671:function(M,O,m){m(5818);var g=m(5607);M.exports=g("Array").slice},1375:function(M,O,m){m(2178);var g=m(5607);M.exports=g("Array").splice},3528:function(M,O,m){m(665);var g=m(5607);M.exports=g("Function").bind},5739:function(M,O,m){m(8939),m(5454);var g=m(8703);M.exports=g},278:function(M,O,m){var g=m(3528),A=Function.prototype;M.exports=function(k){var R=k.bind;return k===A||k instanceof Function&&R===A.bind?g:R}},1484:function(M,O,m){var g=m(6135),A=Array.prototype;M.exports=function(k){var R=k.concat;return k===A||k instanceof Array&&R===A.concat?g:R}},7731:function(M,O,m){var g=m(9510),A=Array.prototype;M.exports=function(k){var R=k.fill;return k===A||k instanceof Array&&R===A.fill?g:R}},3669:function(M,O,m){var g=m(3971),A=Array.prototype;M.exports=function(k){var R=k.filter;return k===A||k instanceof Array&&R===A.filter?g:R}},2604:function(M,O,m){var g=m(2089),A=Array.prototype;M.exports=function(k){var R=k.indexOf;return k===A||k instanceof Array&&R===A.indexOf?g:R}},263:function(M,O,m){var g=m(6209),A=Array.prototype;M.exports=function(k){var R=k.map;return k===A||k instanceof Array&&R===A.map?g:R}},7663:function(M,O,m){var g=m(2671),A=Array.prototype;M.exports=function(k){var R=k.slice;return k===A||k instanceof Array&&R===A.slice?g:R}},5063:function(M,O,m){var g=m(1375),A=Array.prototype;M.exports=function(k){var R=k.splice;return k===A||k instanceof Array&&R===A.splice?g:R}},6813:function(M,O,m){var g=m(3842),A=String.prototype;M.exports=function(k){var R=k.trim;return typeof k=="string"||k===A||k instanceof String&&R===A.trim?g:R}},6285:function(M,O,m){m(2666);var g=m(7545);M.exports=g.Number.parseInt},3213:function(M,O,m){m(3113);var g=m(7545),A=g.Object;M.exports=function(R,F){return A.create(R,F)}},3512:function(M,O,m){m(297);var g=m(7545),A=g.Object,k=M.exports=function(F,W,v){return A.defineProperty(F,W,v)};A.defineProperty.sham&&(k.sham=!0)},8168:function(M,O,m){m(9234);var g=m(7545);M.exports=g.Object.getPrototypeOf},8651:function(M,O,m){m(2647);var g=m(7545);M.exports=g.Object.keys},3083:function(M,O,m){m(3222);var g=m(7545);M.exports=g.Object.setPrototypeOf},2987:function(M,O,m){m(4859);var g=m(7545);M.exports=g.parseFloat},2239:function(M,O,m){m(5706);var g=m(7545);M.exports=g.parseInt},3154:function(M,O,m){m(4242),m(8939),m(6663),m(9021),m(7884),m(8885),m(1868),m(5454);var g=m(7545);M.exports=g.Promise},6577:function(M,O,m){m(5397);var g=m(7545);M.exports=g.Reflect.construct},3842:function(M,O,m){m(957);var g=m(5607);M.exports=g("String").trim},5008:function(M,O,m){m(9106),m(6663),m(6187),m(9781),m(492),m(6681),m(9594),m(3665),m(9017),m(1250),m(9786),m(503),m(6565),m(9322),m(3610),m(6886),m(3514),m(8671),m(8556),m(1367);var g=m(7545);M.exports=g.Symbol},994:function(M,O,m){m(8939),m(6663),m(5454),m(3665);var g=m(9207);M.exports=g.f("iterator")},2813:function(M,O,m){var g=m(3822);M.exports=g},8664:function(M,O,m){var g=m(1434);M.exports=g},1457:function(M,O,m){var g=m(7710);M.exports=g},2937:function(M,O,m){var g=m(4741);M.exports=g},9297:function(M,O,m){var g=m(4963);M.exports=g},8026:function(M,O,m){var g=m(7820);M.exports=g},2044:function(M,O,m){var g=m(8980);M.exports=g},2214:function(M,O,m){var g=m(6672);M.exports=g},9256:function(M,O,m){var g=m(2285);m(177),m(9031),m(6658),m(1875),m(8658),m(4592),m(6680),M.exports=g},5659:function(M,O,m){var g=m(8535);M.exports=g},6235:function(M,O,m){var g=m(6447),A=m(9288);M.exports=function(k){if(g(k))return k;throw TypeError(A(k)+" is not a function")}},1404:function(M,O,m){var g=m(2091),A=m(9288);M.exports=function(k){if(g(k))return k;throw TypeError(A(k)+" is not a constructor")}},7757:function(M,O,m){var g=m(6447);M.exports=function(A){if(typeof A=="object"||g(A))return A;throw TypeError("Can't set "+String(A)+" as a prototype")}},7423:function(M){M.exports=function(){}},6961:function(M){M.exports=function(O,m,g){if(O instanceof m)return O;throw TypeError("Incorrect "+(g?g+" ":"")+"invocation")}},1138:function(M,O,m){var g=m(5744);M.exports=function(A){if(g(A))return A;throw TypeError(String(A)+" is not an object")}},2724:function(M,O,m){var g=m(1795),A=m(7739),k=m(4104);M.exports=function(F){for(var W=g(this),v=k(W),a=arguments.length,h=A(a>1?arguments[1]:void 0,v),u=a>2?arguments[2]:void 0,i=u===void 0?v:A(u,v);i>h;)W[h++]=F;return W}},7397:function(M,O,m){var g=m(454).forEach,A=m(424),k=A("forEach");M.exports=k?[].forEach:function(F){return g(this,F,arguments.length>1?arguments[1]:void 0)}},841:function(M,O,m){var g=m(8043),A=m(1795),k=m(1635),R=m(6109),F=m(2091),W=m(4104),v=m(9361),a=m(1669),h=m(8703);M.exports=function(i){var r=A(i),n=F(this),c=arguments.length,d=c>1?arguments[1]:void 0,s=d!==void 0;s&&(d=g(d,c>2?arguments[2]:void 0,2));var p=h(r),y=0,I,_,E,D,L,z;if(p&&!(this==Array&&R(p)))for(D=a(r,p),L=D.next,_=n?new this:[];!(E=L.call(D)).done;y++)z=s?k(D,d,[E.value,y],!0):E.value,v(_,y,z);else for(I=W(r),_=n?new this(I):Array(I);I>y;y++)z=s?d(r[y],y):r[y],v(_,y,z);return _.length=y,_}},8180:function(M,O,m){var g=m(101),A=m(7739),k=m(4104),R=function(F){return function(W,v,a){var h=g(W),u=k(h),i=A(a,u),r;if(F&&v!=v){for(;u>i;)if(r=h[i++],r!=r)return!0}else for(;u>i;i++)if((F||i in h)&&h[i]===v)return F||i||0;return!F&&-1}};M.exports={includes:R(!0),indexOf:R(!1)}},454:function(M,O,m){var g=m(8043),A=m(2202),k=m(1795),R=m(4104),F=m(1321),W=[].push,v=function(a){var h=a==1,u=a==2,i=a==3,r=a==4,n=a==6,c=a==7,d=a==5||n;return function(s,p,y,I){for(var _=k(s),E=A(_),D=g(p,y,3),L=R(E),z=0,X=I||F,ut=h?X(s,L):u||c?X(s,0):void 0,rt,Et;L>z;z++)if((d||z in E)&&(rt=E[z],Et=D(rt,z,_),a))if(h)ut[z]=Et;else if(Et)switch(a){case 3:return!0;case 5:return rt;case 6:return z;case 2:W.call(ut,rt)}else switch(a){case 4:return!1;case 7:W.call(ut,rt)}return n?-1:i||r?r:ut}};M.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},242:function(M,O,m){var g=m(6192),A=m(8182),k=m(4218),R=A("species");M.exports=function(F){return k>=51||!g(function(){var W=[],v=W.constructor={};return v[R]=function(){return{foo:1}},W[F](Boolean).foo!==1})}},424:function(M,O,m){var g=m(6192);M.exports=function(A,k){var R=[][A];return!!R&&g(function(){R.call(null,k||function(){throw 1},1)})}},3712:function(M,O,m){var g=m(4770),A=m(2091),k=m(5744),R=m(8182),F=R("species");M.exports=function(W){var v;return g(W)&&(v=W.constructor,A(v)&&(v===Array||g(v.prototype))?v=void 0:k(v)&&(v=v[F],v===null&&(v=void 0))),v===void 0?Array:v}},1321:function(M,O,m){var g=m(3712);M.exports=function(A,k){return new(g(A))(k===0?0:k)}},1635:function(M,O,m){var g=m(1138),A=m(6639);M.exports=function(k,R,F,W){try{return W?R(g(F)[0],F[1]):R(F)}catch(v){A(k,"throw",v)}}},9770:function(M,O,m){var g=m(8182),A=g("iterator"),k=!1;try{var R=0,F={next:function(){return{done:!!R++}},return:function(){k=!0}};F[A]=function(){return this},Array.from(F,function(){throw 2})}catch{}M.exports=function(W,v){if(!v&&!k)return!1;var a=!1;try{var h={};h[A]=function(){return{next:function(){return{done:a=!0}}}},W(h)}catch{}return a}},9272:function(M){var O={}.toString;M.exports=function(m){return O.call(m).slice(8,-1)}},4696:function(M,O,m){var g=m(3471),A=m(6447),k=m(9272),R=m(8182),F=R("toStringTag"),W=k(function(){return arguments}())=="Arguments",v=function(a,h){try{return a[h]}catch{}};M.exports=g?k:function(a){var h,u,i;return a===void 0?"Undefined":a===null?"Null":typeof(u=v(h=Object(a),F))=="string"?u:W?k(h):(i=k(h))=="Object"&&A(h.callee)?"Arguments":i}},4635:function(M,O,m){var g=m(6192);M.exports=!g(function(){function A(){}return A.prototype.constructor=null,Object.getPrototypeOf(new A)!==A.prototype})},5148:function(M,O,m){var g=m(4413).IteratorPrototype,A=m(2853),k=m(774),R=m(1284),F=m(7771),W=function(){return this};M.exports=function(v,a,h){var u=a+" Iterator";return v.prototype=A(g,{next:k(1,h)}),R(v,u,!1,!0),F[u]=W,v}},8711:function(M,O,m){var g=m(69),A=m(2760),k=m(774);M.exports=g?function(R,F,W){return A.f(R,F,k(1,W))}:function(R,F,W){return R[F]=W,R}},774:function(M){M.exports=function(O,m){return{enumerable:!(O&1),configurable:!(O&2),writable:!(O&4),value:m}}},9361:function(M,O,m){var g=m(77),A=m(2760),k=m(774);M.exports=function(R,F,W){var v=g(F);v in R?A.f(R,v,k(0,W)):R[v]=W}},7218:function(M,O,m){var g=m(3085),A=m(5546),k=m(2282),R=m(6447),F=m(5148),W=m(9341),v=m(4469),a=m(1284),h=m(8711),u=m(9482),i=m(8182),r=m(7771),n=m(4413),c=k.PROPER,d=k.CONFIGURABLE,s=n.IteratorPrototype,p=n.BUGGY_SAFARI_ITERATORS,y=i("iterator"),I="keys",_="values",E="entries",D=function(){return this};M.exports=function(L,z,X,ut,rt,Et,Q){F(X,z,ut);var St=function(N){if(N===rt&&J)return J;if(!p&&N in gt)return gt[N];switch(N){case I:return function(){return new X(this,N)};case _:return function(){return new X(this,N)};case E:return function(){return new X(this,N)}}return function(){return new X(this)}},j=z+" Iterator",jt=!1,gt=L.prototype,Nt=gt[y]||gt["@@iterator"]||rt&&gt[rt],J=!p&&Nt||St(rt),et=z=="Array"&&gt.entries||Nt,Z,H,at;if(et&&(Z=W(et.call(new L)),Z!==Object.prototype&&Z.next&&(!A&&W(Z)!==s&&(v?v(Z,s):R(Z[y])||u(Z,y,D)),a(Z,j,!0,!0),A&&(r[j]=D))),c&&rt==_&&Nt&&Nt.name!==_&&(!A&&d?h(gt,"name",_):(jt=!0,J=function(){return Nt.call(this)})),rt)if(H={values:St(_),keys:Et?J:St(I),entries:St(E)},Q)for(at in H)(p||jt||!(at in gt))&&u(gt,at,H[at]);else g({target:z,proto:!0,forced:p||jt},H);return(!A||Q)&&gt[y]!==J&&u(gt,y,J,{name:rt}),r[z]=J,H}},1488:function(M,O,m){var g=m(7545),A=m(4500),k=m(9207),R=m(2760).f;M.exports=function(F){var W=g.Symbol||(g.Symbol={});A(W,F)||R(W,F,{value:k.f(F)})}},69:function(M,O,m){var g=m(6192);M.exports=!g(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(M,O,m){var g=m(8576),A=m(5744),k=g.document,R=A(k)&&A(k.createElement);M.exports=function(F){return R?k.createElement(F):{}}},7365:function(M){M.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(M){M.exports=typeof window=="object"},9347:function(M,O,m){var g=m(8989),A=m(8576);M.exports=/ipad|iphone|ipod/i.test(g)&&A.Pebble!==void 0},9536:function(M,O,m){var g=m(8989);M.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(g)},224:function(M,O,m){var g=m(9272),A=m(8576);M.exports=g(A.process)=="process"},5914:function(M,O,m){var g=m(8989);M.exports=/web0s(?!.*chrome)/i.test(g)},8989:function(M,O,m){var g=m(150);M.exports=g("navigator","userAgent")||""},4218:function(M,O,m){var g=m(8576),A=m(8989),k=g.process,R=g.Deno,F=k&&k.versions||R&&R.version,W=F&&F.v8,v,a;W?(v=W.split("."),a=v[0]<4?1:v[0]+v[1]):A&&(v=A.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=A.match(/Chrome\/(\d+)/),v&&(a=v[1]))),M.exports=a&&+a},5607:function(M,O,m){var g=m(7545);M.exports=function(A){return g[A+"Prototype"]}},2952:function(M){M.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(M,O,m){var g=m(8576),A=m(6447),k=m(5141).f,R=m(9245),F=m(7545),W=m(8043),v=m(8711),a=m(4500),h=function(u){var i=function(r,n,c){if(this instanceof u){switch(arguments.length){case 0:return new u;case 1:return new u(r);case 2:return new u(r,n)}return new u(r,n,c)}return u.apply(this,arguments)};return i.prototype=u.prototype,i};M.exports=function(u,i){var r=u.target,n=u.global,c=u.stat,d=u.proto,s=n?g:c?g[r]:(g[r]||{}).prototype,p=n?F:F[r]||v(F,r,{})[r],y=p.prototype,I,_,E,D,L,z,X,ut,rt;for(D in i)I=R(n?D:r+(c?".":"#")+D,u.forced),_=!I&&s&&a(s,D),z=p[D],_&&(u.noTargetGet?(rt=k(s,D),X=rt&&rt.value):X=s[D]),L=_&&X?X:i[D],!(_&&typeof z==typeof L)&&(u.bind&&_?ut=W(L,g):u.wrap&&_?ut=h(L):d&&A(L)?ut=W(Function.call,L):ut=L,(u.sham||L&&L.sham||z&&z.sham)&&v(ut,"sham",!0),v(p,D,ut),d&&(E=r+"Prototype",a(F,E)||v(F,E,{}),v(F[E],D,L),u.real&&y&&!y[D]&&v(y,D,L)))}},6192:function(M){M.exports=function(O){try{return!!O()}catch{return!0}}},8043:function(M,O,m){var g=m(6235);M.exports=function(A,k,R){if(g(A),k===void 0)return A;switch(R){case 0:return function(){return A.call(k)};case 1:return function(F){return A.call(k,F)};case 2:return function(F,W){return A.call(k,F,W)};case 3:return function(F,W,v){return A.call(k,F,W,v)}}return function(){return A.apply(k,arguments)}}},6782:function(M,O,m){var g=m(6235),A=m(5744),k=[].slice,R={},F=function(W,v,a){if(!(v in R)){for(var h=[],u=0;u<v;u++)h[u]="a["+u+"]";R[v]=Function("C,a","return new C("+h.join(",")+")")}return R[v](W,a)};M.exports=Function.bind||function(v){var a=g(this),h=k.call(arguments,1),u=function(){var r=h.concat(k.call(arguments));return this instanceof u?F(a,r.length,r):a.apply(v,r)};return A(a.prototype)&&(u.prototype=a.prototype),u}},2282:function(M,O,m){var g=m(69),A=m(4500),k=Function.prototype,R=g&&Object.getOwnPropertyDescriptor,F=A(k,"name"),W=F&&function(){}.name==="something",v=F&&(!g||g&&R(k,"name").configurable);M.exports={EXISTS:F,PROPER:W,CONFIGURABLE:v}},150:function(M,O,m){var g=m(7545),A=m(8576),k=m(6447),R=function(F){return k(F)?F:void 0};M.exports=function(F,W){return arguments.length<2?R(g[F])||R(A[F]):g[F]&&g[F][W]||A[F]&&A[F][W]}},8703:function(M,O,m){var g=m(4696),A=m(5037),k=m(7771),R=m(8182),F=R("iterator");M.exports=function(W){if(W!=null)return A(W,F)||A(W,"@@iterator")||k[g(W)]}},1669:function(M,O,m){var g=m(6235),A=m(1138),k=m(8703);M.exports=function(R,F){var W=arguments.length<2?k(R):F;if(g(W))return A(W.call(R));throw TypeError(String(R)+" is not iterable")}},5037:function(M,O,m){var g=m(6235);M.exports=function(A,k){var R=A[k];return R==null?void 0:g(R)}},8576:function(M,O,m){var g=function(A){return A&&A.Math==Math&&A};M.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof m.g=="object"&&m.g)||function(){return this}()||Function("return this")()},4500:function(M,O,m){var g=m(1795),A={}.hasOwnProperty;M.exports=Object.hasOwn||function(R,F){return A.call(g(R),F)}},4535:function(M){M.exports={}},3681:function(M,O,m){var g=m(8576);M.exports=function(A,k){var R=g.console;R&&R.error&&(arguments.length===1?R.error(A):R.error(A,k))}},7403:function(M,O,m){var g=m(150);M.exports=g("document","documentElement")},188:function(M,O,m){var g=m(69),A=m(6192),k=m(7449);M.exports=!g&&!A(function(){return Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(M,O,m){var g=m(6192),A=m(9272),k="".split;M.exports=g(function(){return!Object("z").propertyIsEnumerable(0)})?function(R){return A(R)=="String"?k.call(R,""):Object(R)}:Object},9516:function(M,O,m){var g=m(6447),A=m(6434),k=Function.toString;g(A.inspectSource)||(A.inspectSource=function(R){return k.call(R)}),M.exports=A.inspectSource},273:function(M,O,m){var g=m(5744),A=m(8711);M.exports=function(k,R){g(R)&&"cause"in R&&A(k,"cause",k.cause)}},3326:function(M,O,m){var g=m(8921),A=m(8576),k=m(5744),R=m(8711),F=m(4500),W=m(6434),v=m(9766),a=m(4535),h="Object already initialized",u=A.WeakMap,i,r,n,c=function(E){return n(E)?r(E):i(E,{})},d=function(E){return function(D){var L;if(!k(D)||(L=r(D)).type!==E)throw TypeError("Incompatible receiver, "+E+" required");return L}};if(g||W.state){var s=W.state||(W.state=new u),p=s.get,y=s.has,I=s.set;i=function(E,D){if(y.call(s,E))throw new TypeError(h);return D.facade=E,I.call(s,E,D),D},r=function(E){return p.call(s,E)||{}},n=function(E){return y.call(s,E)}}else{var _=v("state");a[_]=!0,i=function(E,D){if(F(E,_))throw new TypeError(h);return D.facade=E,R(E,_,D),D},r=function(E){return F(E,_)?E[_]:{}},n=function(E){return F(E,_)}}M.exports={set:i,get:r,has:n,enforce:c,getterFor:d}},6109:function(M,O,m){var g=m(8182),A=m(7771),k=g("iterator"),R=Array.prototype;M.exports=function(F){return F!==void 0&&(A.Array===F||R[k]===F)}},4770:function(M,O,m){var g=m(9272);M.exports=Array.isArray||function(k){return g(k)=="Array"}},6447:function(M){M.exports=function(O){return typeof O=="function"}},2091:function(M,O,m){var g=m(6192),A=m(6447),k=m(4696),R=m(150),F=m(9516),W=[],v=R("Reflect","construct"),a=/^\s*(?:class|function)\b/,h=a.exec,u=!a.exec(function(){}),i=function(n){if(!A(n))return!1;try{return v(Object,W,n),!0}catch{return!1}},r=function(n){if(!A(n))return!1;switch(k(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return u||!!h.call(a,F(n))};M.exports=!v||g(function(){var n;return i(i.call)||!i(Object)||!i(function(){n=!0})||n})?r:i},9245:function(M,O,m){var g=m(6192),A=m(6447),k=/#|\.prototype\./,R=function(h,u){var i=W[F(h)];return i==a?!0:i==v?!1:A(u)?g(u):!!u},F=R.normalize=function(h){return String(h).replace(k,".").toLowerCase()},W=R.data={},v=R.NATIVE="N",a=R.POLYFILL="P";M.exports=R},5744:function(M,O,m){var g=m(6447);M.exports=function(A){return typeof A=="object"?A!==null:g(A)}},5546:function(M){M.exports=!0},3236:function(M,O,m){var g=m(6447),A=m(150),k=m(615);M.exports=k?function(R){return typeof R=="symbol"}:function(R){var F=A("Symbol");return g(F)&&Object(R)instanceof F}},3442:function(M,O,m){var g=m(1138),A=m(6109),k=m(4104),R=m(8043),F=m(1669),W=m(8703),v=m(6639),a=function(h,u){this.stopped=h,this.result=u};M.exports=function(h,u,i){var r=i&&i.that,n=!!(i&&i.AS_ENTRIES),c=!!(i&&i.IS_ITERATOR),d=!!(i&&i.INTERRUPTED),s=R(u,r,1+n+d),p,y,I,_,E,D,L,z=function(ut){return p&&v(p,"normal",ut),new a(!0,ut)},X=function(ut){return n?(g(ut),d?s(ut[0],ut[1],z):s(ut[0],ut[1])):d?s(ut,z):s(ut)};if(c)p=h;else{if(y=W(h),!y)throw TypeError(String(h)+" is not iterable");if(A(y)){for(I=0,_=k(h);_>I;I++)if(E=X(h[I]),E&&E instanceof a)return E;return new a(!1)}p=F(h,y)}for(D=p.next;!(L=D.call(p)).done;){try{E=X(L.value)}catch(ut){v(p,"throw",ut)}if(typeof E=="object"&&E&&E instanceof a)return E}return new a(!1)}},6639:function(M,O,m){var g=m(1138),A=m(5037);M.exports=function(k,R,F){var W,v;g(k);try{if(W=A(k,"return"),!W){if(R==="throw")throw F;return F}W=W.call(k)}catch(a){v=!0,W=a}if(R==="throw")throw F;if(v)throw W;return g(W),F}},4413:function(M,O,m){var g=m(6192),A=m(6447),k=m(2853),R=m(9341),F=m(9482),W=m(8182),v=m(5546),a=W("iterator"),h=!1,u,i,r;[].keys&&(r=[].keys(),"next"in r?(i=R(R(r)),i!==Object.prototype&&(u=i)):h=!0);var n=u==null||g(function(){var c={};return u[a].call(c)!==c});n?u={}:v&&(u=k(u)),A(u[a])||F(u,a,function(){return this}),M.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:h}},7771:function(M){M.exports={}},4104:function(M,O,m){var g=m(8445);M.exports=function(A){return g(A.length)}},2950:function(M,O,m){var g=m(8576),A=m(5141).f,k=m(7160).set,R=m(9536),F=m(9347),W=m(5914),v=m(224),a=g.MutationObserver||g.WebKitMutationObserver,h=g.document,u=g.process,i=g.Promise,r=A(g,"queueMicrotask"),n=r&&r.value,c,d,s,p,y,I,_,E;n||(c=function(){var D,L;for(v&&(D=u.domain)&&D.exit();d;){L=d.fn,d=d.next;try{L()}catch(z){throw d?p():s=void 0,z}}s=void 0,D&&D.enter()},!R&&!v&&!W&&a&&h?(y=!0,I=h.createTextNode(""),new a(c).observe(I,{characterData:!0}),p=function(){I.data=y=!y}):!F&&i&&i.resolve?(_=i.resolve(void 0),_.constructor=i,E=_.then,p=function(){E.call(_,c)}):v?p=function(){u.nextTick(c)}:p=function(){k.call(g,c)}),M.exports=n||function(D){var L={fn:D,next:void 0};s&&(s.next=L),d||(d=L,p()),s=L}},4471:function(M,O,m){var g=m(8576);M.exports=g.Promise},3045:function(M,O,m){var g=m(4218),A=m(6192);M.exports=!!Object.getOwnPropertySymbols&&!A(function(){var k=Symbol();return!String(k)||!(Object(k)instanceof Symbol)||!Symbol.sham&&g&&g<41})},4551:function(M,O,m){var g=m(6192),A=m(8182),k=m(5546),R=A("iterator");M.exports=!g(function(){var F=new URL("b?a=1&b=2&c=3","http://a"),W=F.searchParams,v="";return F.pathname="c%20d",W.forEach(function(a,h){W.delete("b"),v+=h+a}),k&&!F.toJSON||!W.sort||F.href!=="http://a/c%20d?a=1&c=3"||W.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!W[R]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||v!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(M,O,m){var g=m(8576),A=m(6447),k=m(9516),R=g.WeakMap;M.exports=A(R)&&/native code/.test(k(R))},9438:function(M,O,m){var g=m(6235),A=function(k){var R,F;this.promise=new k(function(W,v){if(R!==void 0||F!==void 0)throw TypeError("Bad Promise constructor");R=W,F=v}),this.resolve=g(R),this.reject=g(F)};M.exports.f=function(k){return new A(k)}},15:function(M,O,m){var g=m(8576),A=m(6192),k=m(4845),R=m(4277).trim,F=m(1450),W=g.parseFloat,v=g.Symbol,a=v&&v.iterator,h=1/W(F+"-0")!==-1/0||a&&!A(function(){W(Object(a))});M.exports=h?function(i){var r=R(k(i)),n=W(r);return n===0&&r.charAt(0)=="-"?-0:n}:W},2558:function(M,O,m){var g=m(8576),A=m(6192),k=m(4845),R=m(4277).trim,F=m(1450),W=g.parseInt,v=g.Symbol,a=v&&v.iterator,h=/^[+-]?0[Xx]/,u=W(F+"08")!==8||W(F+"0x16")!==22||a&&!A(function(){W(Object(a))});M.exports=u?function(r,n){var c=R(k(r));return W(c,n>>>0||(h.test(c)?16:10))}:W},2503:function(M,O,m){var g=m(69),A=m(6192),k=m(7653),R=m(4750),F=m(6007),W=m(1795),v=m(2202),a=Object.assign,h=Object.defineProperty;M.exports=!a||A(function(){if(g&&a({b:1},a(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var u={},i={},r=Symbol(),n="abcdefghijklmnopqrst";return u[r]=7,n.split("").forEach(function(c){i[c]=c}),a({},u)[r]!=7||k(a({},i)).join("")!=n})?function(i,r){for(var n=W(i),c=arguments.length,d=1,s=R.f,p=F.f;c>d;)for(var y=v(arguments[d++]),I=s?k(y).concat(s(y)):k(y),_=I.length,E=0,D;_>E;)D=I[E++],(!g||p.call(y,D))&&(n[D]=y[D]);return n}:a},2853:function(M,O,m){var g=m(1138),A=m(1187),k=m(2952),R=m(4535),F=m(7403),W=m(7449),v=m(9766),a=">",h="<",u="prototype",i="script",r=v("IE_PROTO"),n=function(){},c=function(I){return h+i+a+I+h+"/"+i+a},d=function(I){I.write(c("")),I.close();var _=I.parentWindow.Object;return I=null,_},s=function(){var I=W("iframe"),_="java"+i+":",E;return I.style.display="none",F.appendChild(I),I.src=String(_),E=I.contentWindow.document,E.open(),E.write(c("document.F=Object")),E.close(),E.F},p,y=function(){try{p=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&p?d(p):s():d(p);for(var I=k.length;I--;)delete y[u][k[I]];return y()};R[r]=!0,M.exports=Object.create||function(_,E){var D;return _!==null?(n[u]=g(_),D=new n,n[u]=null,D[r]=_):D=y(),E===void 0?D:A(D,E)}},1187:function(M,O,m){var g=m(69),A=m(2760),k=m(1138),R=m(7653);M.exports=g?Object.defineProperties:function(W,v){k(W);for(var a=R(v),h=a.length,u=0,i;h>u;)A.f(W,i=a[u++],v[i]);return W}},2760:function(M,O,m){var g=m(69),A=m(188),k=m(1138),R=m(77),F=Object.defineProperty;O.f=g?F:function(v,a,h){if(k(v),a=R(a),k(h),A)try{return F(v,a,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(v[a]=h.value),v}},5141:function(M,O,m){var g=m(69),A=m(6007),k=m(774),R=m(101),F=m(77),W=m(4500),v=m(188),a=Object.getOwnPropertyDescriptor;O.f=g?a:function(u,i){if(u=R(u),i=F(i),v)try{return a(u,i)}catch{}if(W(u,i))return k(!A.f.call(u,i),u[i])}},4052:function(M,O,m){var g=m(101),A=m(2092).f,k={}.toString,R=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],F=function(W){try{return A(W)}catch{return R.slice()}};M.exports.f=function(v){return R&&k.call(v)=="[object Window]"?F(v):A(g(v))}},2092:function(M,O,m){var g=m(7934),A=m(2952),k=A.concat("length","prototype");O.f=Object.getOwnPropertyNames||function(F){return g(F,k)}},4750:function(M,O){O.f=Object.getOwnPropertySymbols},9341:function(M,O,m){var g=m(4500),A=m(6447),k=m(1795),R=m(9766),F=m(4635),W=R("IE_PROTO"),v=Object.prototype;M.exports=F?Object.getPrototypeOf:function(a){var h=k(a);if(g(h,W))return h[W];var u=h.constructor;return A(u)&&h instanceof u?u.prototype:h instanceof Object?v:null}},7934:function(M,O,m){var g=m(4500),A=m(101),k=m(8180).indexOf,R=m(4535);M.exports=function(F,W){var v=A(F),a=0,h=[],u;for(u in v)!g(R,u)&&g(v,u)&&h.push(u);for(;W.length>a;)g(v,u=W[a++])&&(~k(h,u)||h.push(u));return h}},7653:function(M,O,m){var g=m(7934),A=m(2952);M.exports=Object.keys||function(R){return g(R,A)}},6007:function(M,O){var m={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,A=g&&!m.call({1:2},1);O.f=A?function(R){var F=g(this,R);return!!F&&F.enumerable}:m},4469:function(M,O,m){var g=m(1138),A=m(7757);M.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var k=!1,R={},F;try{F=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,F.call(R,[]),k=R instanceof Array}catch{}return function(v,a){return g(v),A(a),k?F.call(v,a):v.__proto__=a,v}}():void 0)},158:function(M,O,m){var g=m(3471),A=m(4696);M.exports=g?{}.toString:function(){return"[object "+A(this)+"]"}},380:function(M,O,m){var g=m(6447),A=m(5744);M.exports=function(k,R){var F,W;if(R==="string"&&g(F=k.toString)&&!A(W=F.call(k))||g(F=k.valueOf)&&!A(W=F.call(k))||R!=="string"&&g(F=k.toString)&&!A(W=F.call(k)))return W;throw TypeError("Can't convert object to primitive value")}},7545:function(M){M.exports={}},892:function(M){M.exports=function(O){try{return{error:!1,value:O()}}catch(m){return{error:!0,value:m}}}},9126:function(M,O,m){var g=m(1138),A=m(5744),k=m(9438);M.exports=function(R,F){if(g(R),A(F)&&F.constructor===R)return F;var W=k.f(R),v=W.resolve;return v(F),W.promise}},533:function(M,O,m){var g=m(9482);M.exports=function(A,k,R){for(var F in k)R&&R.unsafe&&A[F]?A[F]=k[F]:g(A,F,k[F],R);return A}},9482:function(M,O,m){var g=m(8711);M.exports=function(A,k,R,F){F&&F.enumerable?A[k]=R:g(A,k,R)}},3209:function(M){M.exports=function(O){if(O==null)throw TypeError("Can't call method on "+O);return O}},7613:function(M,O,m){var g=m(8576);M.exports=function(A,k){try{Object.defineProperty(g,A,{value:k,configurable:!0,writable:!0})}catch{g[A]=k}return k}},3656:function(M,O,m){var g=m(150),A=m(2760),k=m(8182),R=m(69),F=k("species");M.exports=function(W){var v=g(W),a=A.f;R&&v&&!v[F]&&a(v,F,{configurable:!0,get:function(){return this}})}},1284:function(M,O,m){var g=m(3471),A=m(2760).f,k=m(8711),R=m(4500),F=m(158),W=m(8182),v=W("toStringTag");M.exports=function(a,h,u,i){if(a){var r=u?a:a.prototype;R(r,v)||A(r,v,{configurable:!0,value:h}),i&&!g&&k(r,"toString",F)}}},9766:function(M,O,m){var g=m(8717),A=m(2759),k=g("keys");M.exports=function(R){return k[R]||(k[R]=A(R))}},6434:function(M,O,m){var g=m(8576),A=m(7613),k="__core-js_shared__",R=g[k]||A(k,{});M.exports=R},8717:function(M,O,m){var g=m(5546),A=m(6434);(M.exports=function(k,R){return A[k]||(A[k]=R!==void 0?R:{})})("versions",[]).push({version:"3.18.2",mode:g?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(M,O,m){var g=m(1138),A=m(1404),k=m(8182),R=k("species");M.exports=function(F,W){var v=g(F).constructor,a;return v===void 0||(a=g(v)[R])==null?W:A(a)}},863:function(M,O,m){var g=m(1941),A=m(4845),k=m(3209),R=function(F){return function(W,v){var a=A(k(W)),h=g(v),u=a.length,i,r;return h<0||h>=u?F?"":void 0:(i=a.charCodeAt(h),i<55296||i>56319||h+1===u||(r=a.charCodeAt(h+1))<56320||r>57343?F?a.charAt(h):i:F?a.slice(h,h+2):(i-55296<<10)+(r-56320)+65536)}};M.exports={codeAt:R(!1),charAt:R(!0)}},7977:function(M){var O=2147483647,m=36,g=1,A=26,k=38,R=700,F=72,W=128,v="-",a=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",i=m-g,r=Math.floor,n=String.fromCharCode,c=function(y){for(var I=[],_=0,E=y.length;_<E;){var D=y.charCodeAt(_++);if(D>=55296&&D<=56319&&_<E){var L=y.charCodeAt(_++);(L&64512)==56320?I.push(((D&1023)<<10)+(L&1023)+65536):(I.push(D),_--)}else I.push(D)}return I},d=function(y){return y+22+75*(y<26)},s=function(y,I,_){var E=0;for(y=_?r(y/R):y>>1,y+=r(y/I);y>i*A>>1;E+=m)y=r(y/i);return r(E+(i+1)*y/(y+k))},p=function(y){var I=[];y=c(y);var _=y.length,E=W,D=0,L=F,z,X;for(z=0;z<y.length;z++)X=y[z],X<128&&I.push(n(X));var ut=I.length,rt=ut;for(ut&&I.push(v);rt<_;){var Et=O;for(z=0;z<y.length;z++)X=y[z],X>=E&&X<Et&&(Et=X);var Q=rt+1;if(Et-E>r((O-D)/Q))throw RangeError(u);for(D+=(Et-E)*Q,E=Et,z=0;z<y.length;z++){if(X=y[z],X<E&&++D>O)throw RangeError(u);if(X==E){for(var St=D,j=m;;j+=m){var jt=j<=L?g:j>=L+A?A:j-L;if(St<jt)break;var gt=St-jt,Nt=m-jt;I.push(n(d(jt+gt%Nt))),St=r(gt/Nt)}I.push(n(d(St))),L=s(D,Q,rt==ut),D=0,++rt}}++D,++E}return I.join("")};M.exports=function(y){var I=[],_=y.toLowerCase().replace(h,".").split("."),E,D;for(E=0;E<_.length;E++)D=_[E],I.push(a.test(D)?"xn--"+p(D):D);return I.join(".")}},6815:function(M,O,m){var g=m(2282).PROPER,A=m(6192),k=m(1450),R="\u200B\x85\u180E";M.exports=function(F){return A(function(){return!!k[F]()||R[F]()!==R||g&&k[F].name!==F})}},4277:function(M,O,m){var g=m(3209),A=m(4845),k=m(1450),R="["+k+"]",F=RegExp("^"+R+R+"*"),W=RegExp(R+R+"*$"),v=function(a){return function(h){var u=A(g(h));return a&1&&(u=u.replace(F,"")),a&2&&(u=u.replace(W,"")),u}};M.exports={start:v(1),end:v(2),trim:v(3)}},7160:function(M,O,m){var g=m(8576),A=m(6447),k=m(6192),R=m(8043),F=m(7403),W=m(7449),v=m(9536),a=m(224),h=g.setImmediate,u=g.clearImmediate,i=g.process,r=g.MessageChannel,n=g.Dispatch,c=0,d={},s="onreadystatechange",p,y,I,_;try{p=g.location}catch{}var E=function(X){if(d.hasOwnProperty(X)){var ut=d[X];delete d[X],ut()}},D=function(X){return function(){E(X)}},L=function(X){E(X.data)},z=function(X){g.postMessage(String(X),p.protocol+"//"+p.host)};(!h||!u)&&(h=function(ut){for(var rt=[],Et=arguments.length,Q=1;Et>Q;)rt.push(arguments[Q++]);return d[++c]=function(){(A(ut)?ut:Function(ut)).apply(void 0,rt)},y(c),c},u=function(ut){delete d[ut]},a?y=function(X){i.nextTick(D(X))}:n&&n.now?y=function(X){n.now(D(X))}:r&&!v?(I=new r,_=I.port2,I.port1.onmessage=L,y=R(_.postMessage,_,1)):g.addEventListener&&A(g.postMessage)&&!g.importScripts&&p&&p.protocol!=="file:"&&!k(z)?(y=z,g.addEventListener("message",L,!1)):s in W("script")?y=function(X){F.appendChild(W("script"))[s]=function(){F.removeChild(this),E(X)}}:y=function(X){setTimeout(D(X),0)}),M.exports={set:h,clear:u}},7739:function(M,O,m){var g=m(1941),A=Math.max,k=Math.min;M.exports=function(R,F){var W=g(R);return W<0?A(W+F,0):k(W,F)}},101:function(M,O,m){var g=m(2202),A=m(3209);M.exports=function(k){return g(A(k))}},1941:function(M){var O=Math.ceil,m=Math.floor;M.exports=function(g){var A=+g;return A!==A||A===0?0:(A>0?m:O)(A)}},8445:function(M,O,m){var g=m(1941),A=Math.min;M.exports=function(k){return k>0?A(g(k),9007199254740991):0}},1795:function(M,O,m){var g=m(3209);M.exports=function(A){return Object(g(A))}},7888:function(M,O,m){var g=m(5744),A=m(3236),k=m(5037),R=m(380),F=m(8182),W=F("toPrimitive");M.exports=function(v,a){if(!g(v)||A(v))return v;var h=k(v,W),u;if(h){if(a===void 0&&(a="default"),u=h.call(v,a),!g(u)||A(u))return u;throw TypeError("Can't convert object to primitive value")}return a===void 0&&(a="number"),R(v,a)}},77:function(M,O,m){var g=m(7888),A=m(3236);M.exports=function(k){var R=g(k,"string");return A(R)?R:String(R)}},3471:function(M,O,m){var g=m(8182),A=g("toStringTag"),k={};k[A]="z",M.exports=String(k)==="[object z]"},4845:function(M,O,m){var g=m(4696);M.exports=function(A){if(g(A)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(A)}},9288:function(M){M.exports=function(O){try{return String(O)}catch{return"Object"}}},2759:function(M){var O=0,m=Math.random();M.exports=function(g){return"Symbol("+String(g===void 0?"":g)+")_"+(++O+m).toString(36)}},615:function(M,O,m){var g=m(3045);M.exports=g&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(M,O,m){var g=m(8182);O.f=g},8182:function(M,O,m){var g=m(8576),A=m(8717),k=m(4500),R=m(2759),F=m(3045),W=m(615),v=A("wks"),a=g.Symbol,h=W?a:a&&a.withoutSetter||R;M.exports=function(u){return(!k(v,u)||!(F||typeof v[u]=="string"))&&(F&&k(a,u)?v[u]=a[u]:v[u]=h("Symbol."+u)),v[u]}},1450:function(M){M.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(M,O,m){var g=m(3085),A=m(9341),k=m(4469),R=m(2853),F=m(8711),W=m(774),v=m(273),a=m(3442),h=m(4845),u=function(r,n){var c=this,d=arguments.length>2?arguments[2]:void 0;if(!(c instanceof u))return new u(r,n,d);k&&(c=k(new Error(void 0),A(c))),n!==void 0&&F(c,"message",h(n)),v(c,d);var s=[];return a(r,s.push,{that:s}),F(c,"errors",s),c};u.prototype=R(Error.prototype,{constructor:W(5,u),message:W(5,""),name:W(5,"AggregateError")}),g({global:!0},{AggregateError:u})},9106:function(M,O,m){var g=m(3085),A=m(6192),k=m(4770),R=m(5744),F=m(1795),W=m(4104),v=m(9361),a=m(1321),h=m(242),u=m(8182),i=m(4218),r=u("isConcatSpreadable"),n=9007199254740991,c="Maximum allowed index exceeded",d=i>=51||!A(function(){var I=[];return I[r]=!1,I.concat()[0]!==I}),s=h("concat"),p=function(I){if(!R(I))return!1;var _=I[r];return _!==void 0?!!_:k(I)},y=!d||!s;g({target:"Array",proto:!0,forced:y},{concat:function(_){var E=F(this),D=a(E,0),L=0,z,X,ut,rt,Et;for(z=-1,ut=arguments.length;z<ut;z++)if(Et=z===-1?E:arguments[z],p(Et)){if(rt=W(Et),L+rt>n)throw TypeError(c);for(X=0;X<rt;X++,L++)X in Et&&v(D,L,Et[X])}else{if(L>=n)throw TypeError(c);v(D,L++,Et)}return D.length=L,D}})},1710:function(M,O,m){var g=m(3085),A=m(2724),k=m(7423);g({target:"Array",proto:!0},{fill:A}),k("fill")},3436:function(M,O,m){var g=m(3085),A=m(454).filter,k=m(242),R=k("filter");g({target:"Array",proto:!0,forced:!R},{filter:function(W){return A(this,W,arguments.length>1?arguments[1]:void 0)}})},9823:function(M,O,m){var g=m(3085),A=m(7397);g({target:"Array",proto:!0,forced:[].forEach!=A},{forEach:A})},9173:function(M,O,m){var g=m(3085),A=m(841),k=m(9770),R=!k(function(F){Array.from(F)});g({target:"Array",stat:!0,forced:R},{from:A})},2276:function(M,O,m){var g=m(3085),A=m(8180).indexOf,k=m(424),R=[].indexOf,F=!!R&&1/[1].indexOf(1,-0)<0,W=k("indexOf");g({target:"Array",proto:!0,forced:F||!W},{indexOf:function(a){return F?R.apply(this,arguments)||0:A(this,a,arguments.length>1?arguments[1]:void 0)}})},8118:function(M,O,m){var g=m(3085),A=m(4770);g({target:"Array",stat:!0},{isArray:A})},8939:function(M,O,m){var g=m(101),A=m(7423),k=m(7771),R=m(3326),F=m(7218),W="Array Iterator",v=R.set,a=R.getterFor(W);M.exports=F(Array,"Array",function(h,u){v(this,{type:W,target:g(h),index:0,kind:u})},function(){var h=a(this),u=h.target,i=h.kind,r=h.index++;return!u||r>=u.length?(h.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:r,done:!1}:i=="values"?{value:u[r],done:!1}:{value:[r,u[r]],done:!1}},"values"),k.Arguments=k.Array,A("keys"),A("values"),A("entries")},3838:function(M,O,m){var g=m(3085),A=m(454).map,k=m(242),R=k("map");g({target:"Array",proto:!0,forced:!R},{map:function(W){return A(this,W,arguments.length>1?arguments[1]:void 0)}})},5818:function(M,O,m){var g=m(3085),A=m(4770),k=m(2091),R=m(5744),F=m(7739),W=m(4104),v=m(101),a=m(9361),h=m(8182),u=m(242),i=u("slice"),r=h("species"),n=[].slice,c=Math.max;g({target:"Array",proto:!0,forced:!i},{slice:function(s,p){var y=v(this),I=W(y),_=F(s,I),E=F(p===void 0?I:p,I),D,L,z;if(A(y)&&(D=y.constructor,k(D)&&(D===Array||A(D.prototype))?D=void 0:R(D)&&(D=D[r],D===null&&(D=void 0)),D===Array||D===void 0))return n.call(y,_,E);for(L=new(D===void 0?Array:D)(c(E-_,0)),z=0;_<E;_++,z++)_ in y&&a(L,z,y[_]);return L.length=z,L}})},2178:function(M,O,m){var g=m(3085),A=m(7739),k=m(1941),R=m(4104),F=m(1795),W=m(1321),v=m(9361),a=m(242),h=a("splice"),u=Math.max,i=Math.min,r=9007199254740991,n="Maximum allowed length exceeded";g({target:"Array",proto:!0,forced:!h},{splice:function(d,s){var p=F(this),y=R(p),I=A(d,y),_=arguments.length,E,D,L,z,X,ut;if(_===0?E=D=0:_===1?(E=0,D=y-I):(E=_-2,D=i(u(k(s),0),y-I)),y+E-D>r)throw TypeError(n);for(L=W(p,D),z=0;z<D;z++)X=I+z,X in p&&v(L,z,p[X]);if(L.length=D,E<D){for(z=I;z<y-D;z++)X=z+D,ut=z+E,X in p?p[ut]=p[X]:delete p[ut];for(z=y;z>y-D+E;z--)delete p[z-1]}else if(E>D)for(z=y-D;z>I;z--)X=z+D-1,ut=z+E-1,X in p?p[ut]=p[X]:delete p[ut];for(z=0;z<E;z++)p[z+I]=arguments[z+2];return p.length=y-D+E,L}})},665:function(M,O,m){var g=m(3085),A=m(6782);g({target:"Function",proto:!0},{bind:A})},8671:function(M,O,m){var g=m(8576),A=m(1284);A(g.JSON,"JSON",!0)},8556:function(){},2666:function(M,O,m){var g=m(3085),A=m(2558);g({target:"Number",stat:!0,forced:Number.parseInt!=A},{parseInt:A})},3113:function(M,O,m){var g=m(3085),A=m(69),k=m(2853);g({target:"Object",stat:!0,sham:!A},{create:k})},297:function(M,O,m){var g=m(3085),A=m(69),k=m(2760);g({target:"Object",stat:!0,forced:!A,sham:!A},{defineProperty:k.f})},9234:function(M,O,m){var g=m(3085),A=m(6192),k=m(1795),R=m(9341),F=m(4635),W=A(function(){R(1)});g({target:"Object",stat:!0,forced:W,sham:!F},{getPrototypeOf:function(a){return R(k(a))}})},2647:function(M,O,m){var g=m(3085),A=m(1795),k=m(7653),R=m(6192),F=R(function(){k(1)});g({target:"Object",stat:!0,forced:F},{keys:function(v){return k(A(v))}})},3222:function(M,O,m){var g=m(3085),A=m(4469);g({target:"Object",stat:!0},{setPrototypeOf:A})},6663:function(){},4859:function(M,O,m){var g=m(3085),A=m(15);g({global:!0,forced:parseFloat!=A},{parseFloat:A})},5706:function(M,O,m){var g=m(3085),A=m(2558);g({global:!0,forced:parseInt!=A},{parseInt:A})},7884:function(M,O,m){var g=m(3085),A=m(6235),k=m(9438),R=m(892),F=m(3442);g({target:"Promise",stat:!0},{allSettled:function(v){var a=this,h=k.f(a),u=h.resolve,i=h.reject,r=R(function(){var n=A(a.resolve),c=[],d=0,s=1;F(v,function(p){var y=d++,I=!1;c.push(void 0),s++,n.call(a,p).then(function(_){I||(I=!0,c[y]={status:"fulfilled",value:_},--s||u(c))},function(_){I||(I=!0,c[y]={status:"rejected",reason:_},--s||u(c))})}),--s||u(c)});return r.error&&i(r.value),h.promise}})},8885:function(M,O,m){var g=m(3085),A=m(6235),k=m(150),R=m(9438),F=m(892),W=m(3442),v="No one promise resolved";g({target:"Promise",stat:!0},{any:function(h){var u=this,i=R.f(u),r=i.resolve,n=i.reject,c=F(function(){var d=A(u.resolve),s=[],p=0,y=1,I=!1;W(h,function(_){var E=p++,D=!1;s.push(void 0),y++,d.call(u,_).then(function(L){D||I||(I=!0,r(L))},function(L){D||I||(D=!0,s[E]=L,--y||n(new(k("AggregateError"))(s,v)))})}),--y||n(new(k("AggregateError"))(s,v))});return c.error&&n(c.value),i.promise}})},1868:function(M,O,m){var g=m(3085),A=m(5546),k=m(4471),R=m(6192),F=m(150),W=m(6447),v=m(4743),a=m(9126),h=m(9482),u=!!k&&R(function(){k.prototype.finally.call({then:function(){}},function(){})});if(g({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(r){var n=v(this,F("Promise")),c=W(r);return this.then(c?function(d){return a(n,r()).then(function(){return d})}:r,c?function(d){return a(n,r()).then(function(){throw d})}:r)}}),!A&&W(k)){var i=F("Promise").prototype.finally;k.prototype.finally!==i&&h(k.prototype,"finally",i,{unsafe:!0})}},9021:function(M,O,m){var g=m(3085),A=m(5546),k=m(8576),R=m(150),F=m(4471),W=m(9482),v=m(533),a=m(4469),h=m(1284),u=m(3656),i=m(6235),r=m(6447),n=m(5744),c=m(6961),d=m(9516),s=m(3442),p=m(9770),y=m(4743),I=m(7160).set,_=m(2950),E=m(9126),D=m(3681),L=m(9438),z=m(892),X=m(3326),ut=m(9245),rt=m(8182),Et=m(2957),Q=m(224),St=m(4218),j=rt("species"),jt="Promise",gt=X.get,Nt=X.set,J=X.getterFor(jt),et=F&&F.prototype,Z=F,H=et,at=k.TypeError,N=k.document,B=k.process,U=L.f,G=U,ht=!!(N&&N.createEvent&&k.dispatchEvent),lt=r(k.PromiseRejectionEvent),vt="unhandledrejection",pt="rejectionhandled",mt=0,tt=1,V=2,K=1,it=2,ot=!1,ft,Tt,Ft,Rt,dt=ut(jt,function(){var bt=d(Z),xt=bt!==String(Z);if(!xt&&St===66||A&&!H.finally)return!0;if(St>=51&&/native code/.test(bt))return!1;var kt=new Z(function(wt){wt(1)}),zt=function(wt){wt(function(){},function(){})},Yt=kt.constructor={};return Yt[j]=zt,ot=kt.then(function(){})instanceof zt,ot?!xt&&Et&&!lt:!0}),Bt=dt||!p(function(bt){Z.all(bt).catch(function(){})}),Ut=function(bt){var xt;return n(bt)&&r(xt=bt.then)?xt:!1},Qt=function(bt,xt){if(!bt.notified){bt.notified=!0;var kt=bt.reactions;_(function(){for(var zt=bt.value,Yt=bt.state==tt,wt=0;kt.length>wt;){var ve=kt[wt++],pe=Yt?ve.ok:ve.fail,Ht=ve.resolve,yt=ve.reject,ue=ve.domain,$t,ie,Me;try{pe?(Yt||(bt.rejection===it&&Kt(bt),bt.rejection=K),pe===!0?$t=zt:(ue&&ue.enter(),$t=pe(zt),ue&&(ue.exit(),Me=!0)),$t===ve.promise?yt(at("Promise-chain cycle")):(ie=Ut($t))?ie.call($t,Ht,yt):Ht($t)):yt(zt)}catch(_e){ue&&!Me&&ue.exit(),yt(_e)}}bt.reactions=[],bt.notified=!1,xt&&!bt.rejection&&ee(bt)})}},he=function(bt,xt,kt){var zt,Yt;ht?(zt=N.createEvent("Event"),zt.promise=xt,zt.reason=kt,zt.initEvent(bt,!1,!0),k.dispatchEvent(zt)):zt={promise:xt,reason:kt},!lt&&(Yt=k["on"+bt])?Yt(zt):bt===vt&&D("Unhandled promise rejection",kt)},ee=function(bt){I.call(k,function(){var xt=bt.facade,kt=bt.value,zt=re(bt),Yt;if(zt&&(Yt=z(function(){Q?B.emit("unhandledRejection",kt,xt):he(vt,xt,kt)}),bt.rejection=Q||re(bt)?it:K,Yt.error))throw Yt.value})},re=function(bt){return bt.rejection!==K&&!bt.parent},Kt=function(bt){I.call(k,function(){var xt=bt.facade;Q?B.emit("rejectionHandled",xt):he(pt,xt,bt.value)})},ae=function(bt,xt,kt){return function(zt){bt(xt,zt,kt)}},ge=function(bt,xt,kt){bt.done||(bt.done=!0,kt&&(bt=kt),bt.value=xt,bt.state=V,Qt(bt,!0))},Ce=function(bt,xt,kt){if(!bt.done){bt.done=!0,kt&&(bt=kt);try{if(bt.facade===xt)throw at("Promise can't be resolved itself");var zt=Ut(xt);zt?_(function(){var Yt={done:!1};try{zt.call(xt,ae(Ce,Yt,bt),ae(ge,Yt,bt))}catch(wt){ge(Yt,wt,bt)}}):(bt.value=xt,bt.state=tt,Qt(bt,!1))}catch(Yt){ge({done:!1},Yt,bt)}}};if(dt&&(Z=function(xt){c(this,Z,jt),i(xt),ft.call(this);var kt=gt(this);try{xt(ae(Ce,kt),ae(ge,kt))}catch(zt){ge(kt,zt)}},H=Z.prototype,ft=function(xt){Nt(this,{type:jt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:mt,value:void 0})},ft.prototype=v(H,{then:function(xt,kt){var zt=J(this),Yt=U(y(this,Z));return Yt.ok=r(xt)?xt:!0,Yt.fail=r(kt)&&kt,Yt.domain=Q?B.domain:void 0,zt.parent=!0,zt.reactions.push(Yt),zt.state!=mt&&Qt(zt,!1),Yt.promise},catch:function(bt){return this.then(void 0,bt)}}),Tt=function(){var bt=new ft,xt=gt(bt);this.promise=bt,this.resolve=ae(Ce,xt),this.reject=ae(ge,xt)},L.f=U=function(bt){return bt===Z||bt===Ft?new Tt(bt):G(bt)},!A&&r(F)&&et!==Object.prototype)){Rt=et.then,ot||(W(et,"then",function(xt,kt){var zt=this;return new Z(function(Yt,wt){Rt.call(zt,Yt,wt)}).then(xt,kt)},{unsafe:!0}),W(et,"catch",H.catch,{unsafe:!0}));try{delete et.constructor}catch{}a&&a(et,H)}g({global:!0,wrap:!0,forced:dt},{Promise:Z}),h(Z,jt,!1,!0),u(jt),Ft=R(jt),g({target:jt,stat:!0,forced:dt},{reject:function(xt){var kt=U(this);return kt.reject.call(void 0,xt),kt.promise}}),g({target:jt,stat:!0,forced:A||dt},{resolve:function(xt){return E(A&&this===Ft?Z:this,xt)}}),g({target:jt,stat:!0,forced:Bt},{all:function(xt){var kt=this,zt=U(kt),Yt=zt.resolve,wt=zt.reject,ve=z(function(){var pe=i(kt.resolve),Ht=[],yt=0,ue=1;s(xt,function($t){var ie=yt++,Me=!1;Ht.push(void 0),ue++,pe.call(kt,$t).then(function(_e){Me||(Me=!0,Ht[ie]=_e,--ue||Yt(Ht))},wt)}),--ue||Yt(Ht)});return ve.error&&wt(ve.value),zt.promise},race:function(xt){var kt=this,zt=U(kt),Yt=zt.reject,wt=z(function(){var ve=i(kt.resolve);s(xt,function(pe){ve.call(kt,pe).then(zt.resolve,Yt)})});return wt.error&&Yt(wt.value),zt.promise}})},5397:function(M,O,m){var g=m(3085),A=m(150),k=m(1404),R=m(1138),F=m(5744),W=m(2853),v=m(6782),a=m(6192),h=A("Reflect","construct"),u=a(function(){function n(){}return!(h(function(){},[],n)instanceof n)}),i=!a(function(){h(function(){})}),r=u||i;g({target:"Reflect",stat:!0,forced:r,sham:r},{construct:function(c,d){k(c),R(d);var s=arguments.length<3?c:k(arguments[2]);if(i&&!u)return h(c,d,s);if(c==s){switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3])}var p=[null];return p.push.apply(p,d),new(v.apply(c,p))}var y=s.prototype,I=W(F(y)?y:Object.prototype),_=Function.apply.call(c,I,d);return F(_)?_:I}})},1367:function(){},5454:function(M,O,m){var g=m(863).charAt,A=m(4845),k=m(3326),R=m(7218),F="String Iterator",W=k.set,v=k.getterFor(F);R(String,"String",function(a){W(this,{type:F,string:A(a),index:0})},function(){var h=v(this),u=h.string,i=h.index,r;return i>=u.length?{value:void 0,done:!0}:(r=g(u,i),h.index+=r.length,{value:r,done:!1})})},957:function(M,O,m){var g=m(3085),A=m(4277).trim,k=m(6815);g({target:"String",proto:!0,forced:k("trim")},{trim:function(){return A(this)}})},9781:function(M,O,m){var g=m(1488);g("asyncIterator")},492:function(){},6681:function(M,O,m){var g=m(1488);g("hasInstance")},9594:function(M,O,m){var g=m(1488);g("isConcatSpreadable")},3665:function(M,O,m){var g=m(1488);g("iterator")},6187:function(M,O,m){var g=m(3085),A=m(8576),k=m(150),R=m(5546),F=m(69),W=m(3045),v=m(6192),a=m(4500),h=m(4770),u=m(6447),i=m(5744),r=m(3236),n=m(1138),c=m(1795),d=m(101),s=m(77),p=m(4845),y=m(774),I=m(2853),_=m(7653),E=m(2092),D=m(4052),L=m(4750),z=m(5141),X=m(2760),ut=m(6007),rt=m(9482),Et=m(8717),Q=m(9766),St=m(4535),j=m(2759),jt=m(8182),gt=m(9207),Nt=m(1488),J=m(1284),et=m(3326),Z=m(454).forEach,H=Q("hidden"),at="Symbol",N="prototype",B=jt("toPrimitive"),U=et.set,G=et.getterFor(at),ht=Object[N],lt=A.Symbol,vt=k("JSON","stringify"),pt=z.f,mt=X.f,tt=D.f,V=ut.f,K=Et("symbols"),it=Et("op-symbols"),ot=Et("string-to-symbol-registry"),ft=Et("symbol-to-string-registry"),Tt=Et("wks"),Ft=A.QObject,Rt=!Ft||!Ft[N]||!Ft[N].findChild,dt=F&&v(function(){return I(mt({},"a",{get:function(){return mt(this,"a",{value:7}).a}})).a!=7})?function(bt,xt,kt){var zt=pt(ht,xt);zt&&delete ht[xt],mt(bt,xt,kt),zt&&bt!==ht&&mt(ht,xt,zt)}:mt,Bt=function(bt,xt){var kt=K[bt]=I(lt[N]);return U(kt,{type:at,tag:bt,description:xt}),F||(kt.description=xt),kt},Ut=function(xt,kt,zt){xt===ht&&Ut(it,kt,zt),n(xt);var Yt=s(kt);return n(zt),a(K,Yt)?(zt.enumerable?(a(xt,H)&&xt[H][Yt]&&(xt[H][Yt]=!1),zt=I(zt,{enumerable:y(0,!1)})):(a(xt,H)||mt(xt,H,y(1,{})),xt[H][Yt]=!0),dt(xt,Yt,zt)):mt(xt,Yt,zt)},Qt=function(xt,kt){n(xt);var zt=d(kt),Yt=_(zt).concat(ae(zt));return Z(Yt,function(wt){(!F||ee.call(zt,wt))&&Ut(xt,wt,zt[wt])}),xt},he=function(xt,kt){return kt===void 0?I(xt):Qt(I(xt),kt)},ee=function(xt){var kt=s(xt),zt=V.call(this,kt);return this===ht&&a(K,kt)&&!a(it,kt)?!1:zt||!a(this,kt)||!a(K,kt)||a(this,H)&&this[H][kt]?zt:!0},re=function(xt,kt){var zt=d(xt),Yt=s(kt);if(!(zt===ht&&a(K,Yt)&&!a(it,Yt))){var wt=pt(zt,Yt);return wt&&a(K,Yt)&&!(a(zt,H)&&zt[H][Yt])&&(wt.enumerable=!0),wt}},Kt=function(xt){var kt=tt(d(xt)),zt=[];return Z(kt,function(Yt){!a(K,Yt)&&!a(St,Yt)&&zt.push(Yt)}),zt},ae=function(xt){var kt=xt===ht,zt=tt(kt?it:d(xt)),Yt=[];return Z(zt,function(wt){a(K,wt)&&(!kt||a(ht,wt))&&Yt.push(K[wt])}),Yt};if(W||(lt=function(){if(this instanceof lt)throw TypeError("Symbol is not a constructor");var xt=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),kt=j(xt),zt=function(Yt){this===ht&&zt.call(it,Yt),a(this,H)&&a(this[H],kt)&&(this[H][kt]=!1),dt(this,kt,y(1,Yt))};return F&&Rt&&dt(ht,kt,{configurable:!0,set:zt}),Bt(kt,xt)},rt(lt[N],"toString",function(){return G(this).tag}),rt(lt,"withoutSetter",function(bt){return Bt(j(bt),bt)}),ut.f=ee,X.f=Ut,z.f=re,E.f=D.f=Kt,L.f=ae,gt.f=function(bt){return Bt(jt(bt),bt)},F&&(mt(lt[N],"description",{configurable:!0,get:function(){return G(this).description}}),R||rt(ht,"propertyIsEnumerable",ee,{unsafe:!0}))),g({global:!0,wrap:!0,forced:!W,sham:!W},{Symbol:lt}),Z(_(Tt),function(bt){Nt(bt)}),g({target:at,stat:!0,forced:!W},{for:function(bt){var xt=p(bt);if(a(ot,xt))return ot[xt];var kt=lt(xt);return ot[xt]=kt,ft[kt]=xt,kt},keyFor:function(xt){if(!r(xt))throw TypeError(xt+" is not a symbol");if(a(ft,xt))return ft[xt]},useSetter:function(){Rt=!0},useSimple:function(){Rt=!1}}),g({target:"Object",stat:!0,forced:!W,sham:!F},{create:he,defineProperty:Ut,defineProperties:Qt,getOwnPropertyDescriptor:re}),g({target:"Object",stat:!0,forced:!W},{getOwnPropertyNames:Kt,getOwnPropertySymbols:ae}),g({target:"Object",stat:!0,forced:v(function(){L.f(1)})},{getOwnPropertySymbols:function(xt){return L.f(c(xt))}}),vt){var ge=!W||v(function(){var bt=lt();return vt([bt])!="[null]"||vt({a:bt})!="{}"||vt(Object(bt))!="{}"});g({target:"JSON",stat:!0,forced:ge},{stringify:function(xt,kt,zt){for(var Yt=[xt],wt=1,ve;arguments.length>wt;)Yt.push(arguments[wt++]);if(ve=kt,!(!i(kt)&&xt===void 0||r(xt)))return h(kt)||(kt=function(pe,Ht){if(u(ve)&&(Ht=ve.call(this,pe,Ht)),!r(Ht))return Ht}),Yt[1]=kt,vt.apply(null,Yt)}})}if(!lt[N][B]){var Ce=lt[N].valueOf;rt(lt[N],B,function(){return Ce.apply(this,arguments)})}J(lt,at),St[H]=!0},1250:function(M,O,m){var g=m(1488);g("matchAll")},9017:function(M,O,m){var g=m(1488);g("match")},9786:function(M,O,m){var g=m(1488);g("replace")},503:function(M,O,m){var g=m(1488);g("search")},6565:function(M,O,m){var g=m(1488);g("species")},9322:function(M,O,m){var g=m(1488);g("split")},3610:function(M,O,m){var g=m(1488);g("toPrimitive")},6886:function(M,O,m){var g=m(1488);g("toStringTag")},3514:function(M,O,m){var g=m(1488);g("unscopables")},177:function(M,O,m){var g=m(1488);g("asyncDispose")},9031:function(M,O,m){var g=m(1488);g("dispose")},6658:function(M,O,m){var g=m(1488);g("matcher")},1875:function(M,O,m){var g=m(1488);g("metadata")},8658:function(M,O,m){var g=m(1488);g("observable")},4592:function(M,O,m){var g=m(1488);g("patternMatch")},6680:function(M,O,m){var g=m(1488);g("replaceAll")},162:function(M,O,m){m(8939);var g=m(7365),A=m(8576),k=m(4696),R=m(8711),F=m(7771),W=m(8182),v=W("toStringTag");for(var a in g){var h=A[a],u=h&&h.prototype;u&&k(u)!==v&&R(u,v,a),F[a]=F.Array}},2906:function(M,O,m){var g=m(3085),A=m(8576),k=m(6447),R=m(8989),F=[].slice,W=/MSIE .\./.test(R),v=function(a){return function(h,u){var i=arguments.length>2,r=i?F.call(arguments,2):void 0;return a(i?function(){(k(h)?h:Function(h)).apply(this,r)}:h,u)}};g({global:!0,bind:!0,forced:W},{setTimeout:v(A.setTimeout),setInterval:v(A.setInterval)})},9336:function(M,O,m){m(8939);var g=m(3085),A=m(150),k=m(4551),R=m(9482),F=m(533),W=m(1284),v=m(5148),a=m(3326),h=m(6961),u=m(6447),i=m(4500),r=m(8043),n=m(4696),c=m(1138),d=m(5744),s=m(4845),p=m(2853),y=m(774),I=m(1669),_=m(8703),E=m(8182),D=A("fetch"),L=A("Request"),z=L&&L.prototype,X=A("Headers"),ut=E("iterator"),rt="URLSearchParams",Et=rt+"Iterator",Q=a.set,St=a.getterFor(rt),j=a.getterFor(Et),jt=/\+/g,gt=Array(4),Nt=function(tt){return gt[tt-1]||(gt[tt-1]=RegExp("((?:%[\\da-f]{2}){"+tt+"})","gi"))},J=function(tt){try{return decodeURIComponent(tt)}catch{return tt}},et=function(tt){var V=tt.replace(jt," "),K=4;try{return decodeURIComponent(V)}catch{for(;K;)V=V.replace(Nt(K--),J);return V}},Z=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},at=function(tt){return H[tt]},N=function(tt){return encodeURIComponent(tt).replace(Z,at)},B=function(tt,V){if(V)for(var K=V.split("&"),it=0,ot,ft;it<K.length;)ot=K[it++],ot.length&&(ft=ot.split("="),tt.push({key:et(ft.shift()),value:et(ft.join("="))}))},U=function(tt){this.entries.length=0,B(this.entries,tt)},G=function(tt,V){if(tt<V)throw TypeError("Not enough arguments")},ht=v(function(V,K){Q(this,{type:Et,iterator:I(St(V).entries),kind:K})},"Iterator",function(){var V=j(this),K=V.kind,it=V.iterator.next(),ot=it.value;return it.done||(it.value=K==="keys"?ot.key:K==="values"?ot.value:[ot.key,ot.value]),it}),lt=function(){h(this,lt,rt);var V=arguments.length>0?arguments[0]:void 0,K=this,it=[],ot,ft,Tt,Ft,Rt,dt,Bt,Ut,Qt;if(Q(K,{type:rt,entries:it,updateURL:function(){},updateSearchParams:U}),V!==void 0)if(d(V))if(ot=_(V),ot)for(ft=I(V,ot),Tt=ft.next;!(Ft=Tt.call(ft)).done;){if(Rt=I(c(Ft.value)),dt=Rt.next,(Bt=dt.call(Rt)).done||(Ut=dt.call(Rt)).done||!dt.call(Rt).done)throw TypeError("Expected sequence with length 2");it.push({key:s(Bt.value),value:s(Ut.value)})}else for(Qt in V)i(V,Qt)&&it.push({key:Qt,value:s(V[Qt])});else B(it,typeof V=="string"?V.charAt(0)==="?"?V.slice(1):V:s(V))},vt=lt.prototype;if(F(vt,{append:function(V,K){G(arguments.length,2);var it=St(this);it.entries.push({key:s(V),value:s(K)}),it.updateURL()},delete:function(tt){G(arguments.length,1);for(var V=St(this),K=V.entries,it=s(tt),ot=0;ot<K.length;)K[ot].key===it?K.splice(ot,1):ot++;V.updateURL()},get:function(V){G(arguments.length,1);for(var K=St(this).entries,it=s(V),ot=0;ot<K.length;ot++)if(K[ot].key===it)return K[ot].value;return null},getAll:function(V){G(arguments.length,1);for(var K=St(this).entries,it=s(V),ot=[],ft=0;ft<K.length;ft++)K[ft].key===it&&ot.push(K[ft].value);return ot},has:function(V){G(arguments.length,1);for(var K=St(this).entries,it=s(V),ot=0;ot<K.length;)if(K[ot++].key===it)return!0;return!1},set:function(V,K){G(arguments.length,1);for(var it=St(this),ot=it.entries,ft=!1,Tt=s(V),Ft=s(K),Rt=0,dt;Rt<ot.length;Rt++)dt=ot[Rt],dt.key===Tt&&(ft?ot.splice(Rt--,1):(ft=!0,dt.value=Ft));ft||ot.push({key:Tt,value:Ft}),it.updateURL()},sort:function(){var V=St(this),K=V.entries,it=K.slice(),ot,ft,Tt;for(K.length=0,Tt=0;Tt<it.length;Tt++){for(ot=it[Tt],ft=0;ft<Tt;ft++)if(K[ft].key>ot.key){K.splice(ft,0,ot);break}ft===Tt&&K.push(ot)}V.updateURL()},forEach:function(V){for(var K=St(this).entries,it=r(V,arguments.length>1?arguments[1]:void 0,3),ot=0,ft;ot<K.length;)ft=K[ot++],it(ft.value,ft.key,this)},keys:function(){return new ht(this,"keys")},values:function(){return new ht(this,"values")},entries:function(){return new ht(this,"entries")}},{enumerable:!0}),R(vt,ut,vt.entries,{name:"entries"}),R(vt,"toString",function(){for(var V=St(this).entries,K=[],it=0,ot;it<V.length;)ot=V[it++],K.push(N(ot.key)+"="+N(ot.value));return K.join("&")},{enumerable:!0}),W(lt,rt),g({global:!0,forced:!k},{URLSearchParams:lt}),!k&&u(X)){var pt=function(tt){if(d(tt)){var V=tt.body,K;if(n(V)===rt)return K=tt.headers?new X(tt.headers):new X,K.has("content-type")||K.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),p(tt,{body:y(0,String(V)),headers:y(0,K)})}return tt};if(u(D)&&g({global:!0,enumerable:!0,forced:!0},{fetch:function(V){return D(V,arguments.length>1?pt(arguments[1]):{})}}),u(L)){var mt=function(V){return h(this,mt,"Request"),new L(V,arguments.length>1?pt(arguments[1]):{})};z.constructor=mt,mt.prototype=z,g({global:!0,forced:!0},{Request:mt})}}M.exports={URLSearchParams:lt,getState:St}},4948:function(M,O,m){m(5454);var g=m(3085),A=m(69),k=m(4551),R=m(8576),F=m(1187),W=m(9482),v=m(6961),a=m(4500),h=m(2503),u=m(841),i=m(863).codeAt,r=m(7977),n=m(4845),c=m(1284),d=m(9336),s=m(3326),p=R.URL,y=d.URLSearchParams,I=d.getState,_=s.set,E=s.getterFor("URL"),D=Math.floor,L=Math.pow,z="Invalid authority",X="Invalid scheme",ut="Invalid host",rt="Invalid port",Et=/[A-Za-z]/,Q=/[\d+-.A-Za-z]/,St=/\d/,j=/^0x/i,jt=/^[0-7]+$/,gt=/^\d+$/,Nt=/^[\dA-Fa-f]+$/,J=/[\0\t\n\r #%/:<>?@[\\\]^|]/,et=/[\0\t\n\r #/:<>?@[\\\]^|]/,Z=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,H=/[\t\n\r]/g,at,N=function(Y,_t){var Ct,Dt,Ot;if(_t.charAt(0)=="["){if(_t.charAt(_t.length-1)!="]"||(Ct=U(_t.slice(1,-1)),!Ct))return ut;Y.host=Ct}else if(K(Y)){if(_t=r(_t),J.test(_t)||(Ct=B(_t),Ct===null))return ut;Y.host=Ct}else{if(et.test(_t))return ut;for(Ct="",Dt=u(_t),Ot=0;Ot<Dt.length;Ot++)Ct+=tt(Dt[Ot],lt);Y.host=Ct}},B=function(Y){var _t=Y.split("."),Ct,Dt,Ot,Vt,Wt,se,qt;if(_t.length&&_t[_t.length-1]==""&&_t.pop(),Ct=_t.length,Ct>4)return Y;for(Dt=[],Ot=0;Ot<Ct;Ot++){if(Vt=_t[Ot],Vt=="")return Y;if(Wt=10,Vt.length>1&&Vt.charAt(0)=="0"&&(Wt=j.test(Vt)?16:8,Vt=Vt.slice(Wt==8?1:2)),Vt==="")se=0;else{if(!(Wt==10?gt:Wt==8?jt:Nt).test(Vt))return Y;se=parseInt(Vt,Wt)}Dt.push(se)}for(Ot=0;Ot<Ct;Ot++)if(se=Dt[Ot],Ot==Ct-1){if(se>=L(256,5-Ct))return null}else if(se>255)return null;for(qt=Dt.pop(),Ot=0;Ot<Dt.length;Ot++)qt+=Dt[Ot]*L(256,3-Ot);return qt},U=function(Y){var _t=[0,0,0,0,0,0,0,0],Ct=0,Dt=null,Ot=0,Vt,Wt,se,qt,me,Se,At,Ie=function(){return Y.charAt(Ot)};if(Ie()==":"){if(Y.charAt(1)!=":")return;Ot+=2,Ct++,Dt=Ct}for(;Ie();){if(Ct==8)return;if(Ie()==":"){if(Dt!==null)return;Ot++,Ct++,Dt=Ct;continue}for(Vt=Wt=0;Wt<4&&Nt.test(Ie());)Vt=Vt*16+parseInt(Ie(),16),Ot++,Wt++;if(Ie()=="."){if(Wt==0||(Ot-=Wt,Ct>6))return;for(se=0;Ie();){if(qt=null,se>0)if(Ie()=="."&&se<4)Ot++;else return;if(!St.test(Ie()))return;for(;St.test(Ie());){if(me=parseInt(Ie(),10),qt===null)qt=me;else{if(qt==0)return;qt=qt*10+me}if(qt>255)return;Ot++}_t[Ct]=_t[Ct]*256+qt,se++,(se==2||se==4)&&Ct++}if(se!=4)return;break}else if(Ie()==":"){if(Ot++,!Ie())return}else if(Ie())return;_t[Ct++]=Vt}if(Dt!==null)for(Se=Ct-Dt,Ct=7;Ct!=0&&Se>0;)At=_t[Ct],_t[Ct--]=_t[Dt+Se-1],_t[Dt+--Se]=At;else if(Ct!=8)return;return _t},G=function(Y){for(var _t=null,Ct=1,Dt=null,Ot=0,Vt=0;Vt<8;Vt++)Y[Vt]!==0?(Ot>Ct&&(_t=Dt,Ct=Ot),Dt=null,Ot=0):(Dt===null&&(Dt=Vt),++Ot);return Ot>Ct&&(_t=Dt,Ct=Ot),_t},ht=function(Y){var _t,Ct,Dt,Ot;if(typeof Y=="number"){for(_t=[],Ct=0;Ct<4;Ct++)_t.unshift(Y%256),Y=D(Y/256);return _t.join(".")}else if(typeof Y=="object"){for(_t="",Dt=G(Y),Ct=0;Ct<8;Ct++)Ot&&Y[Ct]===0||(Ot&&(Ot=!1),Dt===Ct?(_t+=Ct?":":"::",Ot=!0):(_t+=Y[Ct].toString(16),Ct<7&&(_t+=":")));return"["+_t+"]"}return Y},lt={},vt=h({},lt,{" ":1,'"':1,"<":1,">":1,"`":1}),pt=h({},vt,{"#":1,"?":1,"{":1,"}":1}),mt=h({},pt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),tt=function(Y,_t){var Ct=i(Y,0);return Ct>32&&Ct<127&&!a(_t,Y)?Y:encodeURIComponent(Y)},V={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(Y){return a(V,Y.scheme)},it=function(Y){return Y.username!=""||Y.password!=""},ot=function(Y){return!Y.host||Y.cannotBeABaseURL||Y.scheme=="file"},ft=function(Y,_t){var Ct;return Y.length==2&&Et.test(Y.charAt(0))&&((Ct=Y.charAt(1))==":"||!_t&&Ct=="|")},Tt=function(Y){var _t;return Y.length>1&&ft(Y.slice(0,2))&&(Y.length==2||(_t=Y.charAt(2))==="/"||_t==="\\"||_t==="?"||_t==="#")},Ft=function(Y){var _t=Y.path,Ct=_t.length;Ct&&(Y.scheme!="file"||Ct!=1||!ft(_t[0],!0))&&_t.pop()},Rt=function(Y){return Y==="."||Y.toLowerCase()==="%2e"},dt=function(Y){return Y=Y.toLowerCase(),Y===".."||Y==="%2e."||Y===".%2e"||Y==="%2e%2e"},Bt={},Ut={},Qt={},he={},ee={},re={},Kt={},ae={},ge={},Ce={},bt={},xt={},kt={},zt={},Yt={},wt={},ve={},pe={},Ht={},yt={},ue={},$t=function(Y,_t,Ct,Dt){var Ot=Ct||Bt,Vt=0,Wt="",se=!1,qt=!1,me=!1,Se,At,Ie,ke;for(Ct||(Y.scheme="",Y.username="",Y.password="",Y.host=null,Y.port=null,Y.path=[],Y.query=null,Y.fragment=null,Y.cannotBeABaseURL=!1,_t=_t.replace(Z,"")),_t=_t.replace(H,""),Se=u(_t);Vt<=Se.length;){switch(At=Se[Vt],Ot){case Bt:if(At&&Et.test(At))Wt+=At.toLowerCase(),Ot=Ut;else{if(Ct)return X;Ot=Qt;continue}break;case Ut:if(At&&(Q.test(At)||At=="+"||At=="-"||At=="."))Wt+=At.toLowerCase();else if(At==":"){if(Ct&&(K(Y)!=a(V,Wt)||Wt=="file"&&(it(Y)||Y.port!==null)||Y.scheme=="file"&&!Y.host))return;if(Y.scheme=Wt,Ct){K(Y)&&V[Y.scheme]==Y.port&&(Y.port=null);return}Wt="",Y.scheme=="file"?Ot=zt:K(Y)&&Dt&&Dt.scheme==Y.scheme?Ot=he:K(Y)?Ot=ae:Se[Vt+1]=="/"?(Ot=ee,Vt++):(Y.cannotBeABaseURL=!0,Y.path.push(""),Ot=Ht)}else{if(Ct)return X;Wt="",Ot=Qt,Vt=0;continue}break;case Qt:if(!Dt||Dt.cannotBeABaseURL&&At!="#")return X;if(Dt.cannotBeABaseURL&&At=="#"){Y.scheme=Dt.scheme,Y.path=Dt.path.slice(),Y.query=Dt.query,Y.fragment="",Y.cannotBeABaseURL=!0,Ot=ue;break}Ot=Dt.scheme=="file"?zt:re;continue;case he:if(At=="/"&&Se[Vt+1]=="/")Ot=ge,Vt++;else{Ot=re;continue}break;case ee:if(At=="/"){Ot=Ce;break}else{Ot=pe;continue}case re:if(Y.scheme=Dt.scheme,At==at)Y.username=Dt.username,Y.password=Dt.password,Y.host=Dt.host,Y.port=Dt.port,Y.path=Dt.path.slice(),Y.query=Dt.query;else if(At=="/"||At=="\\"&&K(Y))Ot=Kt;else if(At=="?")Y.username=Dt.username,Y.password=Dt.password,Y.host=Dt.host,Y.port=Dt.port,Y.path=Dt.path.slice(),Y.query="",Ot=yt;else if(At=="#")Y.username=Dt.username,Y.password=Dt.password,Y.host=Dt.host,Y.port=Dt.port,Y.path=Dt.path.slice(),Y.query=Dt.query,Y.fragment="",Ot=ue;else{Y.username=Dt.username,Y.password=Dt.password,Y.host=Dt.host,Y.port=Dt.port,Y.path=Dt.path.slice(),Y.path.pop(),Ot=pe;continue}break;case Kt:if(K(Y)&&(At=="/"||At=="\\"))Ot=ge;else if(At=="/")Ot=Ce;else{Y.username=Dt.username,Y.password=Dt.password,Y.host=Dt.host,Y.port=Dt.port,Ot=pe;continue}break;case ae:if(Ot=ge,At!="/"||Wt.charAt(Vt+1)!="/")continue;Vt++;break;case ge:if(At!="/"&&At!="\\"){Ot=Ce;continue}break;case Ce:if(At=="@"){se&&(Wt="%40"+Wt),se=!0,Ie=u(Wt);for(var Je=0;Je<Ie.length;Je++){var ci=Ie[Je];if(ci==":"&&!me){me=!0;continue}var ui=tt(ci,mt);me?Y.password+=ui:Y.username+=ui}Wt=""}else if(At==at||At=="/"||At=="?"||At=="#"||At=="\\"&&K(Y)){if(se&&Wt=="")return z;Vt-=u(Wt).length+1,Wt="",Ot=bt}else Wt+=At;break;case bt:case xt:if(Ct&&Y.scheme=="file"){Ot=wt;continue}else if(At==":"&&!qt){if(Wt=="")return ut;if(ke=N(Y,Wt),ke)return ke;if(Wt="",Ot=kt,Ct==xt)return}else if(At==at||At=="/"||At=="?"||At=="#"||At=="\\"&&K(Y)){if(K(Y)&&Wt=="")return ut;if(Ct&&Wt==""&&(it(Y)||Y.port!==null))return;if(ke=N(Y,Wt),ke)return ke;if(Wt="",Ot=ve,Ct)return;continue}else At=="["?qt=!0:At=="]"&&(qt=!1),Wt+=At;break;case kt:if(St.test(At))Wt+=At;else if(At==at||At=="/"||At=="?"||At=="#"||At=="\\"&&K(Y)||Ct){if(Wt!=""){var xe=parseInt(Wt,10);if(xe>65535)return rt;Y.port=K(Y)&&xe===V[Y.scheme]?null:xe,Wt=""}if(Ct)return;Ot=ve;continue}else return rt;break;case zt:if(Y.scheme="file",At=="/"||At=="\\")Ot=Yt;else if(Dt&&Dt.scheme=="file")if(At==at)Y.host=Dt.host,Y.path=Dt.path.slice(),Y.query=Dt.query;else if(At=="?")Y.host=Dt.host,Y.path=Dt.path.slice(),Y.query="",Ot=yt;else if(At=="#")Y.host=Dt.host,Y.path=Dt.path.slice(),Y.query=Dt.query,Y.fragment="",Ot=ue;else{Tt(Se.slice(Vt).join(""))||(Y.host=Dt.host,Y.path=Dt.path.slice(),Ft(Y)),Ot=pe;continue}else{Ot=pe;continue}break;case Yt:if(At=="/"||At=="\\"){Ot=wt;break}Dt&&Dt.scheme=="file"&&!Tt(Se.slice(Vt).join(""))&&(ft(Dt.path[0],!0)?Y.path.push(Dt.path[0]):Y.host=Dt.host),Ot=pe;continue;case wt:if(At==at||At=="/"||At=="\\"||At=="?"||At=="#"){if(!Ct&&ft(Wt))Ot=pe;else if(Wt==""){if(Y.host="",Ct)return;Ot=ve}else{if(ke=N(Y,Wt),ke)return ke;if(Y.host=="localhost"&&(Y.host=""),Ct)return;Wt="",Ot=ve}continue}else Wt+=At;break;case ve:if(K(Y)){if(Ot=pe,At!="/"&&At!="\\")continue}else if(!Ct&&At=="?")Y.query="",Ot=yt;else if(!Ct&&At=="#")Y.fragment="",Ot=ue;else if(At!=at&&(Ot=pe,At!="/"))continue;break;case pe:if(At==at||At=="/"||At=="\\"&&K(Y)||!Ct&&(At=="?"||At=="#")){if(dt(Wt)?(Ft(Y),At!="/"&&!(At=="\\"&&K(Y))&&Y.path.push("")):Rt(Wt)?At!="/"&&!(At=="\\"&&K(Y))&&Y.path.push(""):(Y.scheme=="file"&&!Y.path.length&&ft(Wt)&&(Y.host&&(Y.host=""),Wt=Wt.charAt(0)+":"),Y.path.push(Wt)),Wt="",Y.scheme=="file"&&(At==at||At=="?"||At=="#"))for(;Y.path.length>1&&Y.path[0]==="";)Y.path.shift();At=="?"?(Y.query="",Ot=yt):At=="#"&&(Y.fragment="",Ot=ue)}else Wt+=tt(At,pt);break;case Ht:At=="?"?(Y.query="",Ot=yt):At=="#"?(Y.fragment="",Ot=ue):At!=at&&(Y.path[0]+=tt(At,lt));break;case yt:!Ct&&At=="#"?(Y.fragment="",Ot=ue):At!=at&&(At=="'"&&K(Y)?Y.query+="%27":At=="#"?Y.query+="%23":Y.query+=tt(At,lt));break;case ue:At!=at&&(Y.fragment+=tt(At,vt));break}Vt++}},ie=function(_t){var Ct=v(this,ie,"URL"),Dt=arguments.length>1?arguments[1]:void 0,Ot=n(_t),Vt=_(Ct,{type:"URL"}),Wt,se;if(Dt!==void 0){if(Dt instanceof ie)Wt=E(Dt);else if(se=$t(Wt={},n(Dt)),se)throw TypeError(se)}if(se=$t(Vt,Ot,null,Wt),se)throw TypeError(se);var qt=Vt.searchParams=new y,me=I(qt);me.updateSearchParams(Vt.query),me.updateURL=function(){Vt.query=String(qt)||null},A||(Ct.href=_e.call(Ct),Ct.origin=fe.call(Ct),Ct.protocol=Oe.call(Ct),Ct.username=oe.call(Ct),Ct.password=ri.call(Ct),Ct.host=ai.call(Ct),Ct.hostname=oi.call(Ct),Ct.port=Ze.call(Ct),Ct.pathname=si.call(Ct),Ct.search=je.call(Ct),Ct.searchParams=We.call(Ct),Ct.hash=ze.call(Ct))},Me=ie.prototype,_e=function(){var Y=E(this),_t=Y.scheme,Ct=Y.username,Dt=Y.password,Ot=Y.host,Vt=Y.port,Wt=Y.path,se=Y.query,qt=Y.fragment,me=_t+":";return Ot!==null?(me+="//",it(Y)&&(me+=Ct+(Dt?":"+Dt:"")+"@"),me+=ht(Ot),Vt!==null&&(me+=":"+Vt)):_t=="file"&&(me+="//"),me+=Y.cannotBeABaseURL?Wt[0]:Wt.length?"/"+Wt.join("/"):"",se!==null&&(me+="?"+se),qt!==null&&(me+="#"+qt),me},fe=function(){var Y=E(this),_t=Y.scheme,Ct=Y.port;if(_t=="blob")try{return new ie(_t.path[0]).origin}catch{return"null"}return _t=="file"||!K(Y)?"null":_t+"://"+ht(Y.host)+(Ct!==null?":"+Ct:"")},Oe=function(){return E(this).scheme+":"},oe=function(){return E(this).username},ri=function(){return E(this).password},ai=function(){var Y=E(this),_t=Y.host,Ct=Y.port;return _t===null?"":Ct===null?ht(_t):ht(_t)+":"+Ct},oi=function(){var Y=E(this).host;return Y===null?"":ht(Y)},Ze=function(){var Y=E(this).port;return Y===null?"":String(Y)},si=function(){var Y=E(this),_t=Y.path;return Y.cannotBeABaseURL?_t[0]:_t.length?"/"+_t.join("/"):""},je=function(){var Y=E(this).query;return Y?"?"+Y:""},We=function(){return E(this).searchParams},ze=function(){var Y=E(this).fragment;return Y?"#"+Y:""},Te=function(Y,_t){return{get:Y,set:_t,configurable:!0,enumerable:!0}};if(A&&F(Me,{href:Te(_e,function(Y){var _t=E(this),Ct=n(Y),Dt=$t(_t,Ct);if(Dt)throw TypeError(Dt);I(_t.searchParams).updateSearchParams(_t.query)}),origin:Te(fe),protocol:Te(Oe,function(Y){var _t=E(this);$t(_t,n(Y)+":",Bt)}),username:Te(oe,function(Y){var _t=E(this),Ct=u(n(Y));if(!ot(_t)){_t.username="";for(var Dt=0;Dt<Ct.length;Dt++)_t.username+=tt(Ct[Dt],mt)}}),password:Te(ri,function(Y){var _t=E(this),Ct=u(n(Y));if(!ot(_t)){_t.password="";for(var Dt=0;Dt<Ct.length;Dt++)_t.password+=tt(Ct[Dt],mt)}}),host:Te(ai,function(Y){var _t=E(this);_t.cannotBeABaseURL||$t(_t,n(Y),bt)}),hostname:Te(oi,function(Y){var _t=E(this);_t.cannotBeABaseURL||$t(_t,n(Y),xt)}),port:Te(Ze,function(Y){var _t=E(this);ot(_t)||(Y=n(Y),Y==""?_t.port=null:$t(_t,Y,kt))}),pathname:Te(si,function(Y){var _t=E(this);_t.cannotBeABaseURL||(_t.path=[],$t(_t,n(Y),ve))}),search:Te(je,function(Y){var _t=E(this);Y=n(Y),Y==""?_t.query=null:(Y.charAt(0)=="?"&&(Y=Y.slice(1)),_t.query="",$t(_t,Y,yt)),I(_t.searchParams).updateSearchParams(_t.query)}),searchParams:Te(We),hash:Te(ze,function(Y){var _t=E(this);if(Y=n(Y),Y==""){_t.fragment=null;return}Y.charAt(0)=="#"&&(Y=Y.slice(1)),_t.fragment="",$t(_t,Y,ue)})}),W(Me,"toJSON",function(){return _e.call(this)},{enumerable:!0}),W(Me,"toString",function(){return _e.call(this)},{enumerable:!0}),p){var Ve=p.createObjectURL,li=p.revokeObjectURL;Ve&&W(ie,"createObjectURL",function(_t){return Ve.apply(p,arguments)}),li&&W(ie,"revokeObjectURL",function(_t){return li.apply(p,arguments)})}c(ie,"URL"),g({global:!0,forced:!k,sham:!A},{URL:ie})},9801:function(){},3822:function(M,O,m){var g=m(2221);M.exports=g},1434:function(M,O,m){var g=m(5078);M.exports=g},6899:function(M,O,m){var g=m(98);M.exports=g},7710:function(M,O,m){var g=m(5739);m(162),M.exports=g},4486:function(M,O,m){var g=m(278);M.exports=g},4877:function(M,O,m){var g=m(1484);M.exports=g},7178:function(M,O,m){var g=m(7731);M.exports=g},5603:function(M,O,m){var g=m(3669);M.exports=g},1206:function(M,O,m){m(162);var g=m(6899),A=m(4696),k=Array.prototype,R={DOMTokenList:!0,NodeList:!0};M.exports=function(F){var W=F.forEach;return F===k||F instanceof Array&&W===k.forEach||R.hasOwnProperty(A(F))?g:W}},6174:function(M,O,m){var g=m(2604);M.exports=g},57:function(M,O,m){var g=m(263);M.exports=g},4741:function(M,O,m){var g=m(7663);M.exports=g},8368:function(M,O,m){var g=m(5063);M.exports=g},3739:function(M,O,m){var g=m(6813);M.exports=g},172:function(M,O,m){var g=m(6285);M.exports=g},4963:function(M,O,m){var g=m(3213);M.exports=g},7820:function(M,O,m){var g=m(3512);M.exports=g},8980:function(M,O,m){var g=m(8168);M.exports=g},5636:function(M,O,m){var g=m(8651);M.exports=g},6672:function(M,O,m){var g=m(3083);M.exports=g},5059:function(M,O,m){var g=m(2987);M.exports=g},3969:function(M,O,m){var g=m(2239);M.exports=g},6618:function(M,O,m){var g=m(3154);m(162),M.exports=g},5279:function(M,O,m){var g=m(6577);M.exports=g},9562:function(M,O,m){m(2906);var g=m(7545);M.exports=g.setTimeout},2285:function(M,O,m){var g=m(5008);m(162),M.exports=g},8535:function(M,O,m){var g=m(994);m(162),M.exports=g},652:function(M,O,m){var g=m(5668);M.exports=g},5668:function(M,O,m){m(4948),m(9801),m(9336);var g=m(7545);M.exports=g.URL},2534:function(M){M.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(M){M.exports=$i},4960:function(){},6759:function(){},6272:function(){}},ii={};function Lt(M){var O=ii[M];if(O!==void 0)return O.exports;var m=ii[M]={exports:{}};return qi[M](m,m.exports,Lt),m.exports}(function(){Lt.n=function(M){var O=M&&M.__esModule?function(){return M.default}:function(){return M};return Lt.d(O,{a:O}),O}})(),function(){Lt.d=function(M,O){for(var m in O)Lt.o(O,m)&&!Lt.o(M,m)&&Object.defineProperty(M,m,{enumerable:!0,get:O[m]})}}(),function(){Lt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){Lt.o=function(M,O){return Object.prototype.hasOwnProperty.call(M,O)}}();var ni={};return function(){Lt.d(ni,{default:function(){return Gc}});var M=Lt(9131),O=Lt.n(M),m=Lt(1899),g=Lt.n(m),A=Lt(6562),k=Lt.n(A),R=Lt(1734),F=Lt.n(R),W=Lt(8005),v=Lt.n(W),a=Lt(6065),h=Lt.n(a),u=Lt(4496),i=Lt.n(u);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(b){var f=this;do{if(Element.prototype.matches.call(f,b))return f;f=f.parentElement||f.parentNode}while(f!==null&&f.nodeType===1);return null});/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(b){if("Element"in b){var f="classList",e="prototype",o=b.Element[e],t=Object,l=O()(String[e])||function(){return this.replace(/^\s+|\s+$/g,"")},C=g()(Array[e])||function(q){for(var st=0,nt=this.length;st<nt;st++)if(st in this&&this[st]===q)return st;return-1},S=function(st,nt){this.name=st,this.code=DOMException[st],this.message=nt},T=function(st,nt){if(nt==="")throw new S("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(nt))throw new S("INVALID_CHARACTER_ERR","The token must not contain space characters.");return C.call(st,nt)},x=function(st){for(var nt=l.call(st.getAttribute("class")||""),ct=nt?nt.split(/\s+/):[],Mt=0,Gt=ct.length;Mt<Gt;Mt++)this.push(ct[Mt]);this._updateClassName=function(){st.setAttribute("class",this.toString())}},w=x[e]=[],P=function(){return new x(this)};if(S[e]=Error[e],w.item=function(q){return this[q]||null},w.contains=function(q){return~T(this,q+"")},w.add=function(){var q=arguments,st=0,nt=q.length,ct,Mt=!1;do ct=q[st]+"",~T(this,ct)||(this.push(ct),Mt=!0);while(++st<nt);Mt&&this._updateClassName()},w.remove=function(){var q=arguments,st=0,nt=q.length,ct,Mt=!1,Gt;do for(ct=q[st]+"",Gt=T(this,ct);~Gt;){var Zt;k()(Zt=this).call(Zt,Gt,1),Mt=!0,Gt=T(this,ct)}while(++st<nt);Mt&&this._updateClassName()},w.toggle=function(q,st){var nt=this.contains(q),ct=nt?st!==!0&&"remove":st!==!1&&"add";return ct&&this[ct](q),st===!0||st===!1?st:!nt},w.replace=function(q,st){var nt=T(q+"");if(~nt){var ct;k()(ct=this).call(ct,nt,1,st),this._updateClassName()}},w.toString=function(){return this.join(" ")},F()){var $={get:P,enumerable:!0,configurable:!0};try{F()(o,f,$)}catch(q){(q.number===void 0||q.number===-2146823252)&&($.enumerable=!1,F()(o,f,$))}}else t[e].__defineGetter__&&o.__defineGetter__(f,P)}}(self),function(){var b=document.createElement("_");if(b.classList.add("c1","c2"),!b.classList.contains("c2")){var f=function(t){var l=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(C){var S,T=arguments.length;for(S=0;S<T;S++)C=arguments[S],l.call(this,C)}};f("add"),f("remove")}if(b.classList.toggle("c3",!1),b.classList.contains("c3")){var e=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,t){return 1 in arguments&&!this.contains(o)==!t?t:e.call(this,o)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(o,t){var l=this.toString().split(" "),C=g()(l).call(l,o+"");~C&&(l=v()(l).call(l,C),this.remove.apply(this,l),this.add(t),this.add.apply(this,v()(l).call(l,1)))}),b=null}());/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */(function(){if(typeof window<"u"&&window.addEventListener){var b=h()(null),f,e,o=function(){clearTimeout(e),e=i()(f,100)},t=function(){},l=function(){var w;window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?(w=new MutationObserver(o),w.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),t=function(){try{w.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),t=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)})},C=function(w){function P(nt){var ct;return nt.protocol!==void 0?ct=nt:(ct=document.createElement("a"),ct.href=nt),ct.protocol.replace(/:/g,"")+ct.host}var $,q,st;return window.XMLHttpRequest&&($=new XMLHttpRequest,q=P(location),st=P(w),$.withCredentials===void 0&&st!==""&&st!==q?$=XDomainRequest||void 0:$=XMLHttpRequest),$},S="http://www.w3.org/1999/xlink";f=function(){var w,P,$,q,st,nt=0,ct,Mt,Gt,Zt,Jt;function Pt(){nt-=1,nt===0&&(t(),l())}function ne(ye){return function(){b[ye.base]!==!0&&(ye.useEl.setAttributeNS(S,"xlink:href","#"+ye.hash),ye.useEl.hasAttribute("href")&&ye.useEl.setAttribute("href","#"+ye.hash))}}function be(ye){return function(){var Pe=document.body,Ue=document.createElement("x"),De;ye.onload=null,Ue.innerHTML=ye.responseText,De=Ue.getElementsByTagName("svg")[0],De&&(De.setAttribute("aria-hidden","true"),De.style.position="absolute",De.style.width=0,De.style.height=0,De.style.overflow="hidden",Pe.insertBefore(De,Pe.firstChild)),Pt()}}function Ee(ye){return function(){ye.onerror=null,ye.ontimeout=null,Pt()}}for(t(),Zt=document.getElementsByTagName("use"),st=0;st<Zt.length;st+=1){try{P=Zt[st].getBoundingClientRect()}catch{P=!1}q=Zt[st].getAttribute("href")||Zt[st].getAttributeNS(S,"href")||Zt[st].getAttribute("xlink:href"),q&&q.split?Gt=q.split("#"):Gt=["",""],w=Gt[0],$=Gt[1],ct=P&&P.left===0&&P.right===0&&P.top===0&&P.bottom===0,P&&P.width===0&&P.height===0&&!ct?(Zt[st].hasAttribute("href")&&Zt[st].setAttributeNS(S,"xlink:href",q),w.length&&(Jt=b[w],Jt!==!0&&i()(ne({useEl:Zt[st],base:w,hash:$}),0),Jt===void 0&&(Mt=C(w),Mt!==void 0&&(Jt=new Mt,b[w]=Jt,Jt.onload=be(Jt),Jt.onerror=Ee(Jt),Jt.ontimeout=Ee(Jt),Jt.open("GET",w),Jt.send(),nt+=1)))):ct?w.length&&b[w]&&i()(ne({useEl:Zt[st],base:w,hash:$}),0):b[w]===void 0?b[w]=!0:b[w].onload&&(b[w].abort(),delete b[w].onload,b[w]=!0)}Zt="",nt+=1,Pt()};var T;T=function(){window.removeEventListener("load",T,!1),e=i()(f,0)},document.readyState!=="complete"?window.addEventListener("load",T,!1):T()}})();var r=Lt(1845);function n(b,f){(f==null||f>b.length)&&(f=b.length);for(var e=0,o=new Array(f);e<f;e++)o[e]=b[e];return o}function c(b){if(r(b))return n(b)}var d=Lt(184),s=Lt(662),p=Lt(7172);function y(b){if(typeof d<"u"&&s(b)!=null||b["@@iterator"]!=null)return p(b)}var I=Lt(711);function _(b,f){var e;if(!!b){if(typeof b=="string")return n(b,f);var o=I(e=Object.prototype.toString.call(b)).call(e,8,-1);if(o==="Object"&&b.constructor&&(o=b.constructor.name),o==="Map"||o==="Set")return p(b);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(b,f)}}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(b){return c(b)||y(b)||_(b)||E()}var L=Lt(7077);function z(b,f,e){return f in b?L(b,f,{value:e,enumerable:!0,configurable:!0,writable:!0}):b[f]=e,b}function X(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}function ut(b,f){for(var e=0;e<f.length;e++){var o=f[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),L(b,o.key,o)}}function rt(b,f,e){return f&&ut(b.prototype,f),e&&ut(b,e),b}var Et=Lt(4426),Q=Lt.n(Et),St=Lt(9406),j=Lt.n(St),jt=Lt(8189),gt=Lt.n(jt),Nt=Lt(3972),J=Lt.n(Nt),et=Lt(2777),Z=Lt(961),H=Lt.n(Z),at=Lt(5695),N=Lt.n(at),B=Lt(8592),U=Lt.n(B),G=Lt(9052),ht=Lt.n(G),lt=Lt(2560),vt=Lt.n(lt),pt=Lt(2461),mt=Lt.n(pt);function tt(b){if(r(b))return b}function V(b,f){var e=b==null?null:typeof d<"u"&&s(b)||b["@@iterator"];if(e!=null){var o=[],t=!0,l=!1,C,S;try{for(e=e.call(b);!(t=(C=e.next()).done)&&(o.push(C.value),!(f&&o.length===f));t=!0);}catch(T){l=!0,S=T}finally{try{!t&&e.return!=null&&e.return()}finally{if(l)throw S}}return o}}function K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function it(b,f){return tt(b)||V(b,f)||_(b,f)||K()}var ot=Lt(6397),ft=Lt.n(ot),Tt=Lt(7636),Ft=Lt.n(Tt),Rt=Lt(789),dt=Lt.n(Rt),Bt=Lt(4729),Ut=Lt.n(Bt),Qt=Lt(1610),he=Lt.n(Qt),ee=Lt(3053),re=Lt.n(ee),Kt,ae=["zoomIn","zoomOut","hand"],ge=["history","undo","redo","reset"],Ce=["delete","deleteAll"],bt=j()(Kt=[]).call(Kt,ae,ge,Ce),xt={FILTER:"filter",COLOR:"color"},kt=["rect","circle","triangle"],zt={CROPZONE:"cropzone"},Yt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},wt=Wt("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),ve={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},pe={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Ht={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},yt={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},ue={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},$t={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},ie=Wt("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Me={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},_e={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},fe={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Oe={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},oe={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},ri={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},ai={realTimeEvent:!0,min:-360,max:360,value:0},oi={min:5,max:30,value:12},Ze={realTimeEvent:!0,min:2,max:300,value:3},si={realTimeEvent:!0,min:10,max:100,value:50},je={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},We={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},ze={realTimeEvent:!0,min:32,max:4088,value:800},Te=2,Ve="tui-image-editor-",li=Math.min,Y=Math.max,_t=!1,Ct=0;function Dt(b){return b.__fe_id||(Ct+=1,b.__fe_id=Ct),b.__fe_id}function Ot(b){return typeof b=="function"}function Vt(b,f,e){if(f>e){var o=[e,f];f=o[0],e=o[1]}return Y(f,li(b,e))}function Wt(){for(var b={},f=arguments.length,e=new Array(f),o=0;o<f;o++)e[o]=arguments[o];return U()(e,function(t){b[t]=t}),b}function se(b,f){var e={},o=f.length,t=0,l;for(t=0;t<o;t+=1)l=f[t],e[l]=b[l];return e}function qt(b){return ft()(b,10)}function me(b){return b.replace(/-([a-z])/g,function(f,e){return e.toUpperCase()})}function Se(){return!!(window.File&&window.FileList&&window.FileReader)}function At(b,f){var e,o,t;if(b.length===4){var l;b=j()(l="".concat(b)).call(l,v()(b).call(b,1,4))}var C=ft()(v()(b).call(b,1,3),16),S=ft()(v()(b).call(b,3,5),16),T=ft()(v()(b).call(b,5,7),16),x=f||1;return j()(e=j()(o=j()(t="rgba(".concat(C,", ")).call(t,S,", ")).call(o,T,", ")).call(e,x,")")}function Ie(){_t||(_t=!0,Ut()("image-editor","UA-129999381-1"))}function ke(b,f){var e=document.getElementsByTagName("head"),o=it(e,1),t=o[0],l=document.createElement("link"),C=encodeURIComponent(b);f&&(l.id=f),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href","data:text/css;charset=UTF-8,".concat(C)),t.appendChild(l)}function Je(b){return function(f){return b.querySelector(f)}}function ci(b){var f=/data:(image\/.+);base64,/,e="",o,t,l;o=b.replace(f,function(S,T){return e=T,""}),o=atob(o);var C=o.length;for(t=new Uint8Array(C),l=0;l<C;l+=1)t[l]=o.charCodeAt(l);return new Blob([t],{type:e})}function ui(b){return Number(b.toFixed(Te))}function xe(b){U()(b,function(f,e){b[e]=null})}function hi(){var b,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(f.charAt(0)==="."){var o;return j()(o=".".concat(Ve).concat(e)).call(o,v()(f).call(f,1))}return j()(b="".concat(Ve).concat(e)).call(b,f)}function _r(b,f){var e=f.originX,o=f.originY,t=b.getPointByOrigin(e,o),l=t.x,C=t.y;b.set({left:l,top:C,originX:e,originY:o}),b.setCoords()}function xr(b){var f,e={};return Ft()(f=mt()(b)).call(f,function(o){e[b[o]]=o}),e}function Fi(b,f){b.customProps=b.customProps||{},H()(b.customProps,f)}function Qe(b,f){var e={};return vt()(f)&&(f=[f]),U()(f,function(o){e[o]=b.customProps[o]}),e}function Mr(b){return b.charAt(0).toUpperCase()+v()(b).call(b,1)}function fi(b,f){return g()(b).call(b,f)>=0}function tn(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return he()(b,"type")||xt.COLOR}function Bi(b){var f=dt()(b),e=f===void 0?{}:f;return e.source?xt.FILTER:xt.COLOR}function en(b){return re()(b.get("type"),kt)>=0}function Hi(b){if(fi(kt,b))return"Shape";switch(b){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return nn(b)}}function Tr(b){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=f.useAlpha,o=e===void 0?!0:e,t=f.mode,l=Yt.VINTAGE,C=Yt.REMOVE_COLOR,S=Yt.BLEND_COLOR,T=Yt.SEPIA2,x=Yt.COLOR_FILTER,w=Yt.REMOVE_WHITE,P=Yt.BLEND,$;switch(b){case l:$=T;break;case C:$=o?x:w;break;case S:$=t==="add"?P:t;break;default:$=b}return nn($)}function Er(b){var f=Ht.LOAD_IMAGE;return typeof b=="string"?f===b:f===b.name}function Dr(b){var f,e,o=Ht.FLIP_IMAGE,t=Ht.ROTATE_IMAGE,l=Ht.ADD_TEXT,C=Ht.APPLY_FILTER,S=Ht.REMOVE_FILTER,T=Ht.CHANGE_SHAPE,x=Ht.CHANGE_ICON_COLOR,w=Ht.CHANGE_TEXT_STYLE,P=Ht.CLEAR_OBJECTS,$=Ht.ADD_IMAGE_OBJECT,q=Ht.REMOVE_OBJECT,st=Ht.RESIZE_IMAGE,nt=b.name,ct=b.args,Mt;switch(nt){case o:Mt={name:nt,detail:ct[1]==="reset"?ct[1]:v()(f=ct[1]).call(f,4)};break;case t:Mt={name:nt,detail:ct[2]};break;case C:Mt={name:$t.APPLY_FILTER,detail:Tr(ct[1],ct[2])};break;case S:Mt={name:$t.REMOVE_FILTER,detail:"Remove"};break;case T:Mt={name:$t.CHANGE_SHAPE,detail:"Change"};break;case x:Mt={name:$t.CHANGE_ICON_COLOR,detail:"Change"};break;case w:Mt={name:$t.CHANGE_TEXT_STYLE,detail:"Change"};break;case q:Mt={name:$t.REMOVE_OBJECT,detail:ct[2]};break;case P:Mt={name:$t.CLEAR_OBJECTS,detail:"All"};break;case $:Mt={name:$t.ADD_IMAGE_OBJECT,detail:"Add"};break;case l:Mt={name:$t.ADD_TEXT};break;case st:Mt={name:$t.RESIZE,detail:j()(e="".concat(~~ct[1].width,"x")).call(e,~~ct[1].height)};break;default:Mt={name:nt};break}return ct[1]==="mask"&&(Mt={name:$t.LOAD_MASK_IMAGE,detail:"Apply"}),Mt}function wr(b){return b==="top"?"bottom":b==="left"?"right":b==="right"?"left":"top"}function nn(b){return b.replace(/[a-z]/,function(f){return f.toUpperCase()})}function Ar(b){var f=b.left,e=b.top,o=b.width,t=b.height,l=We.LEFT,C=We.TOP,S=We.WIDTH,T=We.HEIGHT;return f===l&&e===C&&o===S&&t===T}var Or=Wt("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),rn={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},kr={UN_IMPLEMENTATION:function(f){return rn.UN_IMPLEMENTATION+f},NO_COMPONENT_NAME:function(){return rn.NO_COMPONENT_NAME}},di={types:H()({},Or),create:function(f){f=f.toLowerCase();for(var e=kr[f],o=arguments.length,t=new Array(o>1?o-1:0),l=1;l<o;l++)t[l-1]=arguments[l];return e.apply(void 0,t)}},an=di.create,on=di.types,Pr=function(){function b(f,e){X(this,b),this.name=f.name,this.args=e,this.execute=f.execute,this.undo=f.undo,this.executeCallback=f.executeCallback||null,this.undoCallback=f.undoCallback||null,this.undoData={}}return rt(b,[{key:"execute",value:function(){throw new Error(an(on.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(an(on.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return mt()(this.undoData).length>0}},{key:"setUndoData",value:function(e,o,t){return o&&(e=o),t?o||(o=e):(H()(this.undoData,e),o=null),o}},{key:"setExecuteCallback",value:function(e){return this.executeCallback=e,this}},{key:"setUndoCallback",value:function(e){return this.undoCallback=e,this}}]),b}(),Lr=Pr,sn={};function jr(b){var f=sn[b];if(f){for(var e=arguments.length,o=new Array(e>1?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return new Lr(f,o)}return null}function Nr(b){sn[b.name]=b}var de={create:jr,register:Nr},ln=function(){function b(){X(this,b),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return rt(b,[{key:"_invokeExecution",value:function(e){var o=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var l=e.args;return l||(l=[]),e.execute.apply(e,D(l)).then(function(C){return o._isSilent||(o.pushUndoStack(e),o.fire(t?yt.AFTER_REDO:yt.EXECUTE_COMMAND,e)),o.unlock(),Ot(e.executeCallback)&&e.executeCallback(C),C}).catch(function(C){return o.unlock(),gt().reject(C)})}},{key:"_invokeUndo",value:function(e){var o=this;this.lock();var t=e.args;return t||(t=[]),e.undo.apply(e,D(t)).then(function(l){return o.pushRedoStack(e),o.fire(yt.AFTER_UNDO,e),o.unlock(),Ot(e.undoCallback)&&e.undoCallback(l),l}).catch(function(l){return o.unlock(),gt().reject(l)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(yt.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(yt.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var e=this;this._isSilent=!0;for(var o=arguments.length,t=new Array(o),l=0;l<o;l++)t[l]=arguments[l];return this.execute.apply(this,j()(t).call(t,[this._isSilent])).then(function(){e._isSilent=!1})}},{key:"execute",value:function(){var e=this;if(this._isLocked)return gt().reject(oe.isLock);for(var o=arguments.length,t=new Array(o),l=0;l<o;l++)t[l]=arguments[l];var C=t[0];return vt()(C)&&(C=de.create.apply(de,t)),this._invokeExecution(C).then(function(S){return e.clearRedoStack(),S})}},{key:"undo",value:function(){var e=this._undoStack.pop(),o,t="";if(e&&this._isLocked&&(this.pushUndoStack(e,!0),e=null),e)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),o=this._invokeUndo(e);else{if(t=oe.undo,this._isLocked){var l;t=j()(l="".concat(t," Because ")).call(l,oe.isLock)}o=gt().reject(t)}return o}},{key:"redo",value:function(){var e=this._redoStack.pop(),o,t="";if(e&&this._isLocked&&(this.pushRedoStack(e,!0),e=null),e)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),o=this._invokeExecution(e,!0);else{if(t=oe.redo,this._isLocked){var l;t=j()(l="".concat(t," Because ")).call(l,oe.isLock)}o=gt().reject(t)}return o}},{key:"pushUndoStack",value:function(e,o){this._undoStack.push(e),o||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(e,o){this._redoStack.push(e),o||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),b}();ht().mixin(ln);var Rr=ln,zr=Lt(5214),Be=Lt.n(zr),Fr=function(b){var f,e,o,t,l,C,S,T=b.locale,x=b.biImage,w=b.commonStyle,P=b.headerStyle,$=b.loadButtonStyle,q=b.downloadButtonStyle,st=b.submenuStyle;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=`
    <div class="tui-image-editor-main-container" style="`.concat(w,`">
        <div class="tui-image-editor-header" style="`)).call(S,P,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(C,x,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(l,$,`">
                    `)).call(t,T.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(o,q,`">
                    `)).call(e,T.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(f,st,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},Br=function(b){var f,e,o,t,l,C=b.locale,S=b.biImage,T=b.loadButtonStyle,x=b.downloadButtonStyle,w=b.menuBarPosition;return j()(f=j()(e=j()(o=j()(t=j()(l=`
    <ul class="tui-image-editor-help-menu `.concat(wr(w),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(l,S,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(t,T,`">
                `)).call(o,C.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(e,x,`">
                `)).call(f,C.localize("Download"),`
            </button>
        </div>
    </div>
`)},Hr=Lt(899),Ne=Lt.n(Hr),Yr=function(b){var f,e,o,t,l,C,S,T,x,w,P,$,q,st,nt,ct,Mt,Gt,Zt,Jt,Pt,ne,be,Ee,ye,Pe,Ue,De,ei,Si=b.subMenuLabelActive,bi=b.subMenuLabelNormal,_i=b.subMenuRangeTitle,xi=b.submenuPartitionVertical,Mi=b.submenuPartitionHorizontal,Ti=b.submenuCheckbox,Ei=b.submenuRangePointer,Di=b.submenuRangeValue,wi=b.submenuColorpickerTitle,Ai=b.submenuColorpickerButton,Oi=b.submenuRangeBar,ki=b.submenuRangeSubbar,Pi=b.submenuDisabledRangePointer,Li=b.submenuDisabledRangeBar,ji=b.submenuDisabledRangeSubbar,Ni=b.submenuIconSize,Ri=b.menuIconSize,zi=b.biSize,Le=b.menuIconStyle,Ge=b.submenuIconStyle;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w=j()(P=j()($=j()(q=j()(st=j()(nt=j()(ct=j()(Mt=j()(Gt=j()(Zt=j()(Jt=j()(Pt=j()(ne=j()(be=j()(Ee=j()(ye=j()(Pe=j()(Ue=j()(De=j()(ei=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(Si,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(ei,bi,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(De,_i,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(Ue,xi,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Pe,Mi,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(ye,Ti,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Ee,Ei,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(be,Oi,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(ne,ki,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Pt,Pi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(Jt,ji,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(Zt,Li,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Gt,Di,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Mt,wi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(ct,Ai,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(nt,Ri,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(st,Ni,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(q,zi,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call($,Le.normal.color,`;
        stroke: `)).call(P,Le.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(w,Le.active.color,`;
        stroke: `)).call(x,Le.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(T,Le.hover.color,`;
        stroke: `)).call(S,Le.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(C,Le.disabled.color,`;
        stroke: `)).call(l,Le.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(t,Ge.normal.color,`;
        stroke: `)).call(o,Ge.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(e,Ge.active.color,`;
        stroke: `)).call(f,Ge.active.color,`;
    }
`)},Ur={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},Wr=Lt(2534),Gr=function(){function b(f){X(this,b),this.styles=this._changeToObject(H()({},Ur,f)),ke(this._styleMaker()),this._loadDefaultSvgIcon()}return rt(b,[{key:"getStyle",value:function(e){var o=null,t=e.replace(/\..+$/,""),l=this.styles[e];switch(e){case"common.bi":o=this.styles[e].image;break;case"menu.icon":o={active:this.styles["".concat(t,".activeIcon")],normal:this.styles["".concat(t,".normalIcon")],hover:this.styles["".concat(t,".hoverIcon")],disabled:this.styles["".concat(t,".disabledIcon")]};break;case"submenu.icon":o={active:this.styles["".concat(t,".activeIcon")],normal:this.styles["".concat(t,".normalIcon")]};break;case"submenu.label":o={active:this._makeCssText(this.styles["".concat(t,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(t,".normalLabel")])};break;case"submenu.partition":o={vertical:this._makeCssText(H()({},l,{borderLeft:"1px solid ".concat(l.color)})),horizontal:this._makeCssText(H()({},l,{borderBottom:"1px solid ".concat(l.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":l.backgroundColor=l.color,o=this._makeCssText(l);break;default:o=this._makeCssText(l);break}return o}},{key:"_styleMaker",value:function(){var e=this.getStyle("submenu.label"),o=this.getStyle("submenu.partition");return Yr({subMenuLabelActive:e.active,subMenuLabelNormal:e.normal,submenuPartitionVertical:o.vertical,submenuPartitionHorizontal:o.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(e){var o={};return U()(e,function(t,l){var C=l.match(/^(.+)\.([a-z]+)$/i),S=it(C,3),T=S[1],x=S[2];o[T]||(o[T]={}),o[T][x]=t}),o}},{key:"_makeCssText",value:function(e){var o=this,t=[];return U()(e,function(l,C){var S,T;g()(S=["backgroundImage"]).call(S,C)>-1&&l!=="none"&&(l="url(".concat(l,")")),t.push(j()(T="".concat(o._toUnderScore(C),": ")).call(T,l))}),t.join(";")}},{key:"_toUnderScore",value:function(e){return e.replace(/([A-Z])/g,function(o,t){return"-".concat(t.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var e=new DOMParser,o=Wr.replace(/data:image\/svg\+xml;base64,/,""),t=e.parseFromString(atob(o),"text/xml");document.body.appendChild(t.documentElement)}}},{key:"_makeIconClassName",value:function(e,o){var t=o?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),l=t[e],C=l.path,S=l.name;return C&&S?e:"".concat(e," use-default")}},{key:"_makeSvgIconPrefix",value:function(e,o){var t,l=o?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),C=l[e],S=C.path,T=C.name;return S&&T?j()(t="".concat(S,"#")).call(t,T,"-"):"#"}},{key:"_makeSvgItem",value:function(e,o,t){var l=this;return Ne()(e).call(e,function(C){var S,T,x=l._makeSvgIconPrefix(C,t),w=l._toUnderScore(o),P=l._makeIconClassName(C,t);return j()(S=j()(T='<use xlink:href="'.concat(x,"ic-")).call(T,w,'" class="')).call(S,P,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(e,o){var t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j()(t='<svg class="svg_ic-'.concat(l?"submenu":"menu",'">')).call(t,this._makeSvgItem(e,o,l),"</svg>")}}]),b}(),Xr=Gr,Zr=Lt(9146),It=Lt.n(Zr),Vr=Lt(6623),cn=Lt(4230);function Yi(b,f){return Yi=cn||function(o,t){return o.__proto__=t,o},Yi(b,f)}function le(b,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Vr(f&&f.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),f&&Yi(b,f)}var Jr=Lt(3742);function gi(b){return typeof d=="function"&&typeof Jr=="symbol"?gi=function(e){return typeof e}:gi=function(e){return e&&typeof d=="function"&&e.constructor===d&&e!==d.prototype?"symbol":typeof e},gi(b)}function te(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function ce(b,f){if(f&&(gi(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return te(b)}var un=Lt(9856);function Xt(b){return Xt=cn?un:function(e){return e.__proto__||un(e)},Xt(b)}var Qr=Lt(6092),Ke=Lt.n(Qr),Kr=Lt(4858),$r=Lt.n(Kr),qr=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],hn=function(){function b(f,e){var o=e.defaultColor,t=o===void 0?"#7e7e7e":o,l=e.toggleDirection,C=l===void 0?"up":l,S=e.usageStatistics;X(this,b),this.colorpickerElement=f,this.usageStatistics=S,this._show=!1,this._colorpickerElement=f,this._toggleDirection=C,this._makePickerButtonElement(t),this._makePickerLayerElement(f,f.getAttribute("title")),this._color=t,this.picker=$r().create({container:this.pickerElement,preset:qr,color:t,usageStatistics:this.usageStatistics}),this._addEvent()}return rt(b,[{key:"destroy",value:function(){var e=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",U()(this,function(o,t){e[t]=null})}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._changeColorElement(e)}},{key:"_changeColorElement",value:function(e){e?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=e):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(e){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",e?this.colorElement.style.backgroundColor=e:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(e,o){var t=document.createElement("label"),l=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",t.innerHTML=o,l.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(l),e.appendChild(this.pickerControl),e.appendChild(this.colorElement),e.appendChild(t)}},{key:"_addEvent",value:function(){var e=this,o;this.picker.on("selectColor",function(t){e._changeColorElement(t.color),e._color=t.color,e.fire("change",t.color)}),this.eventHandler={pickerToggle:Q()(o=this._pickerToggleEventHandler).call(o,this),pickerHide:function(){return e.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(e){var o=e.target,t=o&&this._isElementInColorPickerControl(o);(!t||t&&this._isPaletteButton(o))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),e.stopPropagation()}},{key:"_isPaletteButton",value:function(e){return e.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(e){for(var o=e;o!==document.body&&o;){if(o===this.pickerControl)return!0;o=o.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var e=this.pickerControl.style,o=this._colorpickerElement.clientWidth/2+2,t=this.pickerControl.offsetWidth/2-o,l=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(l=30),e.top="".concat(l,"px"),e.left="-".concat(t,"px")}}]),b}();ht().mixin(hn);var He=hn,ta=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,fn=function(){function b(f){var e,o,t,l,C,S,T,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,b),this._value=x.value||0,this.rangeElement=f.slider,this.rangeInputElement=f.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=x.min||0,this._max=x.max||100,this._useDecimal=x.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=x.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:Q()(e=this._startChangingSlide).call(e,this),stopChangingSlide:Q()(o=this._stopChangingSlide).call(o,this),changeSlide:Q()(t=this._changeSlide).call(t,this),changeSlideFinally:Q()(l=this._changeSlideFinally).call(l,this),changeInput:Q()(C=this._changeInput).call(C,this),changeInputFinally:Q()(S=this._changeValueWithInput).call(S,this,!0),changeInputWithArrow:Q()(T=this._changeValueWithInputKeyEvent).call(T,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=x.value,this.trigger("change")}return rt(b,[{key:"destroy",value:function(){var e=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",U()(this,function(o,t){e[t]=null})}},{key:"max",get:function(){return this._max},set:function(e){this._max=e,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(e){this._min=e,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(e){e=this._useDecimal?e:qt(e);var o=e-this._min,t=o*this.rangeWidth/this._absMax;this.rangeWidth<t&&(t=this.rangeWidth),this.pointer.style.left="".concat(t,"px"),this.subbar.style.right="".concat(this.rangeWidth-t,"px"),this._value=e,this.rangeInputElement&&(this.rangeInputElement.value=e)}},{key:"trigger",value:function(e){this.fire(e,this._value)}},{key:"_getRangeWidth",value:function(){var e=function(t){return qt(window.getComputedStyle(t,null).width)};return e(this.rangeElement)-e(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(e){var o,t=e.keyCode,l=e.target;if(!(g()(o=[fe.ARROW_UP,fe.ARROW_DOWN]).call(o,t)<0)){var C=Number(l.value);C=this._valueUpDownForKeyEvent(C,t);var S=C<this._min||C>this._max;if(!S){var T=Vt(C,this._min,this.max);this.value=T,this.fire("change",T,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(e,o){var t=this._useDecimal?.1:1;return o===fe.ARROW_UP?e+=t:o===fe.ARROW_DOWN&&(e-=t),e}},{key:"_changeInput",value:function(e){var o=this;clearTimeout(this._userInputTimer);var t=e.keyCode;if(t<fe.DIGIT_0||t>fe.DIGIT_9){e.preventDefault();return}this._userInputTimer=i()(function(){o._inputSetValue(e.target.value)},350)}},{key:"_inputSetValue",value:function(e){var o=this._useDecimal?Number(e):qt(e);o=Vt(o,this._min,this.max),this.value=o,this.fire("change",o,!0)}},{key:"_changeValueWithInput",value:function(e,o){var t,l=o.keyCode,C=o.target;if(!(g()(t=[fe.ARROW_UP,fe.ARROW_DOWN]).call(t,l)>=0)){var S=this._filterForInputText(C.value),T=!S||isNaN(S);C.value=S,T||this._inputSetValue(S)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(e){var o=e.screenX,t=o-this.firstPosition,l=this.firstLeft+t;l=l>this.rangeWidth?this.rangeWidth:l,l=l<0?0:l,this.pointer.style.left="".concat(l,"px"),this.subbar.style.right="".concat(this.rangeWidth-l,"px");var C=l/this.rangeWidth,S=this._absMax*C+this._min,T=this._useDecimal?S:qt(S),x=this.value!==T;x&&(this.value=T,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(e){if(e.stopPropagation(),e.target.className==="tui-image-editor-range"){var o=e.offsetX,t=o/this.rangeWidth,l=this._absMax*t+this._min;this.pointer.style.left="".concat(t*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-t)*this.rangeWidth,"px"),this.value=l,this.fire("change",l,!0)}}},{key:"_startChangingSlide",value:function(e){this.firstPosition=e.screenX,this.firstLeft=qt(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(e){return e.replace(ta,"$1$2$3")}}]),b}();ht().mixin(fn);var we=fn,dn=function(){function b(f,e){var o=e.locale,t=e.name,l=e.makeSvgIcon,C=e.menuBarPosition,S=e.templateHtml,T=e.usageStatistics;X(this,b),this.subMenuElement=f,this.menuBarPosition=C,this.toggleDirection=C==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=T,this.eventHandler={},this._makeSubMenuElement({locale:o,name:t,makeSvgIcon:l,templateHtml:S})}return rt(b,[{key:"selector",value:function(e){return this.subMenuElement.querySelector(e)}},{key:"colorPickerChangeShow",value:function(e){var o;Ft()(o=this.colorPickerControls).call(o,function(t){e!==t&&t.hide()})}},{key:"getButtonType",value:function(e,o){return e.className.match(RegExp("(".concat(o.join("|"),")")))[0]}},{key:"changeClass",value:function(e,o,t){e.classList.remove(o),e.classList.add(t)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(e){var o=e.locale,t=e.name,l=e.iconStyle,C=e.makeSvgIcon,S=e.templateHtml,T=document.createElement("div");T.className="tui-image-editor-menu-".concat(t),T.innerHTML=S({locale:o,iconStyle:l,makeSvgIcon:C}),this.subMenuElement.appendChild(T)}},{key:"_onStartEditingInputBox",value:function(){this.fire(yt.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(yt.INPUT_BOX_EDITING_STOPPED)}}]),b}();ht().mixin(dn);var Re=dn,ea=function(b){var f,e,o,t,l,C,S,T,x=b.locale,w=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(w(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(T,x.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(S,w(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(C,x.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(l,w(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(t,x.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(o,x.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(e,x.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(f,x.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function ia(b){var f=na();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function na(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ra={stroke:"#ffbb3b",fill:"",strokeWidth:3},aa=function(b){le(e,b);var f=ia(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"shape",makeSvgIcon:S,menuBarPosition:T,templateHtml:ea,usageStatistics:x}),l.type=null,l.options=ra,l._els={shapeSelectButton:l.selector(".tie-shape-button"),shapeColorButton:l.selector(".tie-shape-color-button"),strokeRange:new we({slider:l.selector(".tie-stroke-range"),input:l.selector(".tie-stroke-range-value")},Ze),fillColorpicker:new He(l.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:l.toggleDirection,usageStatistics:l.usageStatistics}),strokeColorpicker:new He(l.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:l.toggleDirection,usageStatistics:l.usageStatistics})},l.colorPickerControls.push(l._els.fillColorpicker),l.colorPickerControls.push(l._els.strokeColorpicker),l.colorPickerInputBoxes=[],l.colorPickerInputBoxes.push(l._els.fillColorpicker.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX)),l.colorPickerInputBoxes.push(l._els.strokeColorpicker.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX)),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T,x,w,P=this;this.eventHandler.shapeTypeSelected=Q()(l=this._changeShapeHandler).call(l,this),this.actions=t,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",Q()(C=this._changeStrokeRangeHandler).call(C,this)),this._els.fillColorpicker.on("change",Q()(S=this._changeFillColorHandler).call(S,this)),this._els.strokeColorpicker.on("change",Q()(T=this._changeStrokeColorHandler).call(T,this)),this._els.fillColorpicker.on("changeShow",Q()(x=this.colorPickerChangeShow).call(x,this)),this._els.strokeColorpicker.on("changeShow",Q()(w=this.colorPickerChangeShow).call(w,this)),Ke()(this.colorPickerInputBoxes,function($){var q,st;$.addEventListener(yt.FOCUS,Q()(q=P._onStartEditingInputBox).call(q,P)),$.addEventListener(yt.BLUR,Q()(st=P._onStopEditingInputBox).call(st,P))},this)}},{key:"_removeEvent",value:function(){var t=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),Ke()(this.colorPickerInputBoxes,function(l){var C,S;l.removeEventListener(yt.FOCUS,Q()(C=t._onStartEditingInputBox).call(C,t)),l.removeEventListener(yt.BLUR,Q()(S=t._onStopEditingInputBox).call(S,t))},this)}},{key:"setShapeStatus",value:function(t){var l=t.strokeWidth,C=t.strokeColor,S=t.fillColor;this._els.strokeRange.value=l,this._els.strokeColorpicker.color=C,this._els.fillColorpicker.color=S,this.options.stroke=C,this.options.fill=S,this.options.strokeWidth=l,this.actions.setDrawingShape(this.type,{strokeWidth:l})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(t){var l=t;l<=0&&(l=Ze.max),this._els.strokeRange.max=l}},{key:"setStrokeValue",value:function(t){this._els.strokeRange.value=t,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(t){var l=t.target.closest(".tui-image-editor-button");if(l){this.actions.stopDrawingMode(),this.actions.discardSelection();var C=this.getButtonType(l,["circle","triangle","rect"]);if(this.type===C){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=C,t.currentTarget.classList.add(C),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(t,l){this.options.strokeWidth=qt(t),this.actions.changeShape({strokeWidth:t},!l),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(t){t=t||"transparent",this.options.fill=t,this.actions.changeShape({fill:t})}},{key:"_changeStrokeColorHandler",value:function(t){t=t||"transparent",this.options.stroke=t,this.actions.changeShape({stroke:t})}}]),e}(Re),oa=aa,sa=function(b){var f,e,o,t,l,C,S,T,x,w,P,$,q,st,nt,ct,Mt,Gt=b.locale,Zt=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w=j()(P=j()($=j()(q=j()(st=j()(nt=j()(ct=j()(Mt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(Zt(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Mt,Gt.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(ct,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(nt,Gt.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(st,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(q,Gt.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call($,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(P,Gt.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(w,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(x,Gt.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(T,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(S,Gt.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(C,Zt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(l,Gt.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(t,Zt(["normal","active"],"apply"),`
                <label>
                    `)).call(o,Gt.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(e,Zt(["normal","active"],"cancel"),`
                <label>
                    `)).call(f,Gt.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function la(b){var f=ca();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function ca(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ua=function(b){le(e,b);var f=la(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"crop",makeSvgIcon:S,menuBarPosition:T,templateHtml:sa,usageStatistics:x}),l.status="active",l._els={apply:l.selector(".tie-crop-button .apply"),cancel:l.selector(".tie-crop-button .cancel"),preset:l.selector(".tie-crop-preset-button")},l.defaultPresetButton=l._els.preset.querySelector(".preset-none"),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T=Q()(l=this._applyEventHandler).call(l,this),x=Q()(C=this._cancelEventHandler).call(C,this),w=Q()(S=this._cropzonePresetEventHandler).call(S,this);this.eventHandler={apply:T,cancel:x,cropzonePreset:w},this.actions=t,this._els.apply.addEventListener("click",T),this._els.cancel.addEventListener("click",x),this._els.preset.addEventListener("click",w)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(t){var l=t.target.closest(".tui-image-editor-button.preset");if(l){var C=l.className.match(/preset-[^\s]+/),S=it(C,1),T=S[0];this._setPresetButtonActive(l),this.actions.preset(T)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;U()(this._els.preset.querySelectorAll(".preset"),function(l){l.classList.remove("active")}),t&&t.classList.add("active")}}]),e}(Re),ha=ua,fa=function(b){var f,e,o,t,l,C,S=b.locale,T=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(S.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(C,S.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(l,S.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(t,T(["normal","active"],"apply"),`
                <label>
                    `)).call(o,S.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(e,T(["normal","active"],"cancel"),`
                <label>
                    `)).call(f,S.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function da(b){var f=ga();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function ga(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var va=function(b){le(e,b);var f=da(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"resize",makeSvgIcon:S,menuBarPosition:T,templateHtml:fa,usageStatistics:x}),l.status="active",l._lockState=!1,l._originalDimensions=null,l._els={widthRange:new we({slider:l.selector(".tie-width-range"),input:l.selector(".tie-width-range-value")},ze),heightRange:new we({slider:l.selector(".tie-height-range"),input:l.selector(".tie-height-range-value")},ze),lockAspectRatio:l.selector(".tie-lock-aspect-ratio"),apply:l.selector(".tie-resize-button .apply"),cancel:l.selector(".tie-resize-button .cancel")},l}return rt(e,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var t=this.actions.getCurrentDimensions();this._originalDimensions=t,this.setWidthValue(t.width),this.setHeightValue(t.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(t){this._els.widthRange.min=this.calcMinValue(t.minWidth),this._els.heightRange.min=this.calcMinValue(t.minHeight),this._els.widthRange.max=this.calcMaxValue(t.maxWidth),this._els.heightRange.max=this.calcMaxValue(t.maxHeight)}},{key:"calcMaxValue",value:function(t){return t<=0&&(t=ze.max),t}},{key:"calcMinValue",value:function(t){return t<=0&&(t=ze.min),t}},{key:"setWidthValue",value:function(t){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=t,l&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(t){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=t,l&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T,x;this._els.widthRange.on("change",Q()(l=this._changeWidthRangeHandler).call(l,this)),this._els.heightRange.on("change",Q()(C=this._changeHeightRangeHandler).call(C,this)),this._els.lockAspectRatio.addEventListener("change",Q()(S=this._changeLockAspectRatio).call(S,this));var w=Q()(T=this._applyEventHandler).call(T,this),P=Q()(x=this._cancelEventHandler).call(x,this);this.eventHandler={apply:w,cancel:P},this.actions=t,this._els.apply.addEventListener("click",w),this._els.cancel.addEventListener("click",P)}},{key:"_changeWidthRangeHandler",value:function(t){this.actions.preview("width",qt(t),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(t){this.actions.preview("height",qt(t),this._lockState)}},{key:"_changeLockAspectRatio",value:function(t){this._lockState=t.target.checked,this.actions.lockAspectRatio(this._lockState,ze.min,ze.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),e}(Re),ma=va,pa=function(b){var f,e,o,t,l,C=b.locale,S=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(S(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(l,C.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(t,S(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(o,C.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(e,S(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(f,C.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ya(b){var f=Ca();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Ca(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ia=function(b){le(e,b);var f=ya(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"flip",makeSvgIcon:S,menuBarPosition:T,templateHtml:pa,usageStatistics:x}),l.flipStatus=!1,l._els={flipButton:l.selector(".tie-flip-button")},l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),xe(this)}},{key:"addEvent",value:function(t){var l;this.eventHandler.changeFlip=Q()(l=this._changeFlip).call(l,this),this._actions=t,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(t){var l=this,C=t.target.closest(".tui-image-editor-button");if(C){var S=this.getButtonType(C,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&S==="resetFlip")return;this._actions.flip(S).then(function(T){var x=l._els.flipButton.classList;l.flipStatus=!1,x.remove("resetFlip"),U()(["flipX","flipY"],function(w){x.remove(w),T[w]&&(x.add(w),x.add("resetFlip"),l.flipStatus=!0)})})}}}]),e}(Re),Sa=Ia,ba=function(b){var f,e,o=b.locale,t=b.makeSvgIcon;return j()(f=j()(e=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(t(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(e,t(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(f,o.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function _a(b){var f=xa();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function xa(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ma=30,Ta=-30,Ea=function(b){le(e,b);var f=_a(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"rotate",makeSvgIcon:S,menuBarPosition:T,templateHtml:ba,usageStatistics:x}),l._value=0,l._els={rotateButton:l.selector(".tie-rotate-button"),rotateRange:new we({slider:l.selector(".tie-rotate-range"),input:l.selector(".tie-rotate-range-value")},ai)},l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),xe(this)}},{key:"setRangeBarAngle",value:function(t,l){var C=l;t==="rotate"&&(C=ft()(this._els.rotateRange.value,10)+l),this._setRangeBarRatio(C)}},{key:"_setRangeBarRatio",value:function(t){this._els.rotateRange.value=t}},{key:"addEvent",value:function(t){var l,C;this.eventHandler.rotationAngleChanged=Q()(l=this._changeRotateForButton).call(l,this),this.actions=t,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",Q()(C=this._changeRotateForRange).call(C,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(t,l){var C=qt(t);this.actions.setAngle(C,!l),this._value=C}},{key:"_changeRotateForButton",value:function(t){var l=t.target.closest(".tui-image-editor-button"),C=this._els.rotateRange.value;if(l){var S=this.getButtonType(l,["counterclockwise","clockwise"]),T={clockwise:Ma,counterclockwise:Ta}[S],x=ft()(C,10)+T,w=x>=-360&&x<=360;w&&this.actions.rotate(T)}}}]),e}(Re),Da=Ea,wa=function(b){var f,e,o,t,l,C,S,T,x,w,P,$,q,st=b.locale,nt=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w=j()(P=j()($=j()(q=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(nt(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(q,st.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call($,nt(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(P,st.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(w,nt(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(x,st.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(T,nt(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(S,st.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(C,nt(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(l,st.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(t,nt(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(o,st.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(e,st.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(f,st.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Aa(b){var f=Oa();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Oa(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ka=function(b){le(e,b);var f=Aa(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"text",makeSvgIcon:S,menuBarPosition:T,templateHtml:wa,usageStatistics:x}),l.effect={bold:!1,italic:!1,underline:!1},l.align="tie-text-align-left",l._els={textEffectButton:l.selector(".tie-text-effect-button"),textAlignButton:l.selector(".tie-text-align-button"),textColorpicker:new He(l.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:l.toggleDirection,usageStatistics:l.usageStatistics}),textRange:new we({slider:l.selector(".tie-text-range"),input:l.selector(".tie-text-range-value")},si)},l.colorPickerInputBox=l._els.textColorpicker.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T,x,w,P=Q()(l=this._setTextEffectHandler).call(l,this),$=Q()(C=this._setTextAlignHandler).call(C,this);this.eventHandler={setTextEffect:P,setTextAlign:$},this.actions=t,this._els.textEffectButton.addEventListener("click",P),this._els.textAlignButton.addEventListener("click",$),this._els.textRange.on("change",Q()(S=this._changeTextRnageHandler).call(S,this)),this._els.textColorpicker.on("change",Q()(T=this._changeColorHandler).call(T,this)),this.colorPickerInputBox.addEventListener(yt.FOCUS,Q()(x=this._onStartEditingInputBox).call(x,this)),this.colorPickerInputBox.addEventListener(yt.BLUR,Q()(w=this._onStopEditingInputBox).call(w,this))}},{key:"_removeEvent",value:function(){var t,l,C=this.eventHandler,S=C.setTextEffect,T=C.setTextAlign;this._els.textEffectButton.removeEventListener("click",S),this._els.textAlignButton.removeEventListener("click",T),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(yt.FOCUS,Q()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(yt.BLUR,Q()(l=this._onStopEditingInputBox).call(l,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(t){this._els.textColorpicker.color=t}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(t){this._els.textRange.value=t}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=dt()(t),C=t.fontSize,S=t.fontStyle,T=t.fontWeight,x=t.textDecoration,w=t.textAlign;this.textColor=l,this.fontSize=C,this.setEffectState("italic",S),this.setEffectState("bold",T),this.setEffectState("underline",x),this.setAlignState("tie-text-align-".concat(w))}},{key:"setEffectState",value:function(t,l){var C=l==="italic"||l==="bold"||l==="underline",S=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(t));this.effect[t]=C,S.classList[C?"add":"remove"]("active")}},{key:"setAlignState",value:function(t){var l=this._els.textAlignButton;l.classList.remove(this.align),l.classList.add(t),this.align=t}},{key:"_setTextEffectHandler",value:function(t){var l=t.target.closest(".tui-image-editor-button");if(l){var C=l.className.match(/(bold|italic|underline)/),S=it(C,1),T=S[0],x={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[T];this.effect[T]=!this.effect[T],l.classList.toggle("active"),this.actions.changeTextStyle(x)}}},{key:"_setTextAlignHandler",value:function(t){var l=t.target.closest(".tui-image-editor-button");if(l){var C=this.getButtonType(l,["left","center","right"]),S="tie-text-align-".concat(C);t.currentTarget.classList.remove(this.align),this.align!==S&&t.currentTarget.classList.add(S),this.actions.changeTextStyle({textAlign:C}),this.align=S}}},{key:"_changeTextRnageHandler",value:function(t,l){this.actions.changeTextStyle({fontSize:t},!l)}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeTextStyle({fill:t})}}]),e}(Re),Pa=ka,La=function(b){var f,e,o,t=b.locale,l=b.makeSvgIcon;return j()(f=j()(e=j()(o=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(l(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(o,t.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(e,l(["normal","active"],"apply"),`
                <label>
                    `)).call(f,t.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ja(b){var f=Na();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Na(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ra=function(b){le(e,b);var f=ja(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"mask",makeSvgIcon:S,menuBarPosition:T,templateHtml:La,usageStatistics:x}),l._els={applyButton:l.selector(".tie-mask-apply"),maskImageButton:l.selector(".tie-mask-image-file")},l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S=Q()(l=this._loadMaskFile).call(l,this),T=Q()(C=this._applyMask).call(C,this);this.eventHandler={loadMaskFile:S,applyMask:T},this.actions=t,this._els.maskImageButton.addEventListener("change",S),this._els.applyButton.addEventListener("click",T)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(t){var l;Se()||alert("This browser does not support file-api");var C=it(t.target.files,1),S=C[0];S&&(l=J().createObjectURL(S),this.actions.loadImageFromURL(l,S),this._els.applyButton.classList.add("active"))}}]),e}(Re),za=Ra,Fa=function(b){var f,e,o,t,l,C,S,T,x,w,P,$,q,st,nt,ct,Mt,Gt,Zt,Jt,Pt=b.locale,ne=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w=j()(P=j()($=j()(q=j()(st=j()(nt=j()(ct=j()(Mt=j()(Gt=j()(Zt=j()(Jt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(ne(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(Jt,Pt.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(Zt,ne(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Gt,Pt.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Mt,ne(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(ct,Pt.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(nt,ne(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(st,Pt.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(q,ne(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call($,Pt.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(P,ne(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(w,Pt.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(x,ne(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(T,Pt.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(S,ne(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(C,Pt.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(l,ne(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(t,Pt.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(o,ne(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(e,Pt.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(f,Pt.localize("Color"),`"></div>
        </li>
    </ul>
`)};function Ba(b){var f=Ha();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Ha(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ya=function(b){le(e,b);var f=Ba(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"icon",makeSvgIcon:S,menuBarPosition:T,templateHtml:Fa,usageStatistics:x}),l.iconType=null,l._iconMap={},l._els={registerIconButton:l.selector(".tie-icon-image-file"),addIconButton:l.selector(".tie-icon-add-button"),iconColorpicker:new He(l.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:l.toggleDirection,usageStatistics:l.usageStatistics})},l.colorPickerInputBox=l._els.iconColorpicker.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T,x,w=Q()(l=this._registerIconHandler).call(l,this),P=Q()(C=this._addIconHandler).call(C,this);this.eventHandler={registerIcon:w,addIcon:P},this.actions=t,this._els.iconColorpicker.on("change",Q()(S=this._changeColorHandler).call(S,this)),this._els.registerIconButton.addEventListener("change",w),this._els.addIconButton.addEventListener("click",P),this.colorPickerInputBox.addEventListener(yt.FOCUS,Q()(T=this._onStartEditingInputBox).call(T,this)),this.colorPickerInputBox.addEventListener(yt.BLUR,Q()(x=this._onStopEditingInputBox).call(x,this))}},{key:"_removeEvent",value:function(){var t,l;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(yt.FOCUS,Q()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(yt.BLUR,Q()(l=this._onStopEditingInputBox).call(l,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var t=this;U()(ri,function(l,C){t.actions.registerDefaultIcons(C,l)})}},{key:"setIconPickerColor",value:function(t){this._els.iconColorpicker.color=t}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeColor(t)}},{key:"_addIconHandler",value:function(t){var l=t.target.closest(".tui-image-editor-button");if(l){var C=l.getAttribute("data-icontype"),S=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(C),this.iconType===C?this.changeStandbyMode():(this.actions.addIcon(C,S),this.iconType=C)}}},{key:"_registerIconHandler",value:function(t){var l;Se||alert("This browser does not support file-api");var C=it(t.target.files,1),S=C[0];S&&(l=J().createObjectURL(S),this.actions.registerCustomIcon(l,S))}}]),e}(Re),Ua=Ya,Wa=function(b){var f,e,o,t,l,C=b.locale,S=b.makeSvgIcon;return j()(f=j()(e=j()(o=j()(t=j()(l=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(S(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(l,C.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(t,S(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(o,C.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(e,C.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(f,C.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Ga(b){var f=Xa();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Xa(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Za=.7,Va=function(b){le(e,b);var f=Ga(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon,T=t.menuBarPosition,x=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"draw",makeSvgIcon:S,menuBarPosition:T,templateHtml:Wa,usageStatistics:x}),l._els={lineSelectButton:l.selector(".tie-draw-line-select-button"),drawColorPicker:new He(l.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:l.toggleDirection,usageStatistics:l.usageStatistics}),drawRange:new we({slider:l.selector(".tie-draw-range"),input:l.selector(".tie-draw-range-value")},oi)},l.type=null,l.color=l._els.drawColorPicker.color,l.width=l._els.drawRange.value,l.colorPickerInputBox=l._els.drawColorPicker.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),xe(this)}},{key:"addEvent",value:function(t){var l,C,S,T,x;this.eventHandler.changeDrawType=Q()(l=this._changeDrawType).call(l,this),this.actions=t,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",Q()(C=this._changeDrawColor).call(C,this)),this._els.drawRange.on("change",Q()(S=this._changeDrawRange).call(S,this)),this.colorPickerInputBox.addEventListener(yt.FOCUS,Q()(T=this._onStartEditingInputBox).call(T,this)),this.colorPickerInputBox.addEventListener(yt.BLUR,Q()(x=this._onStopEditingInputBox).call(x,this))}},{key:"_removeEvent",value:function(){var t,l;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(yt.FOCUS,Q()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(yt.BLUR,Q()(l=this._onStopEditingInputBox).call(l,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:At(this.color,Za)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(t){var l=t.target.closest(".tui-image-editor-button");if(l){var C=this.getButtonType(l,["free","line"]);if(this.actions.discardSelection(),this.type===C){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=C,this._els.lineSelectButton.classList.add(C),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(t){this.color=t||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(t){this.width=t,this.type?this.setDrawMode():this.changeStartMode()}}]),e}(Re),Ja=Va,Qa=Lt(9886),gn=Lt.n(Qa),Ka=function(b){var f,e,o,t,l,C,S,T,x,w,P,$,q,st,nt,ct,Mt=b.locale;return j()(f=j()(e=j()(o=j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w=j()(P=j()($=j()(q=j()(st=j()(nt=j()(ct=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Mt.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(ct,Mt.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(nt,Mt.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(st,Mt.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(q,Mt.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call($,Mt.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(P,Mt.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(w,Mt.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(x,Mt.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(T,Mt.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(S,Mt.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(C,Mt.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(l,Mt.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(t,Mt.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(o,Mt.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(e,Mt.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(f,Mt.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function $a(b){var f=qa();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function qa(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var vn="130px",to=["add","diff","subtract","multiply","screen","lighten","darken"],mn=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],eo={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},pn=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],yn=["filterBlendColor","filterMultiplyColor","filterTintColor"],io=function(b){le(e,b);var f=$a(e);function e(o,t){var l,C=t.locale,S=t.menuBarPosition,T=t.usageStatistics;return X(this,e),l=f.call(this,o,{locale:C,name:"filter",menuBarPosition:S,templateHtml:Ka,usageStatistics:T}),l.selectBoxShow=!1,l.checkedMap={},l._makeControlElement(),l}return rt(e,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),xe(this)}},{key:"_removeEvent",value:function(){var t=this,l;U()(mn,function(C){var S=t.selector(".tie-".concat(C)),T=me(C);S.removeEventListener("change",t.eventHandler[T])}),U()(j()(l=[]).call(l,pn,yn),function(C){t._els[C].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),Ke()(this.colorPickerInputBoxes,function(C){var S,T;C.removeEventListener(yt.FOCUS,Q()(S=t._onStartEditingInputBox).call(S,t)),C.removeEventListener(yt.BLUR,Q()(T=t._onStopEditingInputBox).call(T,t))},this)}},{key:"_destroyToolInstance",value:function(){var t,l=this;U()(j()(t=[]).call(t,pn,yn),function(C){l._els[C].destroy()})}},{key:"addEvent",value:function(t){var l=this,C,S,T,x=t.applyFilter,w=function(q){var st;return Q()(st=l._changeFilterState).call(st,l,x,q)},P=function(q){return function(st,nt){return l._changeFilterState(x,q,nt)}};this.eventHandler={changeBlendFilter:w("blend"),blandTypeClick:function(q){return q.stopPropagation()}},U()(mn,function($){var q=l.selector(".tie-".concat($)),st=me($);l.checkedMap[st]=q,l.eventHandler[st]=w(st),q.addEventListener("change",l.eventHandler[st])}),this._els.removewhiteDistanceRange.on("change",P("removeWhite")),this._els.colorfilterThresholdRange.on("change",P("colorFilter")),this._els.pixelateRange.on("change",P("pixelate")),this._els.noiseRange.on("change",P("noise")),this._els.brightnessRange.on("change",P("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",w("multiply")),this._els.filterTintColor.on("change",w("tint")),this._els.tintOpacity.on("change",P("tint")),this._els.filterMultiplyColor.on("changeShow",Q()(C=this.colorPickerChangeShow).call(C,this)),this._els.filterTintColor.on("changeShow",Q()(S=this.colorPickerChangeShow).call(S,this)),this._els.filterBlendColor.on("changeShow",Q()(T=this.colorPickerChangeShow).call(T,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),Ke()(this.colorPickerInputBoxes,function($){var q,st;$.addEventListener(yt.FOCUS,Q()(q=l._onStartEditingInputBox).call(q,l)),$.addEventListener(yt.BLUR,Q()(st=l._onStopEditingInputBox).call(st,l))},this)}},{key:"setFilterState",value:function(t){var l=t.type,C=t.options,S=t.action,T=this._getFilterNameFromOptions(l,C),x=S==="remove";x||this._setFilterState(T,C),this.checkedMap[T].checked=!x}},{key:"initFilterCheckBoxState",value:function(){U()(this.checkedMap,function(t){t.checked=!1},this)}},{key:"_setFilterState",value:function(t,l){t==="colorFilter"?this._els.colorfilterThresholdRange.value=l.distance:t==="removeWhite"?this._els.removewhiteDistanceRange.value=l.distance:t==="pixelate"?this._els.pixelateRange.value=l.blocksize:t==="brightness"?this._els.brightnessRange.value=l.brightness:t==="noise"?this._els.noiseRange.value=l.noise:t==="tint"?(this._els.tintOpacity.value=l.alpha,this._els.filterTintColor.color=l.color):t==="blend"?this._els.filterBlendColor.color=l.color:t==="multiply"&&(this._els.filterMultiplyColor.color=l.color)}},{key:"_getFilterNameFromOptions",value:function(t,l){var C=t;return t==="removeColor"?C=gn()(l.useAlpha)?"removeWhite":"colorFilter":t==="blendColor"&&(C={add:"blend",multiply:"multiply",tint:"tint"}[l.mode]),C}},{key:"_changeFilterState",value:function(t,l){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,S=this.checkedMap[l].checked,T=eo[l],x=this.checkedMap[l].closest(".tui-image-editor-checkbox-group");x&&(S?x.classList.remove("tui-image-editor-disabled"):x.classList.add("tui-image-editor-disabled")),t(S,T,this._getFilterOption(l),!C)}},{key:"_getFilterOption",value:function(t){var l={};switch(t){case"removeWhite":l.color="#FFFFFF",l.useAlpha=!1,l.distance=Be()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":l.color="#FFFFFF",l.distance=Be()(this._els.colorfilterThresholdRange.value);break;case"pixelate":l.blocksize=qt(this._els.pixelateRange.value);break;case"noise":l.noise=qt(this._els.noiseRange.value);break;case"brightness":l.brightness=Be()(this._els.brightnessRange.value);break;case"blend":l.mode="add",l.color=this._els.filterBlendColor.color,l.mode=this._els.blendType.value;break;case"multiply":l.mode="multiply",l.color=this._els.filterMultiplyColor.color;break;case"tint":l.mode="tint",l.color=this._els.filterTintColor.color,l.alpha=this._els.tintOpacity.value;break;case"blur":l.blur=this._els.blurRange.value;break}return l}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new we({slider:this.selector(".tie-removewhite-distance-range")},je.removewhiteDistanceRange),brightnessRange:new we({slider:this.selector(".tie-brightness-range")},je.brightnessRange),noiseRange:new we({slider:this.selector(".tie-noise-range")},je.noiseRange),pixelateRange:new we({slider:this.selector(".tie-pixelate-range")},je.pixelateRange),colorfilterThresholdRange:new we({slider:this.selector(".tie-colorfilter-threshold-range")},je.colorfilterThresholdRange),filterTintColor:new He(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new He(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new He(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:je.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(ue.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(t){var l=document.createElement("div"),C=document.createElement("label"),S=document.createElement("div");return S.id="tie-filter-tint-opacity",C.innerHTML="Opacity",l.appendChild(C),l.appendChild(S),t.appendChild(l),t.style.height=vn,new we({slider:S},je.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(t){var l=document.createElement("div"),C=document.createElement("select"),S=document.createElement("ul");return l.className="tui-image-editor-selectlist-wrap",S.className="tui-image-editor-selectlist",l.appendChild(C),l.appendChild(S),this._makeSelectOptionList(C),t.appendChild(l),t.style.height=vn,this._drawSelectOptionList(C,S),this._pickerWithSelectboxForAddEvent(C,S),C}},{key:"_drawSelectOptionList",value:function(t,l){var C=t.querySelectorAll("option");U()(C,function(S){var T=document.createElement("li");T.innerHTML=S.innerHTML,T.setAttribute("data-item",S.value),l.appendChild(T)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(t,l){var C=this;l.addEventListener("click",function(S){var T=S.target.getAttribute("data-item"),x=document.createEvent("HTMLEvents");t.querySelector('[value="'.concat(T,'"]')).selected=!0,x.initEvent("change",!0,!0),t.dispatchEvent(x),C.selectBoxShow=!1,l.style.display="none"}),t.addEventListener("mousedown",function(S){S.preventDefault(),C.selectBoxShow=!C.selectBoxShow,l.style.display=C.selectBoxShow?"block":"none",l.setAttribute("data-selectitem",t.value),l.querySelector("[data-item='".concat(t.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(t){U()(to,function(l){var C=document.createElement("option");C.setAttribute("value",l),C.innerHTML=l.replace(/^[a-z]/,function(S){return S.toUpperCase()}),t.appendChild(C)})}}]),e}(Re),no=io,ro=Lt(4383),ao=Lt.n(ro),oo=function(){function b(f,e){var o=e.name;X(this,b),this.name=o,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),f.appendChild(this.panelElement)}return rt(b,[{key:"_makePanelElement",value:function(){var e=document.createElement("div");return e.className="tie-panel-".concat(this.name),e}},{key:"_makeListElement",value:function(){var e=document.createElement("ol");return e.className="".concat(this.name,"-list"),e}},{key:"makeListItemElement",value:function(e){var o=document.createElement("li");return o.innerHTML=e,o.className="".concat(this.name,"-item"),o.setAttribute("data-index",this.items.length),o}},{key:"pushListItemElement",value:function(e){this.listElement.appendChild(e),this.listElement.scrollTop+=e.offsetHeight,this.items.push(e)}},{key:"deleteListItemElement",value:function(e,o){for(var t=this.items,l=e;l<o;l+=1)this.listElement.removeChild(t[l]);k()(t).call(t,e,o-e+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(e,o){this.items[e]&&this.items[e].classList.add(o)}},{key:"removeClass",value:function(e,o){this.items[e]&&this.items[e].classList.remove(o)}},{key:"toggleClass",value:function(e,o){this.items[e]&&this.items[e].classList.toggle(o)}}]),b}(),so=oo,lo=function(b){var f,e,o,t=b.locale,l=b.makeSvgIcon,C=b.name,S=b.detail;return j()(f=j()(e=j()(o=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(l(["normal","active"],"history-".concat(C.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(o,t.localize(C),`
            `)).call(e,S?"(".concat(t.localize(S),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(f,l(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function co(b){var f=uo();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function uo(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ho="history-item",Cn="selected-item",In="disabled-item",fo=function(b){le(e,b);var f=co(e);function e(o,t){var l,C=t.locale,S=t.makeSvgIcon;return X(this,e),l=f.call(this,o,{name:"history"}),o.classList.add("enabled"),l.locale=C,l.makeSvgIcon=S,l._eventHandler={},l._historyIndex=l.getListLength(),l}return rt(e,[{key:"add",value:function(t){var l=t.name,C=t.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var S=lo({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:l,detail:C}),T=this.makeListItemElement(S);this.pushListItemElement(T),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var t=this;this._eventHandler.history=function(l){return t._clickHistoryItem(l)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(t){var l=t.target,C=l.closest(".".concat(ho));if(!!C){var S=ao()(C.getAttribute("data-index"),10);if(S!==this._historyIndex){var T=Math.abs(S-this._historyIndex);S<this._historyIndex?this._actions.undo(T):this._actions.redo(T)}}}},{key:"_selectItem",value:function(t){for(var l=0;l<this.getListLength();l+=1)this.removeClass(l,Cn),this.removeClass(l,In),l>t&&this.addClass(l,In);this.addClass(t,Cn)}},{key:"destroy",value:function(){this.removeEvent(),xe(this)}},{key:"addEvent",value:function(t){this._actions=t,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),e}(so),go=fo,vo=function(){function b(f){X(this,b),this._locale=f}return rt(b,[{key:"localize",value:function(e){return this._locale[e]||e}}]),b}(),mo=vo,po={Shape:oa,Crop:ha,Resize:ma,Flip:Sa,Rotate:Da,Text:Pa,Mask:za,Icon:Ua,Draw:Ja,Filter:no},yo="1300",Sn="history",Co="tie-panel-history",$e="on",qe={ZOOM_IN:"zoomIn",HAND:"hand"},bn=function(){function b(f,e,o){X(this,b),this.options=this._initializeOption(e),this._actions=o,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new mo(this.options.locale),this.theme=new Xr(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(f),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return rt(b,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",xe(this)}},{key:"setUiDefaultSelectionStyle",value:function(e){return H()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},e)}},{key:"resizeEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.uiSize,t=e.imageSize,l=t===void 0?this.imageSize:t;l!==this.imageSize&&(this.imageSize=l),o&&this._setUiSize(o);var C=this._getCanvasMaxDimension(),S=C.width,T=C.height,x=this._editorElement.style,w=this.options.menuBarPosition;x.height="".concat(T,"px"),x.width="".concat(S,"px"),this._setEditorPosition(w),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var P=this._selectedElement.classList;w==="top"&&this._selectedElement.offsetWidth<yo?P.add("tui-image-editor-top-optimization"):P.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(e){var o=this._buttonElements[e].classList;o.toggle($e),e===qe.ZOOM_IN?this._buttonElements[qe.HAND].classList.remove($e):this._buttonElements[qe.ZOOM_IN].classList.remove($e)}},{key:"offZoomInButtonStatus",value:function(){var e=this._buttonElements[qe.ZOOM_IN].classList;e.remove($e)}},{key:"changeHandButtonStatus",value:function(e){var o=this._buttonElements[qe.HAND].classList;o[e?"add":"remove"]($e)}},{key:"changeHelpButtonEnabled",value:function(e,o){var t=this._buttonElements[e].classList;t[o?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(e){return H()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},e)}},{key:"_setUiSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,o=this._selectedElement.style;o.width=e.width,o.height=e.height}},{key:"_makeSubMenu",value:function(){var e=this;U()(this.options.menu,function(o){var t,l=po[o.replace(/^[a-z]/,function(C){return C.toUpperCase()})];e._makeMenuElement(o),e._buttonElements[o]=e._menuBarElement.querySelector(".tie-btn-".concat(o)),e[o]=new l(e._subMenuElement,{locale:e._locale,makeSvgIcon:Q()(t=e.theme.makeMenSvgIconSet).call(t,e.theme),menuBarPosition:e.options.menuBarPosition,usageStatistics:e.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var e,o,t;this.on(yt.EXECUTE_COMMAND,Q()(e=this._addHistory).call(e,this)),this.on(yt.AFTER_UNDO,Q()(o=this._selectPrevHistory).call(o,this)),this.on(yt.AFTER_REDO,Q()(t=this._selectNextHistory).call(t,this))}},{key:"_attachZoomEvent",value:function(){var e=this;this.on(yt.HAND_STARTED,function(){e.offZoomInButtonStatus(),e.changeHandButtonStatus(!0)}),this.on(yt.HAND_STOPPED,function(){return e.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(e){var o,t;e.nodeType?t=e:t=document.querySelector(e);var l=Je(t);t.classList.add("tui-image-editor-container"),t.innerHTML=Br({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+Fr({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=t,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=l(".tui-image-editor-main"),this._editorElementWrap=l(".tui-image-editor-wrap"),this._editorElement=l(".tui-image-editor"),this._helpMenuBarElement=l(".tui-image-editor-help-menu"),this._menuBarElement=l(".tui-image-editor-menu"),this._subMenuElement=l(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new go(this._buttonElements[Sn],{locale:this._locale,makeSvgIcon:Q()(o=this.theme.makeMenSvgIconSet).call(o,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var e=this;U()(ae,function(o){e.changeHelpButtonEnabled(o,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var e;return j()(e=[]).call(e,D(ae),[""],D(ge),[""],D(Ce))}},{key:"_addHelpMenus",value:function(){var e=this,o=this._makeHelpMenuWithPartition();U()(o,function(t){t?(e._makeMenuElement(t,["normal","disabled","hover"],"help"),e._buttonElements[t]=e._helpMenuBarElement.querySelector(".tie-btn-".concat(t))):e._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var e=document.createElement("li"),o=document.createElement("div");e.className=hi("item"),o.className=hi("icpartition"),e.appendChild(o),this._helpMenuBarElement.appendChild(e)}},{key:"_makeMenuElement",value:function(e){var o,t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",S=document.createElement("li"),T=this.theme.makeMenSvgIconSet(l,e);this._addTooltipAttribute(S,e),S.className=j()(o=j()(t="tie-btn-".concat(e," ")).call(t,hi("item")," ")).call(o,C),S.innerHTML=T,C==="normal"?this._menuBarElement.appendChild(S):this._helpMenuBarElement.appendChild(S)}},{key:"_addHelpActionEvent",value:function(){var e=this;U()(bt,function(o){e.eventHandler[o]=function(t){return e._actions.main[o](t)},e._buttonElements[o].addEventListener("click",e.eventHandler[o])})}},{key:"_removeHelpActionEvent",value:function(){var e=this;U()(bt,function(o){e._buttonElements[o].removeEventListener("click",e.eventHandler[o])})}},{key:"_addHistory",value:function(e){if(!Er(e)){var o=typeof e=="string"?{name:e}:Dr(e);this._historyMenu.add(o)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(e){var o=e.target,t=o.closest(".".concat(Co));if(!t){var l=this._buttonElements[Sn].classList;l.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(e,o){e.setAttribute("tooltip-content",this._locale.localize(o.replace(/^[a-z]/g,function(t){return t.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var e=this;this.eventHandler.download=function(){return e._actions.main.download()},U()(this._buttonElements.download,function(o){o.addEventListener("click",e.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var e=this;U()(this._buttonElements.download,function(o){o.removeEventListener("click",e.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var e=this;this.eventHandler.loadImage=function(o){return e._actions.main.load(o.target.files[0])},U()(this._buttonElements.load,function(o){o.addEventListener("change",e.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var e=this;U()(this._buttonElements.load,function(o){o.removeEventListener("change",e.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(e){var o=this;this.eventHandler[e]=function(){return o.changeMenu(e)},this._buttonElements[e].addEventListener("click",this.eventHandler[e])}},{key:"_addSubMenuEvent",value:function(e){var o=this;this[e].addEvent(this._actions[e]),this[e].on(yt.INPUT_BOX_EDITING_STARTED,function(){return o.fire(yt.INPUT_BOX_EDITING_STARTED)}),this[e].on(yt.INPUT_BOX_EDITING_STOPPED,function(){return o.fire(yt.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var e=this;U()(this.options.menu,function(o){e._addMainMenuEvent(o),e._addSubMenuEvent(o)})}},{key:"_removeMainMenuEvent",value:function(){var e=this;U()(this.options.menu,function(o){e._buttonElements[o].removeEventListener("click",e.eventHandler[o]),e[o].off(yt.INPUT_BOX_EDITING_STARTED),e[o].off(yt.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var e=this;U()(this.options.menu,function(o){e[o].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var e=this,o=this._getLoadImage();o.path&&this._actions.main.initLoadImage(o.path,o.name).then(function(){e.activeMenuEvent()}),this._addLoadEvent();var t=document.createElement("div");t.className=hi("grid-visual");var l=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;t.innerHTML=l,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(t)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(e,o,t),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(e,o,t){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),t&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===e&&o?this.submenu=null:(this._buttonElements[e].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(e)),this.submenu=e,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(e)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var e=this._editorContainerElement.style,o=e.maxWidth,t=e.maxHeight,l=Be()(o),C=Be()(t);return{width:l,height:C}}},{key:"_setEditorPosition",value:function(e){var o=this._getCanvasMaxDimension(),t=o.width,l=o.height,C=this._editorElement.style,S=0,T=0;this.submenu&&(e==="bottom"?l>this._editorElementWrap.scrollHeight-150?S=(l-this._editorElementWrap.scrollHeight)/2:S=150/2*-1:e==="top"?l>this._editorElementWrap.offsetHeight-150?S=150/2-(l-(this._editorElementWrap.offsetHeight-150))/2:S=150/2:e==="left"?t>this._editorElementWrap.offsetWidth-248?T=248/2-(t-(this._editorElementWrap.offsetWidth-248))/2:T=248/2:e==="right"&&(t>this._editorElementWrap.scrollWidth-248?T=(t-this._editorElementWrap.scrollWidth)/2:T=248/2*-1)),C.top="".concat(S,"px"),C.left="".concat(T,"px")}}]),b}();ht().mixin(bn);var Io=bn,So=Lt(381),Xe=Lt.n(So),_n=function(){function b(){X(this,b),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return rt(b,[{key:"imageToSVG",value:function(e,o,t){var l=this;t=this.checkoptions(t),this.loadImage(e,function(C){o(l.imagedataToSVG(l.getImgdata(C),t))},t)}},{key:"imagedataToSVG",value:function(e,o){o=this.checkoptions(o);var t=this.imagedataToTracedata(e,o);return this.getsvgstring(t,o)}},{key:"imageToTracedata",value:function(e,o,t){var l=this;t=this.checkoptions(t),this.loadImage(e,function(C){o(l.imagedataToTracedata(l.getImgdata(C),t))},t)}},{key:"imagedataToTracedata",value:function(e,o){o=this.checkoptions(o);var t=this.colorquantization(e,o),l;if(o.layering===0){l={layers:[],palette:t.palette,width:t.array[0].length-2,height:t.array.length-2};for(var C=0;C<t.palette.length;C+=1){var S=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(t,C),o.pathomit),o),o.ltres,o.qtres);l.layers.push(S)}}else{var T=this.layering(t);o.layercontainerid&&this.drawLayers(T,this.specpalette,o.scale,o.layercontainerid);var x=this.batchpathscan(T,o.pathomit),w=this.batchinternodes(x,o);l={layers:this.batchtracelayers(w,o.ltres,o.qtres),palette:t.palette,width:e.width,height:e.height}}return l}},{key:"checkoptions",value:function(e){e=e||{},typeof e=="string"&&(e=e.toLowerCase(),this.optionpresets[e]?e=this.optionpresets[e]:e={});for(var o=mt()(this.optionpresets.default),t=0;t<o.length;t+=1)e.hasOwnProperty(o[t])||(e[o[t]]=this.optionpresets.default[o[t]]);return e}},{key:"colorquantization",value:function(e,o){var t=[],l=0,C,S,T,x=[],w=e.width*e.height,P,$,q,st,nt;for($=0;$<e.height+2;$+=1)for(t[$]=[],P=0;P<e.width+2;P+=1)t[$][P]=-1;for(o.pal?nt=o.pal:o.colorsampling===0?nt=this.generatepalette(o.numberofcolors):o.colorsampling===1?nt=this.samplepalette(o.numberofcolors,e):nt=this.samplepalette2(o.numberofcolors,e),o.blurradius>0&&(e=this.blur(e,o.blurradius,o.blurdelta)),st=0;st<o.colorquantcycles;st+=1){if(st>0)for(q=0;q<nt.length;q+=1)x[q].n>0&&(nt[q]={r:Math.floor(x[q].r/x[q].n),g:Math.floor(x[q].g/x[q].n),b:Math.floor(x[q].b/x[q].n),a:Math.floor(x[q].a/x[q].n)}),x[q].n/w<o.mincolorratio&&st<o.colorquantcycles-1&&(nt[q]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(P=0;P<nt.length;P+=1)x[P]={r:0,g:0,b:0,a:0,n:0};for($=0;$<e.height;$+=1)for(P=0;P<e.width;P+=1){for(l=($*e.width+P)*4,T=0,S=1024,q=0;q<nt.length;q+=1)C=Math.abs(nt[q].r-e.data[l])+Math.abs(nt[q].g-e.data[l+1])+Math.abs(nt[q].b-e.data[l+2])+Math.abs(nt[q].a-e.data[l+3]),C<S&&(S=C,T=q);x[T].r+=e.data[l],x[T].g+=e.data[l+1],x[T].b+=e.data[l+2],x[T].a+=e.data[l+3],x[T].n+=1,t[$+1][P+1]=T}}return{array:t,palette:nt}}},{key:"samplepalette",value:function(e,o){for(var t,l=[],C=0;C<e;C+=1)t=Math.floor(Math.random()*o.data.length/4)*4,l.push({r:o.data[t],g:o.data[t+1],b:o.data[t+2],a:o.data[t+3]});return l}},{key:"samplepalette2",value:function(e,o){for(var t,l=[],C=Math.ceil(Math.sqrt(e)),S=Math.ceil(e/C),T=o.width/(C+1),x=o.height/(S+1),w=0;w<S;w+=1)for(var P=0;P<C&&l.length!==e;P+=1)t=Math.floor((w+1)*x*o.width+(P+1)*T)*4,l.push({r:o.data[t],g:o.data[t+1],b:o.data[t+2],a:o.data[t+3]});return l}},{key:"generatepalette",value:function(e){var o=[],t,l,C;if(e<8)for(var S=Math.floor(255/(e-1)),T=0;T<e;T+=1)o.push({r:T*S,g:T*S,b:T*S,a:255});else{var x=Math.floor(Math.pow(e,.3333333333333333)),w=Math.floor(255/(x-1)),P=e-x*x*x;for(t=0;t<x;t+=1)for(l=0;l<x;l+=1)for(C=0;C<x;C+=1)o.push({r:t*w,g:l*w,b:C*w,a:255});for(t=0;t<P;t+=1)o.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return o}},{key:"layering",value:function(e){var o=[],t=0,l=e.array.length,C=e.array[0].length,S,T,x,w,P,$,q,st,nt,ct,Mt;for(Mt=0;Mt<e.palette.length;Mt+=1)for(o[Mt]=[],ct=0;ct<l;ct+=1)for(o[Mt][ct]=[],nt=0;nt<C;nt+=1)o[Mt][ct][nt]=0;for(ct=1;ct<l-1;ct+=1)for(nt=1;nt<C-1;nt+=1)t=e.array[ct][nt],S=e.array[ct-1][nt-1]===t?1:0,T=e.array[ct-1][nt]===t?1:0,x=e.array[ct-1][nt+1]===t?1:0,w=e.array[ct][nt-1]===t?1:0,P=e.array[ct][nt+1]===t?1:0,$=e.array[ct+1][nt-1]===t?1:0,q=e.array[ct+1][nt]===t?1:0,st=e.array[ct+1][nt+1]===t?1:0,o[t][ct+1][nt+1]=1+P*2+st*4+q*8,w||(o[t][ct+1][nt]=0+2+q*4+$*8),T||(o[t][ct][nt+1]=0+x*2+P*4+8),S||(o[t][ct][nt]=0+T*2+4+w*8);return o}},{key:"layeringstep",value:function(e,o){var t=[],l=e.array.length,C=e.array[0].length,S,T;for(T=0;T<l;T+=1)for(t[T]=[],S=0;S<C;S+=1)t[T][S]=0;for(T=1;T<l;T+=1)for(S=1;S<C;S+=1)t[T][S]=(e.array[T-1][S-1]===o?1:0)+(e.array[T-1][S]===o?2:0)+(e.array[T][S-1]===o?8:0)+(e.array[T][S]===o?4:0);return t}},{key:"pathscan",value:function(e,o){for(var t=[],l=0,C=0,S=0,T=0,x=e[0].length,w=e.length,P=0,$=!0,q=!1,st,nt=0;nt<w;nt+=1)for(var ct=0;ct<x;ct+=1)if(e[nt][ct]===4||e[nt][ct]===11)for(S=ct,T=nt,t[l]={},t[l].points=[],t[l].boundingbox=[S,T,S,T],t[l].holechildren=[],$=!1,C=0,q=e[nt][ct]===11,P=1;!$;){if(t[l].points[C]={},t[l].points[C].x=S-1,t[l].points[C].y=T-1,t[l].points[C].t=e[T][S],S-1<t[l].boundingbox[0]&&(t[l].boundingbox[0]=S-1),S-1>t[l].boundingbox[2]&&(t[l].boundingbox[2]=S-1),T-1<t[l].boundingbox[1]&&(t[l].boundingbox[1]=T-1),T-1>t[l].boundingbox[3]&&(t[l].boundingbox[3]=T-1),st=this.pathscan_combined_lookup[e[T][S]][P],e[T][S]=st[0],P=st[1],S+=st[2],T+=st[3],S-1===t[l].points[0].x&&T-1===t[l].points[0].y)if($=!0,t[l].points.length<o)t.pop();else{if(t[l].isholepath=!!q,q){for(var Mt=0,Gt=[-1,-1,x+1,w+1],Zt=0;Zt<l;Zt++)!t[Zt].isholepath&&this.boundingboxincludes(t[Zt].boundingbox,t[l].boundingbox)&&this.boundingboxincludes(Gt,t[Zt].boundingbox)&&(Mt=Zt,Gt=t[Zt].boundingbox);t[Mt].holechildren.push(l)}l+=1}C+=1}return t}},{key:"boundingboxincludes",value:function(e,o){return e[0]<o[0]&&e[1]<o[1]&&e[2]>o[2]&&e[3]>o[3]}},{key:"batchpathscan",value:function(e,o){var t=[];for(var l in e)!e.hasOwnProperty(l)||(t[l]=this.pathscan(e[l],o));return t}},{key:"internodes",value:function(e,o){var t=[],l=0,C=0,S=0,T=0,x=0,w,P;for(w=0;w<e.length;w+=1)for(t[w]={},t[w].points=[],t[w].boundingbox=e[w].boundingbox,t[w].holechildren=e[w].holechildren,t[w].isholepath=e[w].isholepath,l=e[w].points.length,P=0;P<l;P+=1)C=(P+1)%l,S=(P+2)%l,T=(P-1+l)%l,x=(P-2+l)%l,o.rightangleenhance&&this.testrightangle(e[w],x,T,P,C,S)&&(t[w].points.length>0&&(t[w].points[t[w].points.length-1].linesegment=this.getdirection(t[w].points[t[w].points.length-1].x,t[w].points[t[w].points.length-1].y,e[w].points[P].x,e[w].points[P].y)),t[w].points.push({x:e[w].points[P].x,y:e[w].points[P].y,linesegment:this.getdirection(e[w].points[P].x,e[w].points[P].y,(e[w].points[P].x+e[w].points[C].x)/2,(e[w].points[P].y+e[w].points[C].y)/2)})),t[w].points.push({x:(e[w].points[P].x+e[w].points[C].x)/2,y:(e[w].points[P].y+e[w].points[C].y)/2,linesegment:this.getdirection((e[w].points[P].x+e[w].points[C].x)/2,(e[w].points[P].y+e[w].points[C].y)/2,(e[w].points[C].x+e[w].points[S].x)/2,(e[w].points[C].y+e[w].points[S].y)/2)});return t}},{key:"testrightangle",value:function(e,o,t,l,C,S){return e.points[l].x===e.points[o].x&&e.points[l].x===e.points[t].x&&e.points[l].y===e.points[C].y&&e.points[l].y===e.points[S].y||e.points[l].y===e.points[o].y&&e.points[l].y===e.points[t].y&&e.points[l].x===e.points[C].x&&e.points[l].x===e.points[S].x}},{key:"getdirection",value:function(e,o,t,l){var C=8;return e<t?o<l?C=1:o>l?C=7:C=0:e>t?o<l?C=3:o>l?C=5:C=4:o<l?C=2:o>l?C=6:C=8,C}},{key:"batchinternodes",value:function(e,o){var t=[];for(var l in e)!e.hasOwnProperty(l)||(t[l]=this.internodes(e[l],o));return t}},{key:"tracepath",value:function(e,o,t){var l=0,C,S,T,x={};for(x.segments=[],x.boundingbox=e.boundingbox,x.holechildren=e.holechildren,x.isholepath=e.isholepath;l<e.points.length;){var w;for(C=e.points[l].linesegment,S=-1,T=l+1;(e.points[T].linesegment===C||e.points[T].linesegment===S||S===-1)&&T<e.points.length-1;)e.points[T].linesegment!==C&&S===-1&&(S=e.points[T].linesegment),T+=1;T===e.points.length-1&&(T=0),x.segments=j()(w=x.segments).call(w,this.fitseq(e,o,t,l,T)),T>0?l=T:l=e.points.length}return x}},{key:"fitseq",value:function(e,o,t,l,C){var S;if(C>e.points.length||C<0)return[];var T=l,x=0,w=!0,P,$,q,st=C-l;st<0&&(st+=e.points.length);for(var nt=(e.points[C].x-e.points[l].x)/st,ct=(e.points[C].y-e.points[l].y)/st,Mt=(l+1)%e.points.length,Gt;Mt!=C;)Gt=Mt-l,Gt<0&&(Gt+=e.points.length),P=e.points[l].x+nt*Gt,$=e.points[l].y+ct*Gt,q=(e.points[Mt].x-P)*(e.points[Mt].x-P)+(e.points[Mt].y-$)*(e.points[Mt].y-$),q>o&&(w=!1),q>x&&(T=Mt,x=q),Mt=(Mt+1)%e.points.length;if(w)return[{type:"L",x1:e.points[l].x,y1:e.points[l].y,x2:e.points[C].x,y2:e.points[C].y}];var Zt=T;w=!0,x=0;var Jt=(Zt-l)/st,Pt=(1-Jt)*(1-Jt),ne=2*(1-Jt)*Jt,be=Jt*Jt,Ee=(Pt*e.points[l].x+be*e.points[C].x-e.points[Zt].x)/-ne,ye=(Pt*e.points[l].y+be*e.points[C].y-e.points[Zt].y)/-ne;for(Mt=l+1;Mt!=C;)Jt=(Mt-l)/st,Pt=(1-Jt)*(1-Jt),ne=2*(1-Jt)*Jt,be=Jt*Jt,P=Pt*e.points[l].x+ne*Ee+be*e.points[C].x,$=Pt*e.points[l].y+ne*ye+be*e.points[C].y,q=(e.points[Mt].x-P)*(e.points[Mt].x-P)+(e.points[Mt].y-$)*(e.points[Mt].y-$),q>t&&(w=!1),q>x&&(T=Mt,x=q),Mt=(Mt+1)%e.points.length;if(w)return[{type:"Q",x1:e.points[l].x,y1:e.points[l].y,x2:Ee,y2:ye,x3:e.points[C].x,y3:e.points[C].y}];var Pe=Zt;return j()(S=this.fitseq(e,o,t,l,Pe)).call(S,this.fitseq(e,o,t,Pe,C))}},{key:"batchtracepaths",value:function(e,o,t){var l=[];for(var C in e)!e.hasOwnProperty(C)||l.push(this.tracepath(e[C],o,t));return l}},{key:"batchtracelayers",value:function(e,o,t){var l=[];for(var C in e)!e.hasOwnProperty(C)||(l[C]=this.batchtracepaths(e[C],o,t));return l}},{key:"roundtodec",value:function(e,o){return Number(e.toFixed(o))}},{key:"svgpathstring",value:function(e,o,t,l){var C,S,T=e.layers[o],x=T[t],w="",P;if(l.linefilter&&x.segments.length<3)return w;if(w=j()(C="<path ".concat(l.desc?j()(S='desc="l '.concat(o," p ")).call(S,t,'" '):"")).call(C,this.tosvgcolorstr(e.palette[o],l),'d="'),l.roundcoords===-1){var $;for(w+=j()($="M ".concat(x.segments[0].x1*l.scale," ")).call($,x.segments[0].y1*l.scale," "),P=0;P<x.segments.length;P++){var q,st;if(w+=j()(q=j()(st="".concat(x.segments[P].type," ")).call(st,x.segments[P].x2*l.scale," ")).call(q,x.segments[P].y2*l.scale," "),x.segments[P].hasOwnProperty("x3")){var nt;w+=j()(nt="".concat(x.segments[P].x3*l.scale," ")).call(nt,x.segments[P].y3*l.scale," ")}}w+="Z "}else{var ct;for(w+=j()(ct="M ".concat(this.roundtodec(x.segments[0].x1*l.scale,l.roundcoords)," ")).call(ct,this.roundtodec(x.segments[0].y1*l.scale,l.roundcoords)," "),P=0;P<x.segments.length;P++){var Mt,Gt;if(w+=j()(Mt=j()(Gt="".concat(x.segments[P].type," ")).call(Gt,this.roundtodec(x.segments[P].x2*l.scale,l.roundcoords)," ")).call(Mt,this.roundtodec(x.segments[P].y2*l.scale,l.roundcoords)," "),x.segments[P].hasOwnProperty("x3")){var Zt;w+=j()(Zt="".concat(this.roundtodec(x.segments[P].x3*l.scale,l.roundcoords)," ")).call(Zt,this.roundtodec(x.segments[P].y3*l.scale,l.roundcoords)," ")}}w+="Z "}for(var Jt=0;Jt<x.holechildren.length;Jt++){var Pt=T[x.holechildren[Jt]];if(l.roundcoords===-1){if(Pt.segments[Pt.segments.length-1].hasOwnProperty("x3")){var ne;w+=j()(ne="M ".concat(Pt.segments[Pt.segments.length-1].x3*l.scale," ")).call(ne,Pt.segments[Pt.segments.length-1].y3*l.scale," ")}else{var be;w+=j()(be="M ".concat(Pt.segments[Pt.segments.length-1].x2*l.scale," ")).call(be,Pt.segments[Pt.segments.length-1].y2*l.scale," ")}for(P=Pt.segments.length-1;P>=0;P--){var Ee;if(w+="".concat(Pt.segments[P].type," "),Pt.segments[P].hasOwnProperty("x3")){var ye;w+=j()(ye="".concat(Pt.segments[P].x2*l.scale," ")).call(ye,Pt.segments[P].y2*l.scale," ")}w+=j()(Ee="".concat(Pt.segments[P].x1*l.scale," ")).call(Ee,Pt.segments[P].y1*l.scale," ")}}else{if(Pt.segments[Pt.segments.length-1].hasOwnProperty("x3")){var Pe;w+=j()(Pe="M ".concat(this.roundtodec(Pt.segments[Pt.segments.length-1].x3*l.scale)," ")).call(Pe,this.roundtodec(Pt.segments[Pt.segments.length-1].y3*l.scale)," ")}else{var Ue;w+=j()(Ue="M ".concat(this.roundtodec(Pt.segments[Pt.segments.length-1].x2*l.scale)," ")).call(Ue,this.roundtodec(Pt.segments[Pt.segments.length-1].y2*l.scale)," ")}for(P=Pt.segments.length-1;P>=0;P--){var De;if(w+="".concat(Pt.segments[P].type," "),Pt.segments[P].hasOwnProperty("x3")){var ei;w+=j()(ei="".concat(this.roundtodec(Pt.segments[P].x2*l.scale)," ")).call(ei,this.roundtodec(Pt.segments[P].y2*l.scale)," ")}w+=j()(De="".concat(this.roundtodec(Pt.segments[P].x1*l.scale)," ")).call(De,this.roundtodec(Pt.segments[P].y1*l.scale)," ")}}w+="Z "}if(w+='" />',l.lcpr||l.qcpr){for(P=0;P<x.segments.length;P++){if(x.segments[P].hasOwnProperty("x3")&&l.qcpr){var Si,bi,_i,xi,Mi,Ti,Ei,Di,wi,Ai,Oi,ki,Pi,Li;w+=j()(Si=j()(bi=j()(_i='<circle cx="'.concat(x.segments[P].x2*l.scale,'" cy="')).call(_i,x.segments[P].y2*l.scale,'" r="')).call(bi,l.qcpr,'" fill="cyan" stroke-width="')).call(Si,l.qcpr*.2,'" stroke="black" />'),w+=j()(xi=j()(Mi=j()(Ti='<circle cx="'.concat(x.segments[P].x3*l.scale,'" cy="')).call(Ti,x.segments[P].y3*l.scale,'" r="')).call(Mi,l.qcpr,'" fill="white" stroke-width="')).call(xi,l.qcpr*.2,'" stroke="black" />'),w+=j()(Ei=j()(Di=j()(wi=j()(Ai='<line x1="'.concat(x.segments[P].x1*l.scale,'" y1="')).call(Ai,x.segments[P].y1*l.scale,'" x2="')).call(wi,x.segments[P].x2*l.scale,'" y2="')).call(Di,x.segments[P].y2*l.scale,'" stroke-width="')).call(Ei,l.qcpr*.2,'" stroke="cyan" />'),w+=j()(Oi=j()(ki=j()(Pi=j()(Li='<line x1="'.concat(x.segments[P].x2*l.scale,'" y1="')).call(Li,x.segments[P].y2*l.scale,'" x2="')).call(Pi,x.segments[P].x3*l.scale,'" y2="')).call(ki,x.segments[P].y3*l.scale,'" stroke-width="')).call(Oi,l.qcpr*.2,'" stroke="cyan" />')}if(!x.segments[P].hasOwnProperty("x3")&&l.lcpr){var ji,Ni,Ri;w+=j()(ji=j()(Ni=j()(Ri='<circle cx="'.concat(x.segments[P].x2*l.scale,'" cy="')).call(Ri,x.segments[P].y2*l.scale,'" r="')).call(Ni,l.lcpr,'" fill="white" stroke-width="')).call(ji,l.lcpr*.2,'" stroke="black" />')}}for(var Jt=0;Jt<x.holechildren.length;Jt++){var Pt=T[x.holechildren[Jt]];for(P=0;P<Pt.segments.length;P++){if(Pt.segments[P].hasOwnProperty("x3")&&l.qcpr){var zi,Le,Ge,sr,lr,cr,ur,hr,fr,dr,gr,vr,mr,pr;w+=j()(zi=j()(Le=j()(Ge='<circle cx="'.concat(Pt.segments[P].x2*l.scale,'" cy="')).call(Ge,Pt.segments[P].y2*l.scale,'" r="')).call(Le,l.qcpr,'" fill="cyan" stroke-width="')).call(zi,l.qcpr*.2,'" stroke="black" />'),w+=j()(sr=j()(lr=j()(cr='<circle cx="'.concat(Pt.segments[P].x3*l.scale,'" cy="')).call(cr,Pt.segments[P].y3*l.scale,'" r="')).call(lr,l.qcpr,'" fill="white" stroke-width="')).call(sr,l.qcpr*.2,'" stroke="black" />'),w+=j()(ur=j()(hr=j()(fr=j()(dr='<line x1="'.concat(Pt.segments[P].x1*l.scale,'" y1="')).call(dr,Pt.segments[P].y1*l.scale,'" x2="')).call(fr,Pt.segments[P].x2*l.scale,'" y2="')).call(hr,Pt.segments[P].y2*l.scale,'" stroke-width="')).call(ur,l.qcpr*.2,'" stroke="cyan" />'),w+=j()(gr=j()(vr=j()(mr=j()(pr='<line x1="'.concat(Pt.segments[P].x2*l.scale,'" y1="')).call(pr,Pt.segments[P].y2*l.scale,'" x2="')).call(mr,Pt.segments[P].x3*l.scale,'" y2="')).call(vr,Pt.segments[P].y3*l.scale,'" stroke-width="')).call(gr,l.qcpr*.2,'" stroke="cyan" />')}if(!Pt.segments[P].hasOwnProperty("x3")&&l.lcpr){var yr,Cr,Ir;w+=j()(yr=j()(Cr=j()(Ir='<circle cx="'.concat(Pt.segments[P].x2*l.scale,'" cy="')).call(Ir,Pt.segments[P].y2*l.scale,'" r="')).call(Cr,l.lcpr,'" fill="white" stroke-width="')).call(yr,l.lcpr*.2,'" stroke="black" />')}}}}return w}},{key:"getsvgstring",value:function(e,o){var t,l,C;o=this.checkoptions(o);for(var S=e.width*o.scale,T=e.height*o.scale,x=j()(t="<svg ".concat(o.viewbox?j()(l='viewBox="0 0 '.concat(S," ")).call(l,T,'" '):j()(C='width="'.concat(S,'" height="')).call(C,T,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(t,this.versionnumber,'" >'),w=0;w<e.layers.length;w+=1)for(var P=0;P<e.layers[w].length;P+=1)e.layers[w][P].isholepath||(x+=this.svgpathstring(e,w,P,o));return x+="</svg>",x}},{key:"compareNumbers",value:function(e,o){return e-o}},{key:"torgbastr",value:function(e){var o,t,l;return j()(o=j()(t=j()(l="rgba(".concat(e.r,",")).call(l,e.g,",")).call(t,e.b,",")).call(o,e.a,")")}},{key:"tosvgcolorstr",value:function(e,o){var t,l,C,S,T,x,w;return j()(t=j()(l=j()(C=j()(S=j()(T=j()(x=j()(w='fill="rgb('.concat(e.r,",")).call(w,e.g,",")).call(x,e.b,')" stroke="rgb(')).call(T,e.r,",")).call(S,e.g,",")).call(C,e.b,')" stroke-width="')).call(l,o.strokewidth,'" opacity="')).call(t,e.a/255,'" ')}},{key:"appendSVGString",value:function(e,o){var t;o?(t=document.getElementById(o),t||(t=document.createElement("div"),t.id=o,document.body.appendChild(t))):(t=document.createElement("div"),document.body.appendChild(t)),t.innerHTML+=e}},{key:"blur",value:function(e,o,t){var l,C,S,T,x,w,P,$,q,st,nt={width:e.width,height:e.height,data:[]};if(o=Math.floor(o),o<1)return e;o>5&&(o=5),t=Math.abs(t),t>1024&&(t=1024);var ct=this.gks[o-1];for(C=0;C<e.height;C++)for(l=0;l<e.width;l++){for(w=0,P=0,$=0,q=0,st=0,S=-o;S<o+1;S++)l+S>0&&l+S<e.width&&(x=(C*e.width+l+S)*4,w+=e.data[x]*ct[S+o],P+=e.data[x+1]*ct[S+o],$+=e.data[x+2]*ct[S+o],q+=e.data[x+3]*ct[S+o],st+=ct[S+o]);x=(C*e.width+l)*4,nt.data[x]=Math.floor(w/st),nt.data[x+1]=Math.floor(P/st),nt.data[x+2]=Math.floor($/st),nt.data[x+3]=Math.floor(q/st)}var Mt=new Uint8ClampedArray(nt.data);for(C=0;C<e.height;C++)for(l=0;l<e.width;l++){for(w=0,P=0,$=0,q=0,st=0,S=-o;S<o+1;S++)C+S>0&&C+S<e.height&&(x=((C+S)*e.width+l)*4,w+=Mt[x]*ct[S+o],P+=Mt[x+1]*ct[S+o],$+=Mt[x+2]*ct[S+o],q+=Mt[x+3]*ct[S+o],st+=ct[S+o]);x=(C*e.width+l)*4,nt.data[x]=Math.floor(w/st),nt.data[x+1]=Math.floor(P/st),nt.data[x+2]=Math.floor($/st),nt.data[x+3]=Math.floor(q/st)}for(C=0;C<e.height;C++)for(l=0;l<e.width;l++)x=(C*e.width+l)*4,T=Math.abs(nt.data[x]-e.data[x])+Math.abs(nt.data[x+1]-e.data[x+1])+Math.abs(nt.data[x+2]-e.data[x+2])+Math.abs(nt.data[x+3]-e.data[x+3]),T>t&&(nt.data[x]=e.data[x],nt.data[x+1]=e.data[x+1],nt.data[x+2]=e.data[x+2],nt.data[x+3]=e.data[x+3]);return nt}},{key:"loadImage",value:function(e,o,t){var l=new Image;t&&t.corsenabled&&(l.crossOrigin="Anonymous"),l.src=e,l.onload=function(){var C=document.createElement("canvas");C.width=l.width,C.height=l.height;var S=C.getContext("2d");S.drawImage(l,0,0),o(C)}}},{key:"getImgdata",value:function(e){var o=e.getContext("2d");return o.getImageData(0,0,e.width,e.height)}},{key:"drawLayers",value:function(e,o,t,l){t=t||1;var C,S,T,x,w,P;l?(P=document.getElementById(l),P||(P=document.createElement("div"),P.id=l,document.body.appendChild(P))):(P=document.createElement("div"),document.body.appendChild(P));for(w in e)if(!!e.hasOwnProperty(w)){C=e[w][0].length,S=e[w].length;var $=document.createElement("canvas");$.width=C*t,$.height=S*t;var q=$.getContext("2d");for(x=0;x<S;x+=1)for(T=0;T<C;T+=1)q.fillStyle=this.torgbastr(o[e[w][x][T]%o.length]),q.fillRect(T*t,x*t,t,t);P.appendChild($)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),b}(),bo={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var f=this,e=function(){f.ui.submenu==="crop"&&(f.stopDrawingMode(),f.ui.changeMenu("crop"))},o=function(w){f.ui.submenu==="rotate"&&f.ui.rotate.setRangeBarAngle("setAngle",w)},t=function(w){f.ui.submenu==="filter"&&Xe()(f.ui).setFilterState(w)},l=function(w){return o(w),t(w),w},C=function(){var w=f._graphics.getZoomMode();f.stopDrawingMode(),w!==_e.ZOOM?(f.startDrawingMode(ie.ZOOM),f._graphics.startZoomInMode()):f._graphics.endZoomInMode()},S=function(){var w=f._graphics.getZoomMode();f.stopDrawingMode(),w!==_e.HAND?(f.startDrawingMode(ie.ZOOM),f._graphics.startHandMode()):f._graphics.endHandMode()},T=function(){Xe()(f.ui)&&Xe()(f.ui).initFilterCheckBoxState()};return H()({initLoadImage:function(w,P){return f.loadImageFromURL(w,P).then(function($){e(),f.ui.initializeImgUrl=w,f.ui.resizeEditor({imageSize:$}),f.clearUndoStack(),f._invoker.fire(yt.EXECUTE_COMMAND,$t.LOAD_IMAGE)})},undo:function(){f.isEmptyUndoStack()||(e(),f.deactivateAll(),f.undo().then(l))},redo:function(){f.isEmptyRedoStack()||(e(),f.deactivateAll(),f.redo().then(l))},reset:function(){e(),f.loadImageFromURL(f.ui.initializeImgUrl,"resetImage").then(function(w){e(),T(),f.ui.resizeEditor({imageSize:w}),f.clearUndoStack(),f._initHistory()})},delete:function(){f.ui.changeHelpButtonEnabled("delete",!1),e(),f.removeActiveObject(),f.activeObjectId=null},deleteAll:function(){e(),f.clearObjects(),f.ui.changeHelpButtonEnabled("delete",!1),f.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(w){Se()||alert("This browser does not support file-api"),f.ui.initializeImgUrl=J().createObjectURL(w),f.loadImageFromFile(w).then(function(P){e(),T(),f.clearUndoStack(),f.ui.activeMenuEvent(),f.ui.resizeEditor({imageSize:P}),f._clearHistory(),f._invoker.fire(yt.EXECUTE_COMMAND,$t.LOAD_IMAGE)}).catch(function(P){return gt().reject(P)})},download:function(){var w=f.toDataURL(),P=f.getImageName(),$,q,st;Se()&&window.saveAs?($=ci(w),q=$.type.split("/")[1],P.split(".").pop()!==q&&(P+=".".concat(q)),saveAs($,P)):(st=window.open(),st.document.body.innerHTML="<img src='".concat(w,"'>"))},history:function(w){f.ui.toggleHistoryMenu(w)},zoomIn:function(){f.ui.toggleZoomButtonStatus("zoomIn"),f.deactivateAll(),C()},zoomOut:function(){f._graphics.zoomOut()},hand:function(){f.ui.offZoomInButtonStatus(),f.ui.toggleZoomButtonStatus("hand"),f.deactivateAll(),S()}},this._commonAction())},_iconAction:function(){var f=this;return H()({changeColor:function(o){f.activeObjectId&&f.changeIconColor(f.activeObjectId,o)},addIcon:function(o,t){f.startDrawingMode("ICON"),f.setDrawingIcon(o,t)},cancelAddIcon:function(){f.ui.icon.clearIconType(),f.changeSelectableAll(!0),f.changeCursor("default"),f.stopDrawingMode()},registerDefaultIcons:function(o,t){var l={};l[o]=t,f.registerIcons(l)},registerCustomIcon:function(o,t){var l=new _n;l.imageToSVG(o,function(C){var S=C.match(/path[^>]*d="([^"]*)"/),T=it(S,2),x=T[1],w={};w[t.name]=x,f.registerIcons(w),f.addIcon(t.name,{left:100,top:100})},_n.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var f=this;return H()({setDrawMode:function(o,t){f.stopDrawingMode(),o==="free"?f.startDrawingMode("FREE_DRAWING",t):f.startDrawingMode("LINE_DRAWING",t)},setColor:function(o){f.setBrush({color:o})}},this._commonAction())},_maskAction:function(){var f=this;return H()({loadImageFromURL:function(o,t){return f.loadImageFromURL(f.toDataURL(),"FilterImage").then(function(){f.addImageObject(o).then(function(){J().revokeObjectURL(t)}),f._invoker.fire(yt.EXECUTE_COMMAND,$t.LOAD_MASK_IMAGE)})},applyFilter:function(){f.applyFilter("mask",{maskObjId:f.activeObjectId})}},this._commonAction())},_textAction:function(){var f=this;return H()({changeTextStyle:function(o,t){f.activeObjectId&&f.changeTextStyle(f.activeObjectId,o,t)}},this._commonAction())},_rotateAction:function(){var f=this;return H()({rotate:function(o,t){f.rotate(o,t),f.ui.resizeEditor(),f.ui.rotate.setRangeBarAngle("rotate",o)},setAngle:function(o,t){f.setAngle(o,t),f.ui.resizeEditor(),f.ui.rotate.setRangeBarAngle("setAngle",o)}},this._commonAction())},_shapeAction:function(){var f=this;return H()({changeShape:function(o,t){f.activeObjectId&&f.changeShape(f.activeObjectId,o,t)},setDrawingShape:function(o){f.setDrawingShape(o)}},this._commonAction())},_cropAction:function(){var f=this;return H()({crop:function(){var o=f.getCropzoneRect();o&&!Ar(o)&&f.crop(o).then(function(){f.stopDrawingMode(),f.ui.resizeEditor(),f.ui.changeMenu("crop"),f._invoker.fire(yt.EXECUTE_COMMAND,$t.CROP)}).catch(function(t){return gt().reject(t)})},cancel:function(){f.stopDrawingMode(),f.ui.changeMenu("crop")},preset:function(o){switch(o){case"preset-square":f.setCropzoneRect(1/1);break;case"preset-3-2":f.setCropzoneRect(3/2);break;case"preset-4-3":f.setCropzoneRect(4/3);break;case"preset-5-4":f.setCropzoneRect(5/4);break;case"preset-7-5":f.setCropzoneRect(7/5);break;case"preset-16-9":f.setCropzoneRect(16/9);break;default:f.setCropzoneRect(),f.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var f=this;return H()({getCurrentDimensions:function(){return f._graphics.getCurrentDimensions()},preview:function(o,t,l){var C=f._graphics.getCurrentDimensions(),S=function(){return C.width/C.height},T={};switch(o){case"width":T.width=t,l?T.height=t/S():T.height=C.height;break;case"height":T.height=t,l?T.width=t*S():T.width=C.width;break;default:T=C}f._graphics.resize(T).then(function(){f.ui.resizeEditor()}),l&&(f.ui.resize.setWidthValue(T.width),f.ui.resize.setHeightValue(T.height))},lockAspectRatio:function(o,t,l){var C=f._graphics.getCurrentDimensions(),S=C.width,T=C.height,x=S/T;if(o)if(S>T){var w=l/x,P=t*x;f.ui.resize.setLimit({minWidth:P>t?P:t,minHeight:t,maxWidth:l,maxHeight:w<l?w:l})}else{var $=l*x,q=t/x;f.ui.resize.setLimit({minWidth:t,minHeight:q>t?q:t,maxWidth:$<l?$:l,maxHeight:l})}else f.ui.resize.setLimit({minWidth:t,minHeight:t,maxWidth:l,maxHeight:l})},resize:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;o||(o=f._graphics.getCurrentDimensions()),f.resize(o).then(function(){f._graphics.setOriginalDimensions(o),f.stopDrawingMode(),f.ui.resizeEditor(),f.ui.changeMenu("resize")}).catch(function(t){return gt().reject(t)})},reset:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=f._graphics.getOriginalDimensions();f.ui.resize.setWidthValue(t.width,!0),f.ui.resize.setHeightValue(t.height,!0),f._graphics.resize(t).then(function(){o||(f.stopDrawingMode(),f.ui.resizeEditor(),f.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var f=this;return H()({flip:function(o){return f[o]()}},this._commonAction())},_filterAction:function(){var f=this;return H()({applyFilter:function(o,t,l,C){o?f.applyFilter(t,l,C):f.hasFilter(t)&&f.removeFilter(t)}},this._commonAction())},setReAction:function(){var f=this;this.on({undoStackChanged:function(o){o?(f.ui.changeHelpButtonEnabled("undo",!0),f.ui.changeHelpButtonEnabled("reset",!0)):(f.ui.changeHelpButtonEnabled("undo",!1),f.ui.changeHelpButtonEnabled("reset",!1)),f.ui.resizeEditor()},redoStackChanged:function(o){o?f.ui.changeHelpButtonEnabled("redo",!0):f.ui.changeHelpButtonEnabled("redo",!1),f.ui.resizeEditor()},objectActivated:function(o){var t,l;f.activeObjectId=o.id,f.ui.changeHelpButtonEnabled("delete",!0),f.ui.changeHelpButtonEnabled("deleteAll",!0),o.type==="cropzone"?f.ui.crop.changeApplyButtonStatus(!0):g()(t=["rect","circle","triangle"]).call(t,o.type)>-1?(f.stopDrawingMode(),f.ui.submenu!=="shape"&&f.ui.changeMenu("shape",!1,!1),f.ui.shape.setShapeStatus({strokeColor:o.stroke,strokeWidth:o.strokeWidth,fillColor:dt()(o)}),f.ui.shape.setMaxStrokeValue(Math.min(o.width,o.height))):o.type==="path"||o.type==="line"?f.ui.submenu!=="draw"&&(f.ui.changeMenu("draw",!1,!1),f.ui.draw.changeStandbyMode()):g()(l=["i-text","text"]).call(l,o.type)>-1?(f.ui.submenu!=="text"&&f.ui.changeMenu("text",!1,!1),f.ui.text.setTextStyleStateOnAction(o)):o.type==="icon"&&(f.stopDrawingMode(),f.ui.submenu!=="icon"&&f.ui.changeMenu("icon",!1,!1),f.ui.icon.setIconPickerColor(dt()(o)))},addText:function(o){var t=f.ui.text,l=t.textColor,C=t.fontSize,S=t.fontStyle,T=t.fontWeight,x=t.underline,w="Noto Sans";f.addText("Double Click",{position:o.originPosition,styles:{fill:l,fontSize:C,fontFamily:w,fontStyle:S,fontWeight:T,underline:x}}).then(function(){f.changeCursor("default")})},addObjectAfter:function(o){var t;o.type==="icon"?f.ui.icon.changeStandbyMode():g()(t=["rect","circle","triangle"]).call(t,o.type)>-1&&(f.ui.shape.setMaxStrokeValue(Math.min(o.width,o.height)),f.ui.shape.changeStandbyMode())},objectScaled:function(o){var t,l;if(g()(t=["i-text","text"]).call(t,o.type)>-1)f.ui.text.fontSize=qt(o.fontSize);else if(g()(l=["rect","circle","triangle"]).call(l,o.type)>=0){var C=o.width,S=o.height,T=f.ui.shape.getStrokeValue();C<T&&f.ui.shape.setStrokeValue(C),S<T&&f.ui.shape.setStrokeValue(S)}},selectionCleared:function(){f.activeObjectId=null,f.ui.submenu==="text"?f.changeCursor("text"):fi(["draw","crop","resize"],f.ui.submenu)||f.stopDrawingMode()}})},_historyAction:function(){var f=this;return{undo:function(o){return f.undo(o)},redo:function(o){return f.redo(o)}}},_commonAction:function(){var f=this,e,o,t,l,C=ie.TEXT,S=ie.CROPPER,T=ie.SHAPE,x=ie.ZOOM,w=ie.RESIZE;return{modeChange:function($){switch($){case Me.TEXT:f._changeActivateMode(C);break;case Me.CROP:f.startDrawingMode(S);break;case Me.SHAPE:f._changeActivateMode(T),f.setDrawingShape(f.ui.shape.type,f.ui.shape.options);break;case Me.ZOOM:f.startDrawingMode(x);break;case Me.RESIZE:f.startDrawingMode(w);break}},deactivateAll:Q()(e=this.deactivateAll).call(e,this),changeSelectableAll:Q()(o=this.changeSelectableAll).call(o,this),discardSelection:Q()(t=this.discardSelection).call(t,this),stopDrawingMode:Q()(l=this.stopDrawingMode).call(l,this)}},mixin:function(f){H()(f.prototype,this)}},_o=Lt(602),xn=Lt.n(_o),xo=Lt(5573),vi=Lt.n(xo),Mo=function(){function b(f,e){X(this,b),this.name=f,this.graphics=e}return rt(b,[{key:"fire",value:function(){for(var e=this.graphics,o=arguments.length,t=new Array(o),l=0;l<o;l++)t[l]=arguments[l];return this.graphics.fire.apply(e,t)}},{key:"setCanvasImage",value:function(e,o){this.graphics.setCanvasImage(e,o)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(e,o){this.graphics.setImageProperties(e,o)}},{key:"setCanvasCssDimension",value:function(e){this.graphics.setCanvasCssDimension(e)}},{key:"setCanvasBackstoreDimension",value:function(e){this.graphics.setCanvasBackstoreDimension(e)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),b}(),Ae=Mo;function To(b){var f=Eo();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Eo(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Do={padding:0,crossOrigin:"Anonymous"},wo=function(b){le(e,b);var f=To(e);function e(o){return X(this,e),f.call(this,wt.IMAGE_LOADER,o)}return rt(e,[{key:"load",value:function(t,l){var C=this,S;if(!t&&!l){var T=this.getCanvas();T.backgroundImage=null,T.renderAll(),S=new(gt())(function(x){C.setCanvasImage("",null),x()})}else S=this._setBackgroundImage(l).then(function(x){return C.setCanvasImage(t,x),C.adjustCanvasDimension(),x});return S}},{key:"_setBackgroundImage",value:function(t){var l=this;return t?new(gt())(function(C,S){var T=l.getCanvas();T.setBackgroundImage(t,function(){var x=T.backgroundImage;x&&x.getElement()?C(x):S(oe.loadingImageFailed)},Do)}):gt().reject(oe.loadImage)}}]),e}(Ae),Ao=wo,Oo="tl",ko="tr",Po="mt",Lo="ml",jo="mr",No="mb",Ro="bl",zo="br",Mn=[Oo,ko,Po,Lo,jo,No,Ro,zo],Ui=function(){};function Fo(b){return g()(Mn).call(Mn,b)>=0}function mi(b,f){return b>f?"width":"height"}var Bo=et.fabric.util.createClass(et.fabric.Rect,{initialize:function(f,e,o){e=H()(e,o),e.type="cropzone",this.callSuper("initialize",e),this._addEventHandler(),this.canvas=f,this.options=e},canvasEventDelegation:function(f){var e,o="unregistered",t=this.canvasEventTrigger[f]!==Ui;return t?o="registered":g()(e=[yt.OBJECT_MOVED,yt.OBJECT_SCALED]).call(e,f)<0&&(o="none"),o},canvasEventRegister:function(f,e){this.canvasEventTrigger[f]=e},_addEventHandler:function(){var f,e,o,t,l;this.canvasEventTrigger=(f={},z(f,yt.OBJECT_MOVED,Ui),z(f,yt.OBJECT_SCALED,Ui),f),this.on({moving:Q()(e=this._onMoving).call(e,this),scaling:Q()(o=this._onScaling).call(o,this)}),et.fabric.util.addListener(document,"keydown",Q()(t=this._onKeyDown).call(t,this)),et.fabric.util.addListener(document,"keyup",Q()(l=this._onKeyUp).call(l,this))},_renderCropzone:function(f){var e=7,o=7,t=this.flipX?-1:1,l=this.flipY?-1:1,C=t/this.scaleX,S=l/this.scaleY;f.scale(C,S),this._fillOuterRect(f,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(f),this._strokeBorder(f,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(f,"rgb(0, 0, 0)",{lineDashWidth:e}),this._strokeBorder(f,"rgb(255, 255, 255)",{lineDashWidth:e,lineDashOffset:o})),f.scale(1/C,1/S)},_render:function(f){this.callSuper("_render",f),this._renderCropzone(f)},_fillOuterRect:function(f,e){var o=this._getCoordinates(),t=o.x,l=o.y;f.save(),f.fillStyle=e,f.beginPath(),f.moveTo(t[0]-1,l[0]-1),f.lineTo(t[3]+1,l[0]-1),f.lineTo(t[3]+1,l[3]+1),f.lineTo(t[0]-1,l[3]+1),f.lineTo(t[0]-1,l[0]-1),f.closePath(),f.moveTo(t[1],l[1]),f.lineTo(t[1],l[2]),f.lineTo(t[2],l[2]),f.lineTo(t[2],l[1]),f.lineTo(t[1],l[1]),f.closePath(),dt()(f).call(f),f.restore()},_fillInnerRect:function(f){var e=this._getCoordinates(),o=e.x,t=e.y,l=this._caculateInnerPosition(o,(o[2]-o[1])/3),C=this._caculateInnerPosition(t,(t[2]-t[1])/3);f.save(),f.strokeStyle="rgba(255, 255, 255, 0.7)",f.lineWidth=this.options.lineWidth,f.beginPath(),f.moveTo(l[0],C[1]),f.lineTo(l[3],C[1]),f.moveTo(l[0],C[2]),f.lineTo(l[3],C[2]),f.moveTo(l[1],C[0]),f.lineTo(l[1],C[3]),f.moveTo(l[2],C[0]),f.lineTo(l[2],C[3]),f.stroke(),f.closePath(),f.restore()},_caculateInnerPosition:function(f,e){var o=[];return o[0]=f[1],o[1]=f[1]+e,o[2]=f[1]+e*2,o[3]=f[2],o},_getCoordinates:function(){var f,e,o=this.canvas,t=this.width,l=this.height,C=this.left,S=this.top,T=t/2,x=l/2,w=o.getHeight(),P=o.getWidth();return{x:Ne()(f=[-(T+C),-T,T,T+(P-C-t)]).call(f,Math.ceil),y:Ne()(e=[-(x+S),-x,x,x+(w-S-l)]).call(e,Math.ceil)}},_strokeBorder:function(f,e,o){var t=o.lineDashWidth,l=o.lineDashOffset,C=o.lineWidth,S=this.width/2,T=this.height/2;f.save(),f.strokeStyle=e,f.setLineDash&&f.setLineDash([t,t]),l&&(f.lineDashOffset=l),C&&(f.lineWidth=C),f.beginPath(),f.moveTo(-S,-T),f.lineTo(S,-T),f.lineTo(S,T),f.lineTo(-S,T),f.lineTo(-S,-T),f.stroke(),f.restore()},_onMoving:function(){var f=this.height,e=this.width,o=this.left,t=this.top,l=this.canvas.getWidth()-e,C=this.canvas.getHeight()-f;this.left=Vt(o,0,l),this.top=Vt(t,0,C),this.canvasEventTrigger[yt.OBJECT_MOVED](this)},_onScaling:function(f){var e=f.transform.corner,o=this.canvas.getPointer(f.e),t=this._calcScalingSizeFromPointer(o,e);this.scale(1).set(t),this.canvasEventTrigger[yt.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(f,e){var o=Fo(e);return o&&this._resizeCropZone(f,e)},adjustRatioCropzoneSize:function(f){var e=f.width,o=f.height,t=f.leftMaker,l=f.topMaker,C=f.maxWidth,S=f.maxHeight,T=f.scaleTo;if(e=C?Vt(e,1,C):e,o=S?Vt(o,1,S):o,!this.presetRatio)return this._withShiftKey&&(e>o?o=e:o>e&&(e=o)),{width:e,height:o,left:t(e),top:l(o)};T==="width"?o=e/this.presetRatio:e=o*this.presetRatio;var x=Math.min(C/e,S/o);if(x<=1){var w,P=Ne()(w=[e,o]).call(w,function(q){return q*x}),$=it(P,2);e=$[0],o=$[1]}return{width:e,height:o,left:t(e),top:l(o)}},_getCropzoneRectInfo:function(){var f=this.canvas,e=f.width,o=f.height,t=this.getBoundingRect(!1,!0),l=t.top,C=t.left,S=t.width,T=t.height;return{rectTop:l,rectLeft:C,rectWidth:S,rectHeight:T,rectRight:C+S,rectBottom:l+T,canvasWidth:e,canvasHeight:o}},_resizeCropZone:function(f,e){var o=f.x,t=f.y,l=this._getCropzoneRectInfo(),C=l.rectWidth,S=l.rectHeight,T=l.rectTop,x=l.rectLeft,w=l.rectBottom,P=l.rectRight,$=l.canvasWidth,q=l.canvasHeight,st={tl:{width:P-o,height:w-t,leftMaker:function(ct){return P-ct},topMaker:function(ct){return w-ct},maxWidth:P,maxHeight:w,scaleTo:mi(x-o,T-t)},tr:{width:o-x,height:w-t,leftMaker:function(){return x},topMaker:function(ct){return w-ct},maxWidth:$-x,maxHeight:w,scaleTo:mi(o-P,T-t)},mt:{width:C,height:w-t,leftMaker:function(){return x},topMaker:function(ct){return w-ct},maxWidth:$-x,maxHeight:w,scaleTo:"height"},ml:{width:P-o,height:S,leftMaker:function(ct){return P-ct},topMaker:function(){return T},maxWidth:P,maxHeight:q-T,scaleTo:"width"},mr:{width:o-x,height:S,leftMaker:function(){return x},topMaker:function(){return T},maxWidth:$-x,maxHeight:q-T,scaleTo:"width"},mb:{width:C,height:t-T,leftMaker:function(){return x},topMaker:function(){return T},maxWidth:$-x,maxHeight:q-T,scaleTo:"height"},bl:{width:P-o,height:t-T,leftMaker:function(ct){return P-ct},topMaker:function(){return T},maxWidth:P,maxHeight:q-T,scaleTo:mi(x-o,t-w)},br:{width:o-x,height:t-T,leftMaker:function(){return x},topMaker:function(){return T},maxWidth:$-x,maxHeight:q-T,scaleTo:mi(o-P,t-w)}};return this.adjustRatioCropzoneSize(st[e])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(f){var e=f.keyCode;e===fe.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(f){var e=f.keyCode;e===fe.SHIFT&&(this._withShiftKey=!1)}}),Ho=Bo;function Yo(b){var f=Uo();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Uo(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Wo=10,Go={presetRatio:null,top:-10,left:-10,height:1,width:1},Xo=function(b){le(e,b);var f=Yo(e);function e(o){var t,l,C,S,T,x;return X(this,e),x=f.call(this,wt.CROPPER,o),x._cropzone=null,x._startX=null,x._startY=null,x._withShiftKey=!1,x._listeners={keydown:Q()(t=x._onKeyDown).call(t,te(x)),keyup:Q()(l=x._onKeyUp).call(l,te(x)),mousedown:Q()(C=x._onFabricMouseDown).call(C,te(x)),mousemove:Q()(S=x._onFabricMouseMove).call(S,te(x)),mouseup:Q()(T=x._onFabricMouseUp).call(T,te(x))},x}return rt(e,[{key:"start",value:function(){if(!this._cropzone){var t=this.getCanvas();t.forEachObject(function(l){l.evented=!1}),this._cropzone=new Ho(t,H()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},pe,this.graphics.cropSelectionStyle)),t.discardActiveObject(),t.add(this._cropzone),t.on("mouse:down",this._listeners.mousedown),t.selection=!1,t.defaultCursor="crosshair",et.fabric.util.addListener(document,"keydown",this._listeners.keydown),et.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var t=this.getCanvas(),l=this._cropzone;!l||(t.remove(l),t.selection=!0,t.defaultCursor="default",t.off("mouse:down",this._listeners.mousedown),t.forEachObject(function(C){C.evented=!0}),this._cropzone=null,et.fabric.util.removeListener(document,"keydown",this._listeners.keydown),et.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(t){this._cropzone&&this._cropzone.set({visible:t})}},{key:"_onFabricMouseDown",value:function(t){var l=this.getCanvas();if(!t.target){l.selection=!1;var C=l.getPointer(t.e);this._startX=C.x,this._startY=C.y,l.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var l=this.getCanvas(),C=l.getPointer(t.e),S=C.x,T=C.y,x=this._cropzone;Math.abs(S-this._startX)+Math.abs(T-this._startY)>Wo&&(l.remove(x),x.set(this._calcRectDimensionFromPoint(S,T,x.presetRatio)),l.add(x),l.setActiveObject(x))}},{key:"_calcRectDimensionFromPoint",value:function(t,l){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,S=this.getCanvas(),T=S.getWidth(),x=S.getHeight(),w=this._startX,P=this._startY,$=Vt(t,0,w),q=Vt(l,0,P),st=Vt(t,w,T)-$,nt=Vt(l,P,x)-q;return this._withShiftKey&&!C?(st>nt?nt=st:nt>st&&(st=nt),w>=t&&($=w-st),P>=l&&(q=P-nt)):C&&(nt=st/C,w>=t&&($=Vt(w-st,0,T)),P>=l&&(q=Vt(P-nt,0,x)),q+nt>x&&(nt=x-q,st=nt*C,w>=t&&($=Vt(w-st,0,T)),P>=l&&(q=Vt(P-nt,0,x)))),{left:$,top:q,width:st,height:nt}}},{key:"_onFabricMouseUp",value:function(){var t=this._cropzone,l=this._listeners,C=this.getCanvas();C.setActiveObject(t),C.off({"mouse:move":l.mousemove,"mouse:up":l.mouseup})}},{key:"getCroppedImageData",value:function(t){var l=this.getCanvas(),C=l.contains(this._cropzone);if(!t)return null;C&&l.remove(this._cropzone);var S={imageName:this.getImageName(),url:l.toDataURL(t)};return C&&l.add(this._cropzone),S}},{key:"getCropzoneRect",value:function(){var t=this._cropzone;return t.isValid()?{left:t.left,top:t.top,width:t.width,height:t.height}:null}},{key:"setCropzoneRect",value:function(t){var l=this.getCanvas(),C=this._cropzone;l.discardActiveObject(),l.selection=!1,l.remove(C),C.set(t?this._getPresetPropertiesForCropSize(t):Go),l.add(C),l.selection=!0,t&&l.setActiveObject(C)}},{key:"_getPresetPropertiesForCropSize",value:function(t){var l,C,S=this.getCanvas(),T=S.getWidth(),x=S.getHeight(),w=T>=x?T:x,P=function(Pt,ne){return Pt>ne?ne/Pt:1},$=w*t,q=w,st=P($,T),nt=Ne()(l=[$,q]).call(l,function(Jt){return Jt*st}),ct=it(nt,2);$=ct[0],q=ct[1];var Mt=P(q,x),Gt=Ne()(C=[$,q]).call(C,function(Jt){return ui(Jt*Mt)}),Zt=it(Gt,2);return $=Zt[0],q=Zt[1],{presetRatio:t,top:(x-q)/2,left:(T-$)/2,width:$,height:q}}},{key:"_onKeyDown",value:function(t){t.keyCode===fe.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(t){t.keyCode===fe.SHIFT&&(this._withShiftKey=!1)}}]),e}(Ae),Zo=Xo;function Vo(b){var f=Jo();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Jo(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Qo=function(b){le(e,b);var f=Vo(e);function e(o){return X(this,e),f.call(this,wt.FLIP,o)}return rt(e,[{key:"getCurrentSetting",value:function(){var t=this.getCanvasImage();return{flipX:t.flipX,flipY:t.flipY}}},{key:"set",value:function(t){var l=this.getCurrentSetting(),C=l.flipX!==t.flipX,S=l.flipY!==t.flipY;return!C&&!S?gt().reject(oe.flip):(H()(l,t),this.setImageProperties(l,!0),this._invertAngle(C,S),this._flipObjects(C,S),gt().resolve({flipX:l.flipX,flipY:l.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(t,l){var C=this.getCanvasImage(),S=C.angle;t&&(S*=-1),l&&(S*=-1),C.rotate(Be()(S)).setCoords()}},{key:"_flipObjects",value:function(t,l){var C=this.getCanvas();t&&C.forEachObject(function(S){S.set({angle:Be()(S.angle*-1),flipX:!S.flipX,left:C.width-S.left}).setCoords()}),l&&C.forEachObject(function(S){S.set({angle:Be()(S.angle*-1),flipY:!S.flipY,top:C.height-S.top}).setCoords()}),C.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var t=this.getCurrentSetting();return this.set({flipX:!t.flipX,flipY:t.flipY})}},{key:"flipY",value:function(){var t=this.getCurrentSetting();return this.set({flipX:t.flipX,flipY:!t.flipY})}}]),e}(Ae),Ko=Qo;function $o(b){var f=qo();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function qo(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ts=function(b){le(e,b);var f=$o(e);function e(o){return X(this,e),f.call(this,wt.ROTATION,o)}return rt(e,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(t){var l=this.getCurrentAngle()%360;t%=360;var C=this.getCanvasImage(),S=C.getCenterPoint();C.set({angle:t}).setCoords(),this.adjustCanvasDimension();var T=C.getCenterPoint();return this._rotateForEachObject(S,T,t-l),gt().resolve(t)}},{key:"_rotateForEachObject",value:function(t,l,C){var S=this.getCanvas(),T={x:t.x-l.x,y:t.y-l.y};S.forEachObject(function(x){var w=x.getCenterPoint(),P=et.fabric.util.degreesToRadians(C),$=et.fabric.util.rotatePoint(w,t,P);x.set({left:$.x-T.x,top:$.y-T.y,angle:(x.angle+C)%360}),x.setCoords()}),S.renderAll()}},{key:"rotate",value:function(t){var l=this.getCurrentAngle();return this.setAngle(l+t)}}]),e}(Ae),es=ts;function is(b){var f=ns();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function ns(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var rs=function(b){le(e,b);var f=is(e);function e(o){var t;return X(this,e),t=f.call(this,wt.FREE_DRAWING,o),t.width=12,t.oColor=new et.fabric.Color("rgba(0, 0, 0, 0.5)"),t}return rt(e,[{key:"start",value:function(t){var l=this.getCanvas();l.isDrawingMode=!0,this.setBrush(t)}},{key:"setBrush",value:function(t){var l=this.getCanvas().freeDrawingBrush;t=t||{},this.width=t.width||this.width,t.color&&(this.oColor=new et.fabric.Color(t.color)),l.width=this.width,l.color=this.oColor.toRgba()}},{key:"end",value:function(){var t=this.getCanvas();t.isDrawingMode=!1}}]),e}(Ae),as=rs,Tn=30,os=2.7,ss=1.7,En=180,ls=et.fabric.util.createClass(et.fabric.Line,{type:"line",initialize:function(f){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",f,e),this.arrowType=e.arrowType},_render:function(f){var e=this.calcLinePoints(),o=e.x1,t=e.y1,l=e.x2,C=e.y2,S={fromX:o,fromY:t,toX:l,toY:C};this.ctx=f,f.lineWidth=this.strokeWidth,this._renderBasicLinePath(S),this._drawDecoratorPath(S),this._renderStroke(f)},_renderBasicLinePath:function(f){var e=f.fromX,o=f.fromY,t=f.toX,l=f.toY;this.ctx.beginPath(),this.ctx.moveTo(e,o),this.ctx.lineTo(t,l)},_drawDecoratorPath:function(f){this._drawDecoratorPathType("head",f),this._drawDecoratorPathType("tail",f)},_drawDecoratorPathType:function(f,e){switch(this.arrowType[f]){case"triangle":this._drawTrianglePath(f,e);break;case"chevron":this._drawChevronPath(f,e);break}},_drawTrianglePath:function(f,e){var o=this.ctx.lineWidth*ss;this._drawChevronPath(f,e,o),this.ctx.closePath()},_drawChevronPath:function(f,e,o){var t=this,l=e.fromX,C=e.fromY,S=e.toX,T=e.toY,x=this.ctx;o||(o=this.ctx.lineWidth*os);var w=f==="head"?[l,C]:[S,T],P=it(w,2),$=P[0],q=P[1],st=f==="head"?[S,T]:[l,C],nt=it(st,2),ct=nt[0],Mt=nt[1],Gt=Math.atan2(Mt-q,ct-$)*En/Math.PI,Zt=function(Pt){return t.getRotatePosition(o,Pt,{x:$,y:q})};x.moveTo.apply(x,D(Zt(Gt+Tn))),x.lineTo($,q),x.lineTo.apply(x,D(Zt(Gt-Tn)))},getRotatePosition:function(f,e,o){var t=e*Math.PI/En,l=o.x,C=o.y;return[f*Math.cos(t)+l,f*Math.sin(t)+C]}}),cs=ls;function us(b){var f=hs();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function hs(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var fs=function(b){le(e,b);var f=us(e);function e(o){var t,l,C,S;return X(this,e),S=f.call(this,wt.LINE,o),S._width=12,S._oColor=new et.fabric.Color("rgba(0, 0, 0, 0.5)"),S._listeners={mousedown:Q()(t=S._onFabricMouseDown).call(t,te(S)),mousemove:Q()(l=S._onFabricMouseMove).call(l,te(S)),mouseup:Q()(C=S._onFabricMouseUp).call(C,te(S))},S}return rt(e,[{key:"setHeadOption",value:function(t){var l=t.arrowType,C=l===void 0?{head:null,tail:null}:l;this._arrowType=C}},{key:"start",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=this.getCanvas();l.defaultCursor="crosshair",l.selection=!1,this.setHeadOption(t),this.setBrush(t),l.forEachObject(function(C){C.set({evented:!1})}),l.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(t){var l=this.getCanvas().freeDrawingBrush;t=t||{},this._width=t.width||this._width,t.color&&(this._oColor=new et.fabric.Color(t.color)),l.width=this._width,l.color=this._oColor.toRgba()}},{key:"end",value:function(){var t=this.getCanvas();t.defaultCursor="default",t.selection=!0,t.forEachObject(function(l){l.set({evented:!0})}),t.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(t){var l=this.getCanvas(),C=l.getPointer(t.e),S=C.x,T=C.y,x=[S,T,S,T];this._line=new cs(x,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Oe.SELECTION_STYLE),l.add(this._line),l.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(yt.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(t){var l=this.getCanvas(),C=l.getPointer(t.e);this._line.set({x2:C.x,y2:C.y}),this._line.setCoords(),l.renderAll()}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(yt.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,t.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var t=this.graphics.createObjectProperties(this._line),l=this._line,C=l.x1,S=l.x2,T=l.y1,x=l.y2;return H()({},t,{startPosition:{x:C,y:T},endPosition:{x:S,y:x}})}}]),e}(Ae),ds=fs;function gs(b){var f=vs();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function vs(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var ms={fill:"#000000",left:0,top:0},ps={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},ys=500,Cs=function(b){le(e,b);var f=gs(e);function e(o){var t,l,C,S,T,x;return X(this,e),x=f.call(this,wt.TEXT,o),x._defaultStyles=ms,x._isSelected=!1,x._selectedObj={},x._editingObj={},x._listeners={mousedown:Q()(t=x._onFabricMouseDown).call(t,te(x)),select:Q()(l=x._onFabricSelect).call(l,te(x)),selectClear:Q()(C=x._onFabricSelectClear).call(C,te(x)),scaling:Q()(S=x._onFabricScaling).call(S,te(x)),textChanged:Q()(T=x._onFabricTextChanged).call(T,te(x))},x._textarea=null,x._ratio=1,x._lastClickTime=new Date().getTime(),x._editingObjInfos={},x.isPrevEditing=!1,x}return rt(e,[{key:"start",value:function(){var t=this,l=this.getCanvas();l.selection=!1,l.defaultCursor="text",l.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),l.forEachObject(function(C){C.type==="i-text"&&t.adjustOriginPosition(C,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var t=this,l=this.getCanvas();l.selection=!0,l.defaultCursor="default",l.forEachObject(function(C){C.type==="i-text"&&(C.text===""?l.remove(C):t.adjustOriginPosition(C,"end"))}),l.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(t,l){var C="center",S="center";l==="start"&&(C="left",S="top");var T=t.getPointByOrigin(C,S),x=T.x,w=T.y;t.set({left:x,top:w,originX:C,originY:S}),t.setCoords()}},{key:"add",value:function(t,l){var C=this;return new(gt())(function(S){var T,x=C.getCanvas(),w=null,P=Oe.SELECTION_STYLE,$=C._defaultStyles;C._setInitPos(l.position),l.styles&&($=H()($,l.styles)),gn()(l.autofocus)||(l.autofocus=!0),w=new et.fabric.IText(t,$),P=H()({},P,{originX:"left",originY:"top"}),w.set(P),w.on({mouseup:Q()(T=C._onFabricMouseUp).call(T,C)}),x.add(w),l.autofocus&&(w.enterEditing(),w.selectAll()),x.getActiveObject()||x.setActiveObject(w),C.isPrevEditing=!0,S(C.graphics.createObjectProperties(w))})}},{key:"change",value:function(t,l){var C=this;return new(gt())(function(S){t.set("text",l),C.getCanvas().renderAll(),S()})}},{key:"setStyle",value:function(t,l){var C=this;return new(gt())(function(S){U()(l,function(T,x){t[x]===T&&x!=="fontSize"&&(l[x]=ps[x]||"")},C),"textDecoration"in l&&H()(l,C._getTextDecorationAdaptObject(l.textDecoration)),t.set(l),C.getCanvas().renderAll(),S()})}},{key:"getText",value:function(t){return t.text}},{key:"setSelectedInfo",value:function(t,l){this._selectedObj=t,this._isSelected=l}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var t=this.getCanvasElement(),l=ft()(t.style.maxWidth,10),C=t.width;this._ratio=C/l}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(t){return{underline:t==="underline",linethrough:t==="line-through",overline:t==="overline"}}},{key:"_setInitPos",value:function(t){t=t||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=t.x,this._defaultStyles.top=t.y}},{key:"_onInput",value:function(){var t=this.getCanvasRatio(),l=this._editingObj,C=this._textarea.style;C.width="".concat(Math.ceil(l.width/t),"px"),C.height="".concat(Math.ceil(l.height/t),"px")}},{key:"_onKeyDown",value:function(){var t=this,l=this.getCanvasRatio(),C=this._editingObj,S=this._textarea.style;i()(function(){C.text(t._textarea.value),S.width="".concat(Math.ceil(C.width/l),"px"),S.height="".concat(Math.ceil(C.height/l),"px")},0)}},{key:"_onBlur",value:function(){var t=this.getCanvasRatio(),l=this._editingObj,C=this._editingObjInfos,S=this._textarea.value,T=l.width/t-C.width/t,x=l.height/t-C.height/t;if(t===1&&(T/=2,x/=2),this._textarea.style.display="none",l.set({left:C.left+T,top:C.top+x}),S.length){this.getCanvas().add(l);var w={id:Dt(l),type:l.type,text:S};this.fire(yt.TEXT_CHANGED,w)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(t){var l=t.target;l.fontSize=l.fontSize*l.scaleY,l.scaleX=1,l.scaleY=1}},{key:"_onFabricTextChanged",value:function(t){this.fire(yt.TEXT_CHANGED,t.target)}},{key:"_onFabricSelectClear",value:function(t){var l=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(t.target,!1),l&&l.text===""&&this.getCanvas().remove(l)}},{key:"_onFabricSelect",value:function(t){this.isPrevEditing=!0,this.setSelectedInfo(t.target,!0)}},{key:"_onFabricMouseDown",value:function(t){var l=t.target;if(!(l&&!l.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(t)}}},{key:"_fireAddText",value:function(t){var l=t.target,C=t.e||{},S=this.getCanvas().getPointer(C);l||this.fire(yt.ADD_TEXT,{originPosition:{x:S.x,y:S.y},clientPosition:{x:C.clientX||0,y:C.clientY||0}})}},{key:"_onFabricMouseUp",value:function(t){var l=t.target,C=new Date().getTime();this._isDoubleClick(C)&&!l.isEditing&&l.enterEditing(),l.isEditing&&this.fire(yt.TEXT_EDITING),this._lastClickTime=C}},{key:"_isDoubleClick",value:function(t){return t-this._lastClickTime<ys}}]),e}(Ae),Is=Cs;function Ss(b){var f=bs();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function bs(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var _s={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},xs=function(b){le(e,b);var f=Ss(e);function e(o){var t,l,C,S;return X(this,e),S=f.call(this,wt.ICON,o),S._oColor="#000000",S._pathMap=_s,S._type=null,S._iconColor=null,S._handlers={mousedown:Q()(t=S._onFabricMouseDown).call(t,te(S)),mousemove:Q()(l=S._onFabricMouseMove).call(l,te(S)),mouseup:Q()(C=S._onFabricMouseUp).call(C,te(S))},S}return rt(e,[{key:"setStates",value:function(t,l){this._type=t,this._iconColor=l}},{key:"start",value:function(){var t=this.getCanvas();t.selection=!1,t.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var t=this.getCanvas();t.selection=!0,t.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(t,l){var C=this;return new(gt())(function(S,T){var x=C.getCanvas(),w=C._pathMap[t],P=Oe.SELECTION_STYLE,$=w?C._createIcon(w):null;C._icon=$,$||T(oe.invalidParameters),$.set(H()({type:"icon",fill:C._oColor},P,l,C.graphics.controlStyle)),x.add($).setActiveObject($),S(C.graphics.createObjectProperties($))})}},{key:"registerPaths",value:function(t){var l=this;U()(t,function(C,S){l._pathMap[S]=C},this)}},{key:"setColor",value:function(t,l){this._oColor=t,l&&l.get("type")==="icon"&&(l.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(t){return dt()(t)}},{key:"_createIcon",value:function(t){return new et.fabric.Path(t)}},{key:"_onFabricMouseDown",value:function(t){var l=this,C=this.getCanvas();this._startPoint=C.getPointer(t.e);var S=this._startPoint,T=S.x,x=S.y;this.add(this._type,{left:T,top:x,fill:this._iconColor}).then(function(){l.fire(yt.ADD_OBJECT,l.graphics.createObjectProperties(l._icon)),C.on("mouse:move",l._handlers.mousemove),C.on("mouse:up",l._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(t){var l=this.getCanvas();if(!!this._icon){var C=l.getPointer(t.e),S=(C.x-this._startPoint.x)/this._icon.width,T=(C.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(S*2),scaleY:Math.abs(T*2)}),this._icon.setCoords(),l.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(yt.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,t.off("mouse:down",this._handlers.mousedown),t.off("mouse:move",this._handlers.mousemove),t.off("mouse:up",this._handlers.mouseup)}}]),e}(Ae),Ms=xs,Ts=et.fabric.util.createClass(et.fabric.Image.filters.BlendImage,{applyTo:function(f){if(!!this.mask){var e=f.canvasEl,o=e.width,t=e.height,l=this._createCanvasOfMask(o,t),C=e.getContext("2d"),S=l.getContext("2d"),T=C.getImageData(0,0,o,t);this._drawMask(S,e,C),this._mapData(S,T,o,t),f.imageData=T}},_createCanvasOfMask:function(f,e){var o=et.fabric.util.createCanvasElement();return o.width=f,o.height=e,o},_drawMask:function(f){var e=this.mask,o=e.getElement(),t=e.angle,l=e.left,C=e.scaleX,S=e.scaleY,T=e.top;f.save(),f.translate(l,T),f.rotate(t*Math.PI/180),f.scale(C,S),f.drawImage(o,-o.width/2,-o.height/2),f.restore()},_mapData:function(f,e,o,t){for(var l=e.data,C=e.height,S=e.width,T=l,x=S*C*4,w=f.getImageData(0,0,o,t).data,P=0;P<x;P+=4)T[P+3]=w[P]}}),Es=Ts,Ds=et.fabric.util.createClass(et.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),ws=Ds,As=et.fabric.util.createClass(et.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Os=As,ks=et.fabric.util.createClass(et.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(f){f||(f={}),this.color=f.color||"#FFFFFF",this.threshold=f.threshold||45,this.x=f.x||null,this.y=f.y||null},applyTo:function(f){var e=f.canvasEl,o=e.getContext("2d"),t=o.getImageData(0,0,e.width,e.height),l=t.data,C=this.threshold,S=et.fabric.Color.sourceFromHex(this.color),T,x;for(this.x&&this.y&&(S=this._getColor(t,this.x,this.y)),T=0,x=l.length;T<x;T+=4)this._isOutsideThreshold(l[T],S[0],C)||this._isOutsideThreshold(l[T+1],S[1],C)||this._isOutsideThreshold(l[T+2],S[2],C)||(l[T]=l[T+1]=l[T+2]=l[T+3]=0);o.putImageData(t,0,0)},_isOutsideThreshold:function(f,e,o){var t=f-e;return Math.abs(t)>o},_getColor:function(f,e,o){var t=[0,0,0,0],l=f.data,C=f.width,S=4,T=(C*o+e)*S;return t[0]=l[T],t[1]=l[T+1],t[2]=l[T+2],t[3]=l[T+3],t}}),Ps=ks;function Ls(b){var f=js();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function js(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var pi=et.fabric.Image.filters;pi.Mask=Es,pi.Sharpen=ws,pi.Emboss=Os,pi.ColorFilter=Ps;var Ns=function(b){le(e,b);var f=Ls(e);function e(o){return X(this,e),f.call(this,wt.FILTER,o)}return rt(e,[{key:"add",value:function(t,l){var C=this;return new(gt())(function(S,T){var x=C._getSourceImage(),w=C.getCanvas(),P=C._getFilter(x,t);P||(P=C._createFilter(x,t,l)),P||T(oe.invalidParameters),C._changeFilterValues(P,l),C._apply(x,function(){w.renderAll(),S({type:t,action:"add",options:l})})})}},{key:"remove",value:function(t){var l=this;return new(gt())(function(C,S){var T=l._getSourceImage(),x=l.getCanvas(),w=l.getOptions(t);T.filters.length||S(oe.unsupportedOperation),l._removeFilter(T,t),l._apply(T,function(){x.renderAll(),C({type:t,action:"remove",options:w})})})}},{key:"hasFilter",value:function(t){return!!this._getFilter(this._getSourceImage(),t)}},{key:"getOptions",value:function(t){var l=this._getSourceImage(),C=this._getFilter(l,t);return C?H()({},C.options):null}},{key:"_changeFilterValues",value:function(t,l){U()(l,function(C,S){N()(t[S])||(t[S]=C)}),U()(t.options,function(C,S){N()(l[S])||(t.options[S]=l[S])})}},{key:"_apply",value:function(t,l){t.filters.push();var C=t.applyFilters();C&&l()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(t,l,C){var S,T=this._getFabricFilterType(l),x=et.fabric.Image.filters[T];return x&&(S=new x(C),S.options=C,t.filters.push(S)),S}},{key:"_getFilter",value:function(t,l){var C=null;if(t){var S=this._getFabricFilterType(l),T=t.filters.length,x,w;for(w=0;w<T;w+=1)if(x=t.filters[w],x.type===S){C=x;break}}return C}},{key:"_removeFilter",value:function(t,l){var C,S=this._getFabricFilterType(l);t.filters=Xe()(C=t.filters).call(C,function(T){return T.type!==S})}},{key:"_getFabricFilterType",value:function(t){return t.charAt(0).toUpperCase()+v()(t).call(t,1)}}]),e}(Ae),Rs=Ns,zs=Lt(1801),Fe=Lt.n(zs),Dn={pixelate:"blocksize",blur:"blur"},Wi={x:"width",y:"height"},Fs=xr(Dn),ti=null;function yi(b){var f=Qe(b,"patternSourceCanvas"),e=f.patternSourceCanvas,o=e.getObjects(),t=it(o,1),l=t[0];return l}function Bs(b){var f=b.angle,e=b.flipX,o=b.flipY,t=yi(b),l=$s(b),C=l.right,S=l.bottom,T=l.width,x=l.height,w=(T-b.width)/2,P=(x-b.height)/2,$=b.left-b.width/2-w,q=b.top-b.height/2-P,st=T/2-w,nt=x/2-P,ct=Math.max(T,x)+Math.max(w,P),Mt=Hs({shapeObj:b,left:st,top:nt,width:T,height:x,cropX:$,cropY:q,flipX:e,flipY:o,right:C,bottom:S}),Gt=it(Mt,4);st=Gt[0],nt=Gt[1],T=Gt[2],x=Gt[3],t.set({angle:e===o?-f:f,left:st,top:nt,width:T,height:x,cropX:$,cropY:q,flipX:e,flipY:o}),Fi(t,{fillImageMaxSize:ct})}function Gi(b){var f;return Ne()(f=b.filters).call(f,function(e){var o=mt()(e),t=it(o,1),l=t[0];return z({},Fs[l],e[l])})}function Hs(b){var f=b.shapeObj,e=b.left,o=b.top,t=b.width,l=b.height,C=b.cropX,S=b.cropY,T=b.flipX,x=b.flipY,w=b.right,P=b.bottom,$=function(Jt,Pt,ne,be){return Xs({type:Jt,outDistance:Pt,shapeObj:f,flipX:T,flipY:x,left:ne,top:be})},q=t,st=l,nt=Us($,{left:e,top:o,width:t,height:l,cropX:C,cropY:S}),ct=it(nt,4);e=ct[0],o=ct[1],t=ct[2],l=ct[3];var Mt=Ys($,{left:e,top:o,insideCanvasRealImageWidth:t,insideCanvasRealImageHeight:l,right:w,bottom:P,cropX:C,cropY:S,originalWidth:q,originalHeight:st}),Gt=it(Mt,4);return e=Gt[0],o=Gt[1],t=Gt[2],l=Gt[3],[e,o,t,l]}function Ys(b,f){var e=f.left,o=f.top,t=f.insideCanvasRealImageWidth,l=f.insideCanvasRealImageHeight,C=f.right,S=f.bottom,T=f.cropX,x=f.cropY,w=f.originalWidth,P=f.originalHeight,$=t,q=l,st=ti,nt=st.width,ct=st.height;C>nt&&T>0&&($=w-Math.abs(C-nt)),S>ct&&x>0&&(q=P-Math.abs(S-ct));var Mt={x:(t-$)/2,y:(l-q)/2};return U()(["x","y"],function(Gt){var Zt=Mt[Gt];if(Zt>0){var Jt=b(Gt,Zt,e,o),Pt=it(Jt,2);e=Pt[0],o=Pt[1]}}),[e,o,$,q]}function Us(b,f){var e=f.left,o=f.top,t=f.width,l=f.height,C=f.cropX,S=f.cropY,T={width:t,height:l};return U()(["x","y"],function(x){var w=x==="x"?C:S,P=T[Wi[x]],$=ti[Wi[x]];if(P>$){var q=(P-$)/2;T[Wi[x]]=$;var st=b(x,q,e,o),nt=it(st,2);e=nt[0],o=nt[1]}if(w<0){var ct=b(x,w,e,o),Mt=it(ct,2);e=Mt[0],o=Mt[1]}}),[e,o,T.width,T.height]}function wn(b,f,e){var o=An(b),t=kn(o,b.angle,f);e.add(t);var l={fill:new et.fabric.Pattern({source:e.getElement(),repeat:"no-repeat"})};return Fi(l,{patternSourceCanvas:e}),l}function Ws(b){var f=b.getObjects(),e=it(f,1),o=e[0],t=Qe(o,"fillImageMaxSize"),l=t.fillImageMaxSize;l=Math.max(1,l),b.setDimensions({width:l,height:l}),b.renderAll()}function Gs(b,f){var e=Qe(b,"patternSourceCanvas"),o=e.patternSourceCanvas,t=o.getObjects(),l=it(t,1),C=l[0],S=Gi(C);o.remove(C);var T=An(f,!0),x=kn(T,f.angle,S);o.add(x)}function An(b){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!ti||f)&&(ti=b.toCanvasElement()),ti}function Xs(b){var f=b.type,e=b.shapeObj,o=b.outDistance,t=b.left,l=b.top,C=b.flipX,S=b.flipY,T=On(e),x=[[1,2],[0,3],[0,3],[1,2]],w=Vs(f,T,x),P=Js(f,T,w),$=w.startPointIndex,q=Zs({outDistance:o,startPointIndex:$,flipX:C,flipY:S,reatAngles:P});return[t+q.left,l+q.top]}function Zs(b){var f=b.outDistance,e=b.startPointIndex,o=b.flipX,t=b.flipY,l=b.reatAngles,C=f*Math.cos(l[0]*Math.PI/180),S=f*Math.cos(l[1]*Math.PI/180),T=e===2||e===3,x={top:T?C:S,left:T?S:C};return Qs(e,o,t)&&(x.left=x.left*-1),Ks(e,o,t)&&(x.top=x.top*-1),x}function Vs(b,f,e){var o=0,t=0;U()(f,function(T,x){T[b]<o&&(o=T[b],t=x)});var l=it(e[t],2),C=l[0],S=l[1];return{startPointIndex:t,endPointIndex1:C,endPointIndex2:S}}function Js(b,f,e){var o,t=e.startPointIndex,l=e.endPointIndex1,C=e.endPointIndex2,S=b==="x"?180:270;return Ne()(o=[l,C]).call(o,function(T){var x=f[t],w=f[T],P=x.y-w.y,$=x.x-w.x;return Math.atan2(P,$)*180/Math.PI-S})}function Qs(b,f,e){return(!f&&e||!f&&!e)&&b===0||(f&&e||f&&!e)&&b===1||(!f&&!e||!f&&e)&&b===2||(f&&!e||f&&e)&&b===3}function Ks(b,f,e){return(f&&!e||!f&&!e)&&b===0||(!f&&!e||f&&!e)&&b===1||(f&&e||!f&&e)&&b===2||(!f&&e||f&&e)&&b===3}function On(b){return[b.getPointByOrigin("left","top"),b.getPointByOrigin("right","top"),b.getPointByOrigin("left","bottom"),b.getPointByOrigin("right","bottom")]}function $s(b){var f=On(b),e=it(f,4),o=e[0],t=o.x,l=o.y,C=e[1],S=C.x,T=C.y,x=e[2],w=x.x,P=x.y,$=e[3],q=$.x,st=$.y,nt=Math.min(t,S,w,q),ct=Math.min(l,T,P,st),Mt=Math.max(t,S,w,q),Gt=Math.max(l,T,P,st);return{left:nt,top:ct,right:Mt,bottom:Gt,width:Mt-nt,height:Gt-ct}}function kn(b,f,e){var o,t=new et.fabric.Image(b);return U()(H().apply(void 0,j()(o=[{}]).call(o,D(e))),function(l,C){var S=Mr(C),T=new et.fabric.Image.filters[S](z({},Dn[C],l));t.filters.push(T)}),t.applyFilters(),Fi(t,{originalAngle:f,fillImageMaxSize:Math.max(t.width,t.height)}),Fe().adjustOriginToCenter(t),t}function qs(b){var f=tl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function tl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Pn=H()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},ve),el="rect",il=20,nl=20;function Ln(b,f,e){var o=dt()(b),t=tn(dt()(b)),l=o;o.color&&(l=o.color);var C=null;if(t==="filter"){var S=e();C=wn(f,Xe()(o),S)}else C={fill:l};return H()({},b,C)}var rl=function(b){le(e,b);var f=qs(e);function e(o){var t,l,C,S,T,x;return X(this,e),x=f.call(this,wt.SHAPE,o),x._shapeObj=null,x._type=el,x._options=H()({},Pn),x._isSelected=!1,x._startPoint={},x._withShiftKey=!1,x._handlers={mousedown:Q()(t=x._onFabricMouseDown).call(t,te(x)),mousemove:Q()(l=x._onFabricMouseMove).call(l,te(x)),mouseup:Q()(C=x._onFabricMouseUp).call(C,te(x)),keydown:Q()(S=x._onKeyDown).call(S,te(x)),keyup:Q()(T=x._onKeyUp).call(T,te(x))},x}return rt(e,[{key:"start",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="crosshair",t.selection=!1,t.uniformScaling=!0,t.on({"mouse:down":this._handlers.mousedown}),et.fabric.util.addListener(document,"keydown",this._handlers.keydown),et.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="default",t.selection=!0,t.uniformScaling=!1,t.off({"mouse:down":this._handlers.mousedown}),et.fabric.util.removeListener(document,"keydown",this._handlers.keydown),et.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(t,l){this._type=t,l&&(this._options=H()(this._options,l))}},{key:"add",value:function(t,l){var C=this;return new(gt())(function(S){var T=C.getCanvas(),x=C._extendOptions(l),w=C._createInstance(t,x),P=C.graphics.createObjectProperties(w);C._bindEventOnShape(w),T.add(w).setActiveObject(w),C._resetPositionFillFilter(w),S(P)})}},{key:"change",value:function(t,l){var C=this;return new(gt())(function(S,T){en(t)||T(oe.unsupportedType);var x=tn(dt()(l))==="filter",w=C.graphics,P=w.canvasImage,$=w.createStaticCanvas;t.set(x?Ln(l,P,$):l),x&&C._resetPositionFillFilter(t),C.getCanvas().renderAll(),S()})}},{key:"makeFillPropertyForUserEvent",value:function(t){var l=Bi(t),C={};if(l===xt.FILTER){var S=yi(t),T=Gi(S);C.type=l,C.filter=T}else C.type=xt.COLOR,C.color=dt()(t)||"transparent";return C}},{key:"processForCopiedObject",value:function(t,l){if(this._bindEventOnShape(t),Bi(t)==="filter"){var C=yi(l),S=Gi(C),T=this.graphics.createStaticCanvas();t.set(wn(this.graphics.canvasImage,S,T)),this._resetPositionFillFilter(t)}}},{key:"_createInstance",value:function(t,l){var C;switch(t){case"rect":C=new et.fabric.Rect(l);break;case"circle":C=new et.fabric.Ellipse(H()({type:"circle"},l));break;case"triangle":C=new et.fabric.Triangle(l);break;default:C={}}return C}},{key:"_extendOptions",value:function(t){var l=Oe.SELECTION_STYLE,C=this.graphics,S=C.canvasImage,T=C.createStaticCanvas;return t=H()({},Pn,this._options,l,t),Ln(t,S,T)}},{key:"_bindEventOnShape",value:function(t){var l=this,C=this.getCanvas();t.on({added:function(){l._shapeObj=this,Fe().setOrigins(l._shapeObj)},selected:function(){l._isSelected=!0,l._shapeObj=this,C.uniformScaling=!0,C.defaultCursor="default",Fe().setOrigins(l._shapeObj)},deselected:function(){l._isSelected=!1,l._shapeObj=null,C.defaultCursor="crosshair",C.uniformScaling=!1},modified:function(){var T=l._shapeObj;Fe().adjustOriginToCenter(T),Fe().setOrigins(T)},modifiedInGroup:function(T){l._fillFilterRePositionInGroupSelection(t,T)},moving:function(){l._resetPositionFillFilter(this)},rotating:function(){l._resetPositionFillFilter(this)},scaling:function(T){var x=C.getPointer(T.e),w=l._shapeObj;C.setCursor("crosshair"),Fe().resize(w,x,!0),l._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(t){if(t.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var l=this.getCanvas();this._startPoint=l.getPointer(t.e),l.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var l=this,C=this.getCanvas(),S=C.getPointer(t.e),T=this._startPoint.x,x=this._startPoint.y,w=T-S.x,P=x-S.y,$=this._shapeObj;$?(this._shapeObj.set({isRegular:this._withShiftKey}),Fe().resize($,S),C.renderAll(),this._resetPositionFillFilter($)):this.add(this._type,{left:T,top:x,width:w,height:P}).then(function(q){l.fire(yt.ADD_OBJECT,q)})}},{key:"_onFabricMouseUp",value:function(){var t=this,l=this.getCanvas(),C=this._startPoint.x,S=this._startPoint.y,T=this._shapeObj;T?T&&(Fe().adjustOriginToCenter(T),this.fire(yt.OBJECT_ADDED,this.graphics.createObjectProperties(T))):this.add(this._type,{left:C,top:S,width:il,height:nl}).then(function(x){t.fire(yt.ADD_OBJECT,x)}),l.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(t){t.keyCode===fe.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(t){t.keyCode===fe.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(t){if(Bi(t)==="filter"){var l=Qe(t,"patternSourceCanvas"),C=l.patternSourceCanvas,S=yi(t),T=Qe(S,"originalAngle"),x=T.originalAngle;this.graphics.canvasImage.angle!==x&&Gs(t,this.graphics.canvasImage);var w=t.originX,P=t.originY;Fe().adjustOriginToCenter(t),t.width*=t.scaleX,t.height*=t.scaleY,t.rx*=t.scaleX,t.ry*=t.scaleY,t.scaleX=1,t.scaleY=1,Bs(t),_r(t,{originX:w,originY:P}),Ws(C)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(t,l){(l.scaleX!==1||l.scaleY!==1)&&l.addWithUpdate();var C=t.angle,S=t.left,T=t.top;et.fabric.util.addTransformToObject(t,l.calcTransformMatrix()),this._resetPositionFillFilter(t),t.set({angle:C,left:S,top:T})}}]),e}(Ae);function al(b){var f=ol();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function ol(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Xi=10,jn={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},Zi={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},Vi={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},Ci=1,Nn=yt.ZOOM_CHANGED,sl=yt.ADD_TEXT,ll=yt.TEXT_EDITING,cl=yt.OBJECT_MODIFIED,Rn=yt.KEY_DOWN,zn=yt.KEY_UP,ul=yt.HAND_STARTED,hl=yt.HAND_STOPPED,fl=function(b){le(e,b);var f=al(e);function e(o){var t,l,C,S,T,x,w,P,$,q,st,nt,ct;X(this,e),ct=f.call(this,wt.ZOOM,o),ct.zoomArea=null,ct._startPoint=null,ct._centerPoints=[],ct.zoomLevel=Ci,ct.zoomMode=_e.DEFAULT,ct._listeners={startZoom:Q()(t=ct._onMouseDownWithZoomMode).call(t,te(ct)),moveZoom:Q()(l=ct._onMouseMoveWithZoomMode).call(l,te(ct)),stopZoom:Q()(C=ct._onMouseUpWithZoomMode).call(C,te(ct)),startHand:Q()(S=ct._onMouseDownWithHandMode).call(S,te(ct)),moveHand:Q()(T=ct._onMouseMoveWithHandMode).call(T,te(ct)),stopHand:Q()(x=ct._onMouseUpWithHandMode).call(x,te(ct)),zoomChanged:Q()(w=ct._changeScrollState).call(w,te(ct)),keydown:Q()(P=ct._startHandModeWithSpaceBar).call(P,te(ct)),keyup:Q()($=ct._endHandModeWithSpaceBar).call($,te(ct))};var Mt=ct.getCanvas();return ct.aspectRatio=Mt.width/Mt.height,ct._verticalScroll=new et.fabric.Rect(jn),ct._horizontalScroll=new et.fabric.Rect(jn),Mt.on(Nn,ct._listeners.zoomChanged),ct.graphics.on(sl,Q()(q=ct._startTextEditingHandler).call(q,te(ct))),ct.graphics.on(ll,Q()(st=ct._startTextEditingHandler).call(st,te(ct))),ct.graphics.on(cl,Q()(nt=ct._stopTextEditingHandler).call(nt,te(ct))),ct}return rt(e,[{key:"attachKeyboardZoomEvents",value:function(){et.fabric.util.addListener(document,Rn,this._listeners.keydown),et.fabric.util.addListener(document,zn,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){et.fabric.util.removeListener(document,Rn,this._listeners.keydown),et.fabric.util.removeListener(document,zn,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(t){this.withSpace||this.isTextEditing||t.keyCode===fe.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(t){t.keyCode===fe.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=_e.ZOOM;var t=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new et.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),t.discardActiveObject(),t.add(this.zoomArea),t.on("mouse:down",this._listeners.startZoom),t.selection=!1,t.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=_e.DEFAULT;var t=this.getCanvas(),l=this._listeners,C=l.startZoom,S=l.moveZoom,T=l.stopZoom;t.selection=!0,t.defaultCursor="auto",t.off({"mouse:down":C,"mouse:move":S,"mouse:up":T}),this._changeObjectsEventedState(!0),t.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=_e.HAND;var t=this.getCanvas();this._changeObjectsEventedState(!1),t.discardActiveObject(),t.off("mouse:down",this._listeners.startHand),t.on("mouse:down",this._listeners.startHand),t.selection=!1,t.defaultCursor="grab",t.fire(ul)}},{key:"endHandMode",value:function(){this.zoomMode=_e.DEFAULT;var t=this.getCanvas();this._changeObjectsEventedState(!0),t.off("mouse:down",this._listeners.startHand),t.selection=!0,t.defaultCursor="auto",this._startHandPoint=null,t.fire(hl)}},{key:"_onMouseDownWithZoomMode",value:function(t){var l=t.target,C=t.e;if(!l){var S=this.getCanvas();S.selection=!1,this._startPoint=S.getPointer(C),this.zoomArea.set({width:0,height:0});var T=this._listeners,x=T.moveZoom,w=T.stopZoom;S.on({"mouse:move":x,"mouse:up":w})}}},{key:"_onMouseMoveWithZoomMode",value:function(t){var l=t.e,C=this.getCanvas(),S=C.getPointer(l),T=S.x,x=S.y,w=this.zoomArea,P=this._startPoint,$=Math.abs(T-P.x),q=Math.abs(x-P.y);$+q>Xi&&(C.remove(w),w.set(this._calcRectDimensionFromPoint(T,x)),C.add(w))}},{key:"_calcRectDimensionFromPoint",value:function(t,l){var C=this.getCanvas(),S=C.getWidth(),T=C.getHeight(),x=this._startPoint,w=x.x,P=x.y,$=Math.min,q=$(w,t),st=$(P,l),nt=Vt(t,w,S)-q,ct=Vt(l,P,T)-st;return{left:q,top:st,width:nt,height:ct}}},{key:"_onMouseUpWithZoomMode",value:function(){var t=this.zoomLevel,l=this.zoomArea,C=this._listeners,S=C.moveZoom,T=C.stopZoom,x=this.getCanvas(),w=this._getCenterPoint(),P=w.x,$=w.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:P,y:$,prevZoomLevel:t,zoomLevel:t+1}),t+=1,x.zoomToPoint({x:P,y:$},t),this._fireZoomChanged(x,t),this.zoomLevel=t),x.off({"mouse:move":S,"mouse:up":T}),x.remove(l),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var t=this.zoomArea,l=t.left,C=t.top,S=t.width,T=t.height,x=this._startPoint,w=x.x,P=x.y,$=this.aspectRatio;return S<Xi&&T<Xi?{x:w,y:P}:S>T?{x:l+$*T/2,y:C+T/2}:{x:l+S/2,y:C+S/$/2}}},{key:"zoom",value:function(t){for(var l=t.x,C=t.y,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,T=this.getCanvas(),x=this._centerPoints,w=x.length-1;w>=0&&!(x[w].zoomLevel<S);w-=1){var P=x.pop(),$=P.x,q=P.y,st=P.prevZoomLevel;T.zoomToPoint({x:$,y:q},st),this.zoomLevel=st}T.zoomToPoint({x:l,y:C},S),this._isDefaultZoomLevel(S)||this._centerPoints.push({x:l,y:C,zoomLevel:S,prevZoomLevel:this.zoomLevel}),this.zoomLevel=S,this._fireZoomChanged(T,S)}},{key:"zoomOut",value:function(){var t=this._centerPoints;if(!!t.length){var l=this.getCanvas(),C=t.pop(),S=C.x,T=C.y,x=C.prevZoomLevel;this._isDefaultZoomLevel(x)?l.setViewportTransform([1,0,0,1,0,0]):l.zoomToPoint({x:S,y:T},x),this.zoomLevel=x,this._fireZoomChanged(l,this.zoomLevel)}}},{key:"resetZoom",value:function(){var t=this.getCanvas();t.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=Ci,this._centerPoints=[],this._fireZoomChanged(t,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(t){var l=t.x,C=t.y,S=this._centerPoints;if(!!S.length){var T=this.getCanvas(),x=this.zoomLevel,w=S.pop(),P=w.x,$=w.y,q=w.prevZoomLevel,st=P-l,nt=$-C;T.zoomToPoint({x:P,y:$},q),T.zoomToPoint({x:st,y:nt},x),S.push({x:st,y:nt,prevZoomLevel:q,zoomLevel:x}),this._fireZoomChanged(T,x)}}},{key:"_onMouseDownWithHandMode",value:function(t){var l=t.target,C=t.e;if(!l){var S=this.getCanvas();if(!(this.zoomLevel<=Ci)){S.selection=!1,this._startHandPoint=S.getPointer(C);var T=this._listeners,x=T.moveHand,w=T.stopHand;S.on({"mouse:move":x,"mouse:up":w})}}}},{key:"_onMouseMoveWithHandMode",value:function(t){var l=t.e,C=this.getCanvas(),S=C.getPointer(l),T=S.x,x=S.y,w=T-this._startHandPoint.x,P=x-this._startHandPoint.y;this._movePointOfZoom({x:w,y:P})}},{key:"_onMouseUpWithHandMode",value:function(){var t=this.getCanvas(),l=this._listeners,C=l.moveHand,S=l.stopHand;t.off({"mouse:move":C,"mouse:up":S}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(t){var l=t.viewport,C=t.zoomLevel,S=this.getCanvas();if(S.remove(this._verticalScroll),S.remove(this._horizontalScroll),!this._isDefaultZoomLevel(C)){var T=S.width,x=S.height,w=l.tl,P=l.tr,$=l.bl,q=P.x-w.x,st=$.y-w.y,nt=q*q/T,ct=st*Vi.SIZE,Mt=Vt(w.x+w.x/T*q,w.x,P.x-nt),Gt=st*Vi.MARGIN,Zt=st*Vi.BORDER_RADIUS;this._horizontalScroll.set({left:Mt,top:$.y-ct-Gt,width:nt,height:ct,rx:Zt,ry:Zt});var Jt=q*Zi.SIZE,Pt=st*st/x,ne=Vt(w.y+w.y/x*st,P.y,$.y-Pt),be=q*Zi.MARGIN,Ee=q*Zi.BORDER_RADIUS;this._verticalScroll.set({left:P.x-Jt-be,top:ne,width:Jt,height:Pt,rx:Ee,ry:Ee}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,l=this.getCanvas();l.forEachObject(function(C){C.evented=t})}},{key:"_addScrollBar",value:function(){var t=this,l=this.getCanvas();l.add(this._horizontalScroll),l.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=i()(function(){l.remove(t._horizontalScroll),l.remove(t._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(t){return t===Ci}},{key:"_fireZoomChanged",value:function(t,l){t.fire(Nn,{viewport:t.calcViewportBoundaries(),zoomLevel:l})}},{key:"mode",get:function(){return this.zoomMode}}]),e}(Ae),dl=fl,Fn=di.create,Bn=di.types,gl=function(){function b(f){X(this,b),this.name=f}return rt(b,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(Fn(Bn.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(Fn(Bn.UN_IMPLEMENTATION,"stop"))}}]),b}(),Ye=gl;function vl(b){var f=ml();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function ml(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var pl=function(b){le(e,b);var f=vl(e);function e(){return X(this,e),f.call(this,ie.CROPPER)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.CROPPER);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.CROPPER);l.end()}}]),e}(Ye),yl=pl;function Cl(b){var f=Il();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Il(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Sl=function(b){le(e,b);var f=Cl(e);function e(){return X(this,e),f.call(this,ie.FREE_DRAWING)}return rt(e,[{key:"start",value:function(t,l){var C=t.getComponent(wt.FREE_DRAWING);C.start(l)}},{key:"end",value:function(t){var l=t.getComponent(wt.FREE_DRAWING);l.end()}}]),e}(Ye),bl=Sl;function _l(b){var f=xl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function xl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ml=function(b){le(e,b);var f=_l(e);function e(){return X(this,e),f.call(this,ie.LINE_DRAWING)}return rt(e,[{key:"start",value:function(t,l){var C=t.getComponent(wt.LINE);C.start(l)}},{key:"end",value:function(t){var l=t.getComponent(wt.LINE);l.end()}}]),e}(Ye),Tl=Ml;function El(b){var f=Dl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Dl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var wl=function(b){le(e,b);var f=El(e);function e(){return X(this,e),f.call(this,ie.SHAPE)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.SHAPE);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.SHAPE);l.end()}}]),e}(Ye),Al=wl;function Ol(b){var f=kl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function kl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Pl=function(b){le(e,b);var f=Ol(e);function e(){return X(this,e),f.call(this,ie.TEXT)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.TEXT);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.TEXT);l.end()}}]),e}(Ye),Ll=Pl;function jl(b){var f=Nl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Nl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Rl=function(b){le(e,b);var f=jl(e);function e(){return X(this,e),f.call(this,ie.ICON)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.ICON);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.ICON);l.end()}}]),e}(Ye),zl=Rl;function Fl(b){var f=Bl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Bl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Hl=function(b){le(e,b);var f=Fl(e);function e(){return X(this,e),f.call(this,ie.ZOOM)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.ZOOM);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.ZOOM);l.end()}}]),e}(Ye),Yl=Hl,Hn=null;function Yn(b){Hn=b}function Ul(){return Hn}function Ji(b,f){var e;if(b.type==="activeSelection"){var o;e=Ne()(o=b.getObjects()).call(o,function(t){var l=t.angle,C=t.left,S=t.top,T=t.scaleX,x=t.scaleY,w=t.width,P=t.height;et.fabric.util.addTransformToObject(t,b.calcTransformMatrix());var $=f(t);return t.set({angle:l,left:C,top:S,width:w,height:P,scaleX:T,scaleY:x}),$})}else e=[f(b)];return e}function Qi(b,f,e){return e?{id:b,width:f.width,height:f.height,top:f.top,left:f.left,angle:f.angle,scaleX:f.scaleX,scaleY:f.scaleY}:H()({id:b},f)}function Wl(b){var f=Gl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Gl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Xl=function(b){le(e,b);var f=Wl(e);function e(o){var t;return X(this,e),t=f.call(this,wt.RESIZE,o),t._dimensions=null,t._originalDimensions=null,t}return rt(e,[{key:"getCurrentDimensions",value:function(){var t=this.getCanvasImage();if(!this._dimensions&&t){var l=t.width,C=t.height;this._dimensions={width:l,height:C}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(t){this._originalDimensions=t}},{key:"resize",value:function(t){var l=this.getCanvasImage(),C=l.width,S=l.height,T=l.scaleX,x=l.scaleY,w=t.width,P=t.height,$={scaleX:w?w/C:T,scaleY:P?P/S:x};return(T!==$.scaleX||x!==$.scaleY)&&(l.set($).setCoords(),this._dimensions={width:l.width*l.scaleX,height:l.height*l.scaleY}),this.adjustCanvasDimensionBase(),gt().resolve()}},{key:"start",value:function(){var t=this.getCurrentDimensions();this.setOriginalDimensions(t)}},{key:"end",value:function(){}}]),e}(Ae),Zl=Xl;function Vl(b){var f=Jl();return function(){var o=Xt(b),t;if(f){var l=Xt(this).constructor;t=It()(o,arguments,l)}else t=o.apply(this,arguments);return ce(this,t)}}function Jl(){if(typeof Reflect>"u"||!It()||It().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(It()(Boolean,[],function(){})),!0}catch{return!1}}var Ql=function(b){le(e,b);var f=Vl(e);function e(){return X(this,e),f.call(this,ie.RESIZE)}return rt(e,[{key:"start",value:function(t){var l=t.getComponent(wt.RESIZE);l.start()}},{key:"end",value:function(t){var l=t.getComponent(wt.RESIZE);l.end()}}]),e}(Ye),Kl=Ql,$l=1e3,ql=800,Ii=10,tc={cssOnly:!0},ec={backstoreOnly:!0},Un=function(){function b(f){var e,o,t,l,C,S,T,x,w,P,$,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st=q.cssMaxWidth,nt=q.cssMaxHeight;X(this,b),this.canvasImage=null,this.cssMaxWidth=st||$l,this.cssMaxHeight=nt||ql,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=ie.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:Q()(e=this._onMouseDown).call(e,this),onObjectAdded:Q()(o=this._onObjectAdded).call(o,this),onObjectRemoved:Q()(t=this._onObjectRemoved).call(t,this),onObjectMoved:Q()(l=this._onObjectMoved).call(l,this),onObjectScaled:Q()(C=this._onObjectScaled).call(C,this),onObjectModified:Q()(S=this._onObjectModified).call(S,this),onObjectRotated:Q()(T=this._onObjectRotated).call(T,this),onObjectSelected:Q()(x=this._onObjectSelected).call(x,this),onPathCreated:Q()(w=this._onPathCreated).call(w,this),onSelectionCleared:Q()(P=this._onSelectionCleared).call(P,this),onSelectionCreated:Q()($=this._onSelectionCreated).call($,this)},this._setObjectCachingToFalse(),this._setCanvasElement(f),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return rt(b,[{key:"destroy",value:function(){var e=this._canvas.wrapperEl;this._canvas.clear(),e.parentNode.removeChild(e),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var e=this.getComponent(wt.ZOOM);e.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var e=this.getComponent(wt.ZOOM);e.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(e){var o,t=[];xn()(e)?t=e:t.push(e),(o=this._canvas).add.apply(o,D(t))}},{key:"contains",value:function(e){return this._canvas.contains(e)}},{key:"getObjects",value:function(){var e;return v()(e=this._canvas.getObjects()).call(e)}},{key:"getObject",value:function(e){return this._objects[e]}},{key:"remove",value:function(e){this._canvas.remove(e)}},{key:"removeAll",value:function(e){var o,t=this._canvas,l=v()(o=t.getObjects()).call(o);return t.remove.apply(t,D(this._canvas.getObjects())),e&&t.clear(),l}},{key:"removeObjectById",value:function(e){var o=[],t=this._canvas,l=this.getObject(e),C=l&&l.isType("group")&&!l.isEmpty();return C?(t.discardActiveObject(),l.forEachObject(function(S){o.push(S),t.remove(S)})):t.contains(l)&&(o.push(l),t.remove(l)),o}},{key:"getObjectId",value:function(e){var o=null;for(o in this._objects)if(this._objects.hasOwnProperty(o)&&e===this._objects[o])return o;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var e=this.getActiveObject(),o=e.type,t=e.left,l=e.top,C=o==="activeSelection";if(C){var S=new et.fabric.Group(D(e.getObjects()),{left:t,top:l});return this._addFabricObject(S)}return this.getObjectId(e)}},{key:"isReadyRemoveObject",value:function(){var e=this.getActiveObject();return e&&!e.isEditing}},{key:"getActiveObjects",value:function(){var e=this._canvas._activeObject;return e&&e.type==="activeSelection"?e:null}},{key:"getActiveSelectionFromObjects",value:function(e){var o=this.getCanvas();return new et.fabric.ActiveSelection(e,{canvas:o})}},{key:"setActiveObject",value:function(e){this._canvas.setActiveObject(e)}},{key:"setCropSelectionStyle",value:function(e){this.cropSelectionStyle=e}},{key:"getComponent",value:function(e){return this._componentMap[e]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(e,o){if(this._isSameDrawingMode(e))return!0;this.stopDrawingMode();var t=this._getDrawingModeInstance(e);return t&&t.start&&(t.start(this,o),this._drawingMode=e),!!t}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(ie.NORMAL)){var e=this._getDrawingModeInstance(this.getDrawingMode());e&&e.end&&e.end(this),this._drawingMode=ie.NORMAL}}},{key:"zoom",value:function(e,o){var t=e.x,l=e.y,C=this.getComponent(wt.ZOOM);C.zoom({x:t,y:l},o)}},{key:"getZoomMode",value:function(){var e=this.getComponent(wt.ZOOM);return e.mode}},{key:"startZoomInMode",value:function(){var e=this.getComponent(wt.ZOOM);e.startZoomInMode()}},{key:"endZoomInMode",value:function(){var e=this.getComponent(wt.ZOOM);e.endZoomInMode()}},{key:"zoomOut",value:function(){var e=this.getComponent(wt.ZOOM);e.zoomOut()}},{key:"startHandMode",value:function(){var e=this.getComponent(wt.ZOOM);e.startHandMode()}},{key:"endHandMode",value:function(){var e=this.getComponent(wt.ZOOM);e.endHandMode()}},{key:"resetZoom",value:function(){var e=this.getComponent(wt.ZOOM);e.resetZoom()}},{key:"toDataURL",value:function(e){var o=this.getComponent(wt.CROPPER);o.changeVisibility(!1);var t=this._canvas&&this._canvas.toDataURL(e);return o.changeVisibility(!0),t}},{key:"setCanvasImage",value:function(e,o){o&&Dt(o),this.imageName=e,this.canvasImage=o}},{key:"setCssMaxDimension",value:function(e){this.cssMaxWidth=e.width||this.cssMaxWidth,this.cssMaxHeight=e.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;e||(e=this.canvasImage);var o=e.getBoundingRect(),t=o.width,l=o.height,C=this._calcMaxDimension(t,l);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(C.width,"px"),"max-height":"".concat(C.height,"px")}),this.setCanvasBackstoreDimension({width:t,height:l}),this._canvas.centerObject(e)}},{key:"setCanvasCssDimension",value:function(e){this._canvas.setDimensions(e,tc)}},{key:"setCanvasBackstoreDimension",value:function(e){this._canvas.setDimensions(e,ec)}},{key:"setImageProperties",value:function(e,o){var t=this.canvasImage;!t||(t.set(e).setCoords(),o&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(e){var o,t=this,l=Q()(o=this._callbackAfterLoadingImageObject).call(o,this);return new(gt())(function(C){et.fabric.Image.fromURL(e,function(S){l(S),C(t.createObjectProperties(S))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(wt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(e){this.getComponent(wt.CROPPER).setCropzoneRect(e)}},{key:"getCroppedImageData",value:function(e){return this.getComponent(wt.CROPPER).getCroppedImageData(e)}},{key:"setBrush",value:function(e){var o=this._drawingMode,t=wt.FREE_DRAWING;o===ie.LINE_DRAWING&&(t=wt.LINE),this.getComponent(t).setBrush(e)}},{key:"setDrawingShape",value:function(e,o){this.getComponent(wt.SHAPE).setStates(e,o)}},{key:"setIconStyle",value:function(e,o){this.getComponent(wt.ICON).setStates(e,o)}},{key:"registerPaths",value:function(e){this.getComponent(wt.ICON).registerPaths(e)}},{key:"changeCursor",value:function(e){var o=this.getCanvas();o.defaultCursor=e,o.renderAll()}},{key:"hasFilter",value:function(e){return this.getComponent(wt.FILTER).hasFilter(e)}},{key:"setSelectionStyle",value:function(e){H()(Oe.SELECTION_STYLE,e)}},{key:"setObjectProperties",value:function(e,o){var t=this.getObject(e),l=H()({},o);return t.set(l),t.setCoords(),this.getCanvas().renderAll(),l}},{key:"getObjectProperties",value:function(e,o){var t=this.getObject(e),l={};return vt()(o)?l[o]=t[o]:xn()(o)?Ke()(o,function(C){l[C]=t[C]}):vi()(o,function(C,S){l[S]=t[S]}),l}},{key:"getObjectPosition",value:function(e,o,t){var l=this.getObject(e);return l?l.getPointByOrigin(o,t):null}},{key:"setObjectPosition",value:function(e,o){var t=this.getObject(e),l=o.x,C=o.y,S=o.originX,T=o.originY;if(!t)return!1;var x=t.getPointByOrigin(S,T),w=t.getPointByOrigin("center","center"),P=w.x-x.x,$=w.y-x.y;return t.set({left:l+P,top:C+$}),t.setCoords(),!0}},{key:"getCanvasSize",value:function(){var e=this.getCanvasImage();return{width:e?e.width:0,height:e?e.height:0}}},{key:"createStaticCanvas",value:function(){var e=new et.fabric.StaticCanvas;return e.set({enableRetinaScaling:!1}),e}},{key:"_getDrawingModeInstance",value:function(e){return this._drawingModeMap[e]}},{key:"_setObjectCachingToFalse",value:function(){et.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(e){var o,t;e.nodeType?o=e:o=document.querySelector(e),o.nodeName.toUpperCase()!=="CANVAS"&&(t=document.createElement("canvas"),o.appendChild(t)),this._canvas=new et.fabric.Canvas(t,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new yl),this._register(this._drawingModeMap,new bl),this._register(this._drawingModeMap,new Tl),this._register(this._drawingModeMap,new Al),this._register(this._drawingModeMap,new Ll),this._register(this._drawingModeMap,new zl),this._register(this._drawingModeMap,new Yl),this._register(this._drawingModeMap,new Kl)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new Ao(this)),this._register(this._componentMap,new Zo(this)),this._register(this._componentMap,new Ko(this)),this._register(this._componentMap,new es(this)),this._register(this._componentMap,new as(this)),this._register(this._componentMap,new ds(this)),this._register(this._componentMap,new Is(this)),this._register(this._componentMap,new Ms(this)),this._register(this._componentMap,new Rs(this)),this._register(this._componentMap,new rl(this)),this._register(this._componentMap,new dl(this)),this._register(this._componentMap,new Zl(this))}},{key:"_register",value:function(e,o){e[o.getName()]=o}},{key:"_isSameDrawingMode",value:function(e){return this.getDrawingMode()===e}},{key:"_calcMaxDimension",value:function(e,o){var t=this.cssMaxWidth/e,l=this.cssMaxHeight/o,C=Math.min(e,this.cssMaxWidth),S=Math.min(o,this.cssMaxHeight);return t<1&&t<l?(C=e*t,S=o*t):l<1&&l<t&&(C=e*l,S=o*l),{width:Math.floor(C),height:Math.floor(S)}}},{key:"_callbackAfterLoadingImageObject",value:function(e){var o=this.getCanvasImage().getCenterPoint();e.set(Oe.SELECTION_STYLE),e.set({left:o.x,top:o.y,crossOrigin:"Anonymous"}),this.getCanvas().add(e).setActiveObject(e)}},{key:"_attachCanvasEvents",value:function(){var e=this._canvas,o=this._handler;e.on({"mouse:down":o.onMouseDown,"object:added":o.onObjectAdded,"object:removed":o.onObjectRemoved,"object:moving":o.onObjectMoved,"object:scaling":o.onObjectScaled,"object:modified":o.onObjectModified,"object:rotating":o.onObjectRotated,"path:created":o.onPathCreated,"selection:cleared":o.onSelectionCleared,"selection:created":o.onSelectionCreated,"selection:updated":o.onObjectSelected})}},{key:"_onMouseDown",value:function(e){var o=this,t=e.e,l=e.target,C=this._canvas.getPointer(t);if(l){var S=l.type,T=Ji(l,function(x){return Qi(o.getObjectId(x),x,S==="activeSelection")});Yn(T)}this.fire(yt.MOUSE_DOWN,t,C)}},{key:"_onObjectAdded",value:function(e){var o=e.target;o.isType("cropzone")||this._addFabricObject(o)}},{key:"_onObjectRemoved",value:function(e){var o=e.target;this._removeFabricObject(Dt(o))}},{key:"_onObjectMoved",value:function(e){var o=this;this._lazyFire(yt.OBJECT_MOVED,function(t){return o.createObjectProperties(t)},e.target)}},{key:"_onObjectScaled",value:function(e){var o=this;this._lazyFire(yt.OBJECT_SCALED,function(t){return o.createObjectProperties(t)},e.target)}},{key:"_onObjectModified",value:function(e){var o=e.target;if(o.type==="activeSelection"){var t=o.getObjects();Ft()(t).call(t,function(l){return l.fire("modifiedInGroup",o)})}this.fire(yt.OBJECT_MODIFIED,o,this.getObjectId(o))}},{key:"_onObjectRotated",value:function(e){var o=this;this._lazyFire(yt.OBJECT_ROTATED,function(t){return o.createObjectProperties(t)},e.target)}},{key:"_lazyFire",value:function(e,o,t){var l=this,C=t&&t.canvasEventDelegation,S=C?t.canvasEventDelegation(e):"none";S==="unregistered"&&t.canvasEventRegister(e,function(T){l.fire(e,o(T))}),S==="none"&&this.fire(e,o(t))}},{key:"_onObjectSelected",value:function(e){var o=e.target,t=this.createObjectProperties(o);this.fire(yt.OBJECT_ACTIVATED,t)}},{key:"_onPathCreated",value:function(e){var o=e.path.getCenterPoint(),t=o.x,l=o.y;e.path.set(H()({left:t,top:l},Oe.SELECTION_STYLE));var C=this.createObjectProperties(e.path);this.fire(yt.ADD_OBJECT,C)}},{key:"_onSelectionCleared",value:function(){this.fire(yt.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(e){var o=e.target,t=this.createObjectProperties(o);this.fire(yt.OBJECT_ACTIVATED,t),this.fire(yt.SELECTION_CREATED,e.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(e){this._canvas.forEachObject(function(o){o.selectable=e,o.hoverCursor=e?"move":"crosshair"})}},{key:"createObjectProperties",value:function(e){var o=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],t={id:Dt(e),type:e.type};if(H()(t,se(e,o)),fi(["i-text","text"],e.type))H()(t,this._createTextProperties(e,t));else if(fi(["rect","triangle","circle"],e.type)){var l=this.getComponent(wt.SHAPE);H()(t,{fill:l.makeFillPropertyForUserEvent(e)})}return t}},{key:"_createTextProperties",value:function(e){var o=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],t={};return H()(t,se(e,o)),t}},{key:"_addFabricObject",value:function(e){var o=Dt(e);return this._objects[o]=e,o}},{key:"_removeFabricObject",value:function(e){delete this._objects[e]}},{key:"resetTargetObjectForCopyPaste",value:function(){var e=this.getActiveObject();e&&(this.targetObjectForCopyPaste=e)}},{key:"pasteObject",value:function(){var e=this;if(!this.targetObjectForCopyPaste)return gt().resolve([]);var o=this.targetObjectForCopyPaste,t=o.type==="activeSelection",l=t?o.getObjects():[o],C=null;return this.discardSelection(),this._cloneObject(l).then(function(S){if(S.length>1)C=e.getActiveSelectionFromObjects(S);else{var T=it(S,1);C=T[0]}e.targetObjectForCopyPaste=C,e.setActiveObject(C)})}},{key:"_cloneObject",value:function(e){var o=this,t=Ne()(e).call(e,function(l){return o._cloneObjectItem(l)});return gt().all(t)}},{key:"_cloneObjectItem",value:function(e){var o=this;return this._copyFabricObjectForPaste(e).then(function(t){var l=o.createObjectProperties(t);return o.add(t),o.fire(yt.ADD_OBJECT,l),t})}},{key:"_copyFabricObjectForPaste",value:function(e){var o=this,t=function(C,S){return S?C-Ii:C+Ii};return this._copyFabricObject(e).then(function(l){var C=l.left,S=l.top,T=l.width,x=l.height,w=o.getCanvasSize(),P=w.width,$=w.height,q=C+T/2,st=S+x/2;return l.set(H()({left:t(C,q+Ii>P),top:t(S,st+Ii>$)},Oe.SELECTION_STYLE)),l})}},{key:"_copyFabricObject",value:function(e){var o=this;return new(gt())(function(t){e.clone(function(l){var C=o.getComponent(wt.SHAPE);en(l)&&C.processForCopiedObject(l,e),t(l)})})}},{key:"getCurrentDimensions",value:function(){var e=this.getComponent(wt.RESIZE);return e.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var e=this.getComponent(wt.RESIZE);return e.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(e){var o=this.getComponent(wt.RESIZE);o.setOriginalDimensions(e)}},{key:"resize",value:function(e){var o=this.getComponent(wt.RESIZE);return o.resize(e)}}]),b}();ht().mixin(Un);var ic=Un,nc=yt.MOUSE_DOWN,rc=yt.OBJECT_MOVED,ac=yt.OBJECT_SCALED,oc=yt.OBJECT_ACTIVATED,sc=yt.OBJECT_ROTATED,Wn=yt.OBJECT_ADDED,lc=yt.OBJECT_MODIFIED,cc=yt.ADD_TEXT,uc=yt.ADD_OBJECT,hc=yt.TEXT_EDITING,fc=yt.TEXT_CHANGED,dc=yt.ICON_CREATE_RESIZE,gc=yt.ICON_CREATE_END,Gn=yt.SELECTION_CLEARED,Xn=yt.SELECTION_CREATED,vc=yt.ADD_OBJECT_AFTER,Ki=function(){function b(f,e){var o,t,l,C,S,T,x,w,P,$,q,st,nt,ct,Mt,Gt;if(X(this,b),e=H()({includeUI:!1,usageStatistics:!0},e),this.mode=null,this.activeObjectId=null,e.includeUI){var Zt=e.includeUI;Zt.usageStatistics=e.usageStatistics,this.ui=new Io(f,Zt,this.getActions()),e=this.ui.setUiDefaultSelectionStyle(e)}this._invoker=new Rr,this._graphics=new ic(this.ui?this.ui.getEditorArea():f,{cssMaxWidth:e.cssMaxWidth,cssMaxHeight:e.cssMaxHeight}),this._handlers={keydown:Q()(o=this._onKeyDown).call(o,this),mousedown:Q()(t=this._onMouseDown).call(t,this),objectActivated:Q()(l=this._onObjectActivated).call(l,this),objectMoved:Q()(C=this._onObjectMoved).call(C,this),objectScaled:Q()(S=this._onObjectScaled).call(S,this),objectRotated:Q()(T=this._onObjectRotated).call(T,this),objectAdded:Q()(x=this._onObjectAdded).call(x,this),objectModified:Q()(w=this._onObjectModified).call(w,this),createdPath:this._onCreatedPath,addText:Q()(P=this._onAddText).call(P,this),addObject:Q()($=this._onAddObject).call($,this),textEditing:Q()(q=this._onTextEditing).call(q,this),textChanged:Q()(st=this._onTextChanged).call(st,this),iconCreateResize:Q()(nt=this._onIconCreateResize).call(nt,this),iconCreateEnd:Q()(ct=this._onIconCreateEnd).call(ct,this),selectionCleared:Q()(Mt=this._selectionCleared).call(Mt,this),selectionCreated:Q()(Gt=this._selectionCreated).call(Gt,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(e.selectionStyle,{applyCropSelectionStyle:e.applyCropSelectionStyle,applyGroupSelectionStyle:e.applyGroupSelectionStyle}),e.usageStatistics&&Ie(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),et.fabric.enableGLFiltering=!1}return rt(b,[{key:"_attachColorPickerInputBoxEvents",value:function(){var e=this;this.ui.on(yt.INPUT_BOX_EDITING_STARTED,function(){e.isColorPickerInputBoxEditing=!0}),this.ui.on(yt.INPUT_BOX_EDITING_STOPPED,function(){e.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(yt.INPUT_BOX_EDITING_STARTED),this.ui.off(yt.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(e,o){var t=o.applyCropSelectionStyle,l=o.applyGroupSelectionStyle;e&&this._graphics.setSelectionStyle(e),t&&this._graphics.setCropSelectionStyle(e),l&&this.on("selectionCreated",function(C){C.type==="activeSelection"&&C.set(e)})}},{key:"_attachInvokerEvents",value:function(){var e,o,t=this,l=yt.UNDO_STACK_CHANGED,C=yt.REDO_STACK_CHANGED,S=yt.EXECUTE_COMMAND,T=yt.AFTER_UNDO,x=yt.AFTER_REDO,w=yt.HAND_STARTED,P=yt.HAND_STOPPED;if(this._invoker.on(l,Q()(e=this.fire).call(e,this,l)),this._invoker.on(C,Q()(o=this.fire).call(o,this,C)),this.ui){var $=this._graphics.getCanvas();this._invoker.on(S,function(q){return t.ui.fire(S,q)}),this._invoker.on(T,function(q){return t.ui.fire(T,q)}),this._invoker.on(x,function(q){return t.ui.fire(x,q)}),$.on(w,function(){return t.ui.fire(w)}),$.on(P,function(){return t.ui.fire(P)})}}},{key:"_attachGraphicsEvents",value:function(){var e;this._graphics.on((e={},z(e,nc,this._handlers.mousedown),z(e,rc,this._handlers.objectMoved),z(e,ac,this._handlers.objectScaled),z(e,sc,this._handlers.objectRotated),z(e,oc,this._handlers.objectActivated),z(e,Wn,this._handlers.objectAdded),z(e,lc,this._handlers.objectModified),z(e,cc,this._handlers.addText),z(e,uc,this._handlers.addObject),z(e,hc,this._handlers.textEditing),z(e,fc,this._handlers.textChanged),z(e,dc,this._handlers.iconCreateResize),z(e,gc,this._handlers.iconCreateEnd),z(e,Gn,this._handlers.selectionCleared),z(e,Xn,this._handlers.selectionCreated),e))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(e){var o=e.ctrlKey,t=e.keyCode,l=e.metaKey,C=o||l;C&&(t===fe.C?this._graphics.resetTargetObjectForCopyPaste():t===fe.V?(this._graphics.pasteObject(),this.clearRedoStack()):t===fe.Z?this.undo().catch(function(){}):t===fe.Y&&this.redo().catch(function(){}));var S=t===fe.BACKSPACE||t===fe.DEL,T=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&T&&S&&(e.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var e=this._graphics.getActiveObjectIdForRemove();this.removeObject(e)}},{key:"_onMouseDown",value:function(e,o){this.fire(yt.MOUSE_DOWN,e,o)}},{key:"_pushAddObjectCommand",value:function(e){var o=de.create(Ht.ADD_OBJECT,this._graphics,e);this._invoker.pushUndoStack(o)}},{key:"_pushModifyObjectCommand",value:function(e){var o=this,t=e.type,l=Ji(e,function(S){return Qi(o._graphics.getObjectId(S),S,t==="activeSelection")}),C=de.create(Ht.CHANGE_SELECTION,this._graphics,l);C.execute(this._graphics,l),this._invoker.pushUndoStack(C)}},{key:"_onObjectActivated",value:function(e){this.fire(yt.OBJECT_ACTIVATED,e)}},{key:"_onObjectMoved",value:function(e){this.fire(yt.OBJECT_MOVED,e)}},{key:"_onObjectScaled",value:function(e){this.fire(yt.OBJECT_SCALED,e)}},{key:"_onObjectRotated",value:function(e){this.fire(yt.OBJECT_ROTATED,e)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Ht.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(e){this._graphics.changeSelectableAll(e)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(e){for(var o,t,l,C=arguments.length,S=new Array(C>1?C-1:0),T=1;T<C;T++)S[T-1]=arguments[T];var x=j()(o=[this._graphics]).call(o,S);return(t=this._invoker).execute.apply(t,j()(l=[e]).call(l,D(x)))}},{key:"executeSilent",value:function(e){for(var o,t,l,C=arguments.length,S=new Array(C>1?C-1:0),T=1;T<C;T++)S[T-1]=arguments[T];var x=j()(o=[this._graphics]).call(o,S);return(t=this._invoker).executeSilent.apply(t,j()(l=[e]).call(l,D(x)))}},{key:"undo",value:function(){for(var e=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=gt().resolve(),l=0;l<o;l+=1)t=t.then(function(){return e._invoker.undo()});return t}},{key:"redo",value:function(){for(var e=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=gt().resolve(),l=0;l<o;l+=1)t=t.then(function(){return e._invoker.redo()});return t}},{key:"zoom",value:function(e){var o=e.x,t=e.y,l=e.zoomLevel;this._graphics.zoom({x:o,y:t},l)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(e,o){if(!e)return gt().reject(oe.invalidParameters);var t=J().createObjectURL(e);return o=o||e.name,this.loadImageFromURL(t,o).then(function(l){return J().revokeObjectURL(e),l})}},{key:"loadImageFromURL",value:function(e,o){return!o||!e?gt().reject(oe.invalidParameters):this.execute(Ht.LOAD_IMAGE,o,e)}},{key:"addImageObject",value:function(e){return e?this.execute(Ht.ADD_IMAGE_OBJECT,e):gt().reject(oe.invalidParameters)}},{key:"startDrawingMode",value:function(e,o){return this._graphics.startDrawingMode(e,o)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(e){var o=this._graphics.getCroppedImageData(e);return o?this.loadImageFromURL(o.url,o.imageName):gt().reject(oe.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(e){this._graphics.setCropzoneRect(e)}},{key:"_flip",value:function(e){return this.execute(Ht.FLIP_IMAGE,e)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(e,o,t){var l=null;return t?l=this.executeSilent(Ht.ROTATE_IMAGE,e,o):l=this.execute(Ht.ROTATE_IMAGE,e,o),l}},{key:"rotate",value:function(e,o){return this._rotate("rotate",e,o)}},{key:"setAngle",value:function(e,o){return this._rotate("setAngle",e,o)}},{key:"setBrush",value:function(e){this._graphics.setBrush(e)}},{key:"setDrawingShape",value:function(e,o){this._graphics.setDrawingShape(e,o)}},{key:"setDrawingIcon",value:function(e,o){this._graphics.setIconStyle(e,o)}},{key:"addShape",value:function(e,o){return o=o||{},this._setPositions(o),this.execute(Ht.ADD_SHAPE,e,o)}},{key:"changeShape",value:function(e,o,t){var l=t?"executeSilent":"execute";return this[l](Ht.CHANGE_SHAPE,e,o)}},{key:"addText",value:function(e,o){return e=e||"",o=o||{},this.execute(Ht.ADD_TEXT,e,o)}},{key:"changeText",value:function(e,o){return o=o||"",this.execute(Ht.CHANGE_TEXT,e,o)}},{key:"changeTextStyle",value:function(e,o,t){var l=t?"executeSilent":"execute";return this[l](Ht.CHANGE_TEXT_STYLE,e,o)}},{key:"_changeActivateMode",value:function(e){e!=="ICON"&&this.getDrawingMode()!==e&&this.startDrawingMode(e)}},{key:"_onTextChanged",value:function(e){this.fire(yt.TEXT_CHANGED,e)}},{key:"_onIconCreateResize",value:function(e){this.fire(yt.ICON_CREATE_RESIZE,e)}},{key:"_onIconCreateEnd",value:function(e){this.fire(yt.ICON_CREATE_END,e)}},{key:"_onTextEditing",value:function(){this.fire(yt.TEXT_EDITING)}},{key:"_onAddText",value:function(e){this.fire(yt.ADD_TEXT,{originPosition:e.originPosition,clientPosition:e.clientPosition})}},{key:"_onAddObject",value:function(e){var o=this._graphics.getObject(e.id);this._invoker.fire(yt.EXECUTE_COMMAND,Hi(o.type)),this._pushAddObjectCommand(o)}},{key:"_onObjectAdded",value:function(e){this.fire(Wn,e),this.fire(vc,e)}},{key:"_onObjectModified",value:function(e){e.type!==zt.CROPZONE&&(this._invoker.fire(yt.EXECUTE_COMMAND,Hi(e.type)),this._pushModifyObjectCommand(e))}},{key:"_selectionCleared",value:function(){this.fire(Gn)}},{key:"_selectionCreated",value:function(e){this.fire(Xn,e)}},{key:"registerIcons",value:function(e){this._graphics.registerPaths(e)}},{key:"changeCursor",value:function(e){this._graphics.changeCursor(e)}},{key:"addIcon",value:function(e,o){return o=o||{},this._setPositions(o),this.execute(Ht.ADD_ICON,e,o)}},{key:"changeIconColor",value:function(e,o){return this.execute(Ht.CHANGE_ICON_COLOR,e,o)}},{key:"removeObject",value:function(e){var o=this._graphics.getObject(e),t=o.type;return this.execute(Ht.REMOVE_OBJECT,e,Hi(t))}},{key:"hasFilter",value:function(e){return this._graphics.hasFilter(e)}},{key:"removeFilter",value:function(e){return this.execute(Ht.REMOVE_FILTER,e)}},{key:"applyFilter",value:function(e,o,t){var l=t?"executeSilent":"execute";return this[l](Ht.APPLY_FILTER,e,o)}},{key:"toDataURL",value:function(e){return this._graphics.toDataURL(e)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(e){return e?this.execute(Ht.RESIZE_CANVAS_DIMENSION,e):gt().reject(oe.invalidParameters)}},{key:"destroy",value:function(){var e=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),U()(this,function(o,t){e[t]=null},this)}},{key:"_setPositions",value:function(e){var o=this._graphics.getCenter();N()(e.left)&&(e.left=o.left),N()(e.top)&&(e.top=o.top)}},{key:"setObjectProperties",value:function(e,o){return this.execute(Ht.SET_OBJECT_PROPERTIES,e,o)}},{key:"setObjectPropertiesQuietly",value:function(e,o){this._graphics.setObjectProperties(e,o)}},{key:"getObjectProperties",value:function(e,o){var t=this._graphics.getObject(e);return t?this._graphics.getObjectProperties(e,o):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(e,o,t){return this._graphics.getObjectPosition(e,o,t)}},{key:"setObjectPosition",value:function(e,o){return this.execute(Ht.SET_OBJECT_POSITION,e,o)}},{key:"resize",value:function(e){return this.execute(Ht.RESIZE_IMAGE,e)}}]),b}();bo.mixin(Ki),ht().mixin(Ki);var mc=Ki,pc=wt.ICON,yc={name:Ht.ADD_ICON,execute:function(f,e,o){var t=this,l=f.getComponent(pc);return l.add(e,o).then(function(C){return t.undoData.object=f.getObject(C.id),C})},undo:function(f){return f.remove(this.undoData.object),gt().resolve()}};de.register(yc);var Cc={name:Ht.ADD_IMAGE_OBJECT,execute:function(f,e){var o=this;return f.addImageObject(e).then(function(t){return o.undoData.object=f.getObject(t.id),t})},undo:function(f){return f.remove(this.undoData.object),gt().resolve()}};de.register(Cc);var Ic={name:Ht.ADD_OBJECT,execute:function(f,e){return new(gt())(function(o,t){f.contains(e)?t(oe.addedObject):(f.add(e),o(e))})},undo:function(f,e){return new(gt())(function(o,t){f.contains(e)?(f.remove(e),o(e)):t(oe.noObject)})}};de.register(Ic);var Sc=wt.SHAPE,bc={name:Ht.ADD_SHAPE,execute:function(f,e,o){var t=this,l=f.getComponent(Sc);return l.add(e,o).then(function(C){var S=C.id;return t.undoData.object=f.getObject(S),C})},undo:function(f){return f.remove(this.undoData.object),gt().resolve()}};de.register(bc);var _c=wt.TEXT,xc={name:Ht.ADD_TEXT,execute:function(f,e,o){var t=this,l=f.getComponent(_c);if(this.undoData.object){var C=this.undoData.object;return new(gt())(function(S,T){f.contains(C)?T(oe.redo):(f.add(C),S(C))})}return l.add(e,o).then(function(S){var T=S.id,x=f.getObject(T);return t.undoData.object=x,Yn(Ji(x,function(){return Qi(T,x,!1)})),S})},undo:function(f){return f.remove(this.undoData.object),gt().resolve()}};de.register(xc);var Zn=wt.FILTER,Vn=null;function Mc(b,f,e){var o={};return b==="mask"&&(o.object=e.mask),o.options=f,o}var Tc={name:Ht.APPLY_FILTER,execute:function(f,e,o,t){var l=f.getComponent(Zn);if(e==="mask"){var C=f.getObject(o.maskObjId);if(!(C&&C.isType("image")))return gt().reject(oe.invalidParameters);H()(o,{mask:C}),f.remove(o.mask)}if(!this.isRedo){var S=l.getOptions(e),T=Mc(e,S,o);Vn=this.setUndoData(T,Vn,t)}return l.add(e,o)},undo:function(f,e){var o=f.getComponent(Zn);if(e==="mask"){var t=this.undoData.object;return f.add(t),f.setActiveObject(t),o.remove(e)}return this.undoData.options?o.add(e,this.undoData.options):o.remove(e)}};de.register(Tc);var Jn=wt.ICON,Ec={name:Ht.CHANGE_ICON_COLOR,execute:function(f,e,o){var t=this;return new(gt())(function(l,C){var S=f.getComponent(Jn),T=f.getObject(e);T||C(oe.noObject),t.undoData.object=T,t.undoData.color=S.getColor(T),S.setColor(o,T),l()})},undo:function(f){var e=f.getComponent(Jn),o=this.undoData,t=o.object,l=o.color;return e.setColor(l,t),gt().resolve()}};de.register(Ec);var Qn=wt.SHAPE,Kn=null;function Dc(b,f){var e={object:f,options:{}};return vi()(b,function(o,t){e.options[t]=f[t]}),e}var wc={name:Ht.CHANGE_SHAPE,execute:function(f,e,o,t){var l=f.getComponent(Qn),C=f.getObject(e);if(!C)return gt().reject(oe.noObject);if(!this.isRedo){var S=Dc(o,C);Kn=this.setUndoData(S,Kn,t)}return l.change(C,o)},undo:function(f){var e=f.getComponent(Qn),o=this.undoData,t=o.object,l=o.options;return e.change(t,l)}};de.register(wc);var $n=wt.TEXT,Ac={name:Ht.CHANGE_TEXT,execute:function(f,e,o){var t=f.getComponent($n),l=f.getObject(e);return l?(this.undoData.object=l,this.undoData.text=t.getText(l),t.change(l,o)):gt().reject(oe.noObject)},undo:function(f){var e=f.getComponent($n),o=this.undoData,t=o.object,l=o.text;return e.change(t,l)}};de.register(Ac);var qn=wt.TEXT,tr=null;function Oc(b,f){var e={object:f,styles:{}};return vi()(b,function(o,t){var l=f[t];e.styles[t]=l}),e}var kc={name:Ht.CHANGE_TEXT_STYLE,execute:function(f,e,o,t){var l=f.getComponent(qn),C=f.getObject(e);if(!C)return gt().reject(oe.noObject);if(!this.isRedo){var S=Oc(o,C);tr=this.setUndoData(S,tr,t)}return l.setStyle(C,o)},undo:function(f){var e=f.getComponent(qn),o=this.undoData,t=o.object,l=o.styles;return e.setStyle(t,l)}};de.register(kc);var Pc={name:Ht.CLEAR_OBJECTS,execute:function(f){var e=this;return new(gt())(function(o){e.undoData.objects=f.removeAll(),o()})},undo:function(f){return f.add(this.undoData.objects),gt().resolve()}};de.register(Pc);var er=wt.FLIP,Lc={name:Ht.FLIP_IMAGE,execute:function(f,e){var o=f.getComponent(er);return this.undoData.setting=o.getCurrentSetting(),o[e]()},undo:function(f){var e=f.getComponent(er);return e.set(this.undoData.setting)}};de.register(Lc);var ir=wt.IMAGE_LOADER,jc={name:Ht.LOAD_IMAGE,execute:function(f,e,o){var t,l=f.getComponent(ir),C=l.getCanvasImage(),S=C?C.width:0,T=C?C.height:0,x=Xe()(t=f.removeAll(!0)).call(t,function(w){return w.type!=="cropzone"});return Ft()(x).call(x,function(w){w.evented=!0}),this.undoData={name:l.getImageName(),image:C,objects:x},l.load(e,o).then(function(w){return{oldWidth:S,oldHeight:T,newWidth:w.width,newHeight:w.height}})},undo:function(f){var e=f.getComponent(ir),o=this.undoData,t=o.objects,l=o.name,C=o.image;return f.removeAll(!0),f.add(t),e.load(l,C)}};de.register(jc);var nr=wt.FILTER,Nc={name:Ht.REMOVE_FILTER,execute:function(f,e){var o=f.getComponent(nr);return this.undoData.options=o.getOptions(e),o.remove(e)},undo:function(f,e){var o=f.getComponent(nr),t=this.undoData.options;return o.add(e,t)}};de.register(Nc);var Rc={name:Ht.REMOVE_OBJECT,execute:function(f,e){var o=this;return new(gt())(function(t,l){o.undoData.objects=f.removeObjectById(e),o.undoData.objects.length?t():l(oe.noObject)})},undo:function(f){return f.add(this.undoData.objects),gt().resolve()}};de.register(Rc);var zc={name:Ht.RESIZE_CANVAS_DIMENSION,execute:function(f,e){var o=this;return new(gt())(function(t){o.undoData.size={width:f.cssMaxWidth,height:f.cssMaxHeight},f.setCssMaxDimension(e),f.adjustCanvasDimension(),t()})},undo:function(f){return f.setCssMaxDimension(this.undoData.size),f.adjustCanvasDimension(),gt().resolve()}};de.register(zc);var rr=wt.ROTATION,ar=null;function Fc(b){return{angle:b.getCurrentAngle()}}var Bc={name:Ht.ROTATE_IMAGE,execute:function(f,e,o,t){var l=f.getComponent(rr);if(!this.isRedo){var C=Fc(l);ar=this.setUndoData(C,ar,t)}return l[e](o)},undo:function(f){var e=f.getComponent(rr),o=it(this.args,3),t=o[1],l=o[2];return t==="setAngle"?e[t](this.undoData.angle):e.rotate(-l)}};de.register(Bc);var Hc={name:Ht.SET_OBJECT_PROPERTIES,execute:function(f,e,o){var t=this,l=f.getObject(e);return l?(this.undoData.props={},vi()(o,function(C,S){t.undoData.props[S]=l[S]}),f.setObjectProperties(e,o),gt().resolve()):gt().reject(oe.noObject)},undo:function(f,e){var o=this.undoData.props;return f.setObjectProperties(e,o),gt().resolve()}};de.register(Hc);var Yc={name:Ht.SET_OBJECT_POSITION,execute:function(f,e,o){var t=f.getObject(e);return t?(this.undoData.objectId=e,this.undoData.props=f.getObjectProperties(e,["left","top"]),f.setObjectPosition(e,o),f.renderAll(),gt().resolve()):gt().reject(oe.noObject)},undo:function(f){var e=this.undoData,o=e.objectId,t=e.props;return f.setObjectProperties(o,t),f.renderAll(),gt().resolve()}};de.register(Yc);var Uc={name:Ht.CHANGE_SELECTION,execute:function(f,e){return this.isRedo?Ft()(e).call(e,function(o){f.setObjectProperties(o.id,o)}):this.undoData=Ul(),gt().resolve()},undo:function(f){var e;return Ft()(e=this.undoData).call(e,function(o){f.setObjectProperties(o.id,o)}),gt().resolve()}};de.register(Uc);var or=wt.RESIZE,Wc={name:Ht.RESIZE_IMAGE,execute:function(f,e){var o=f.getComponent(or),t=o.getOriginalDimensions();return t||(t=o.getCurrentDimensions()),this.undoData.dimensions=t,o.resize(e)},undo:function(f){var e=f.getComponent(or);return e.resize(this.undoData.dimensions)}};de.register(Wc);var Gc=mc}(),ni=ni.default,ni}()})})(Sr);const Kc=Xc(Sr.exports);export{Kc as I};
